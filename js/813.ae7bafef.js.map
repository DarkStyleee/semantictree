{"version":3,"file":"js/813.ae7bafef.js","mappings":"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","sources":["webpack://semantictree/./node_modules/core-js/internals/a-possible-prototype.js","webpack://semantictree/./node_modules/core-js/internals/array-buffer-basic-detection.js","webpack://semantictree/./node_modules/core-js/internals/array-buffer-view-core.js","webpack://semantictree/./node_modules/core-js/internals/array-iteration-from-last.js","webpack://semantictree/./node_modules/core-js/internals/classof.js","webpack://semantictree/./node_modules/core-js/internals/correct-prototype-getter.js","webpack://semantictree/./node_modules/core-js/internals/function-bind-context.js","webpack://semantictree/./node_modules/core-js/internals/object-get-prototype-of.js","webpack://semantictree/./node_modules/core-js/internals/object-set-prototype-of.js","webpack://semantictree/./node_modules/core-js/internals/to-string-tag-support.js","webpack://semantictree/./node_modules/core-js/modules/es.typed-array.find-last-index.js","webpack://semantictree/./node_modules/core-js/modules/es.typed-array.find-last.js","webpack://semantictree/./node_modules/@yomguithereal/helpers/extend.js","webpack://semantictree/./node_modules/events/events.js","webpack://semantictree/./node_modules/graphology-layout-force/defaults.js","webpack://semantictree/./node_modules/graphology-layout-force/helpers.js","webpack://semantictree/./node_modules/graphology-layout-force/iterate.js","webpack://semantictree/./node_modules/graphology-layout-force/worker.js","webpack://semantictree/./node_modules/graphology-utils/defaults.js","webpack://semantictree/./node_modules/graphology-utils/getters.js","webpack://semantictree/./node_modules/graphology-utils/is-graph.js","webpack://semantictree/../src/utils.js","webpack://semantictree/../../../node_modules/events/events.js","webpack://semantictree/../../../node_modules/obliterator/iterator.js","webpack://semantictree/../../../node_modules/obliterator/support.js","webpack://semantictree/../../../node_modules/obliterator/iter.js","webpack://semantictree/../../../node_modules/obliterator/take.js","webpack://semantictree/../src/errors.js","webpack://semantictree/../src/data.js","webpack://semantictree/../src/attributes/nodes.js","webpack://semantictree/../src/attributes/edges.js","webpack://semantictree/../../../node_modules/obliterator/chain.js","webpack://semantictree/../src/iteration/edges.js","webpack://semantictree/../src/iteration/neighbors.js","webpack://semantictree/../src/iteration/adjacency.js","webpack://semantictree/../src/serialization.js","webpack://semantictree/../src/graph.js","webpack://semantictree/../src/classes.js","webpack://semantictree/./node_modules/sigma/core/camera.js","webpack://semantictree/./node_modules/sigma/core/captors/captor.js","webpack://semantictree/./node_modules/sigma/core/captors/mouse.js","webpack://semantictree/./node_modules/sigma/core/captors/touch.js","webpack://semantictree/./node_modules/sigma/core/labels.js","webpack://semantictree/./node_modules/sigma/core/quadtree.js","webpack://semantictree/./node_modules/sigma/index.js","webpack://semantictree/./node_modules/sigma/rendering/canvas/edge-label.js","webpack://semantictree/./node_modules/sigma/rendering/canvas/hover.js","webpack://semantictree/./node_modules/sigma/rendering/canvas/label.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/common/edge.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/common/node.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/common/program.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/edge.arrow.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/edge.arrowHead.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/edge.clamped.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/edge.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/programs/node.fast.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.frag.glsl.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/edge.arrowHead.vert.glsl.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/edge.clamped.vert.glsl.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/edge.frag.glsl.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/edge.vert.glsl.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/node.fast.frag.glsl.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/node.fast.vert.glsl.js","webpack://semantictree/./node_modules/sigma/rendering/webgl/shaders/utils.js","webpack://semantictree/./node_modules/sigma/settings.js","webpack://semantictree/./node_modules/sigma/sigma.js","webpack://semantictree/./node_modules/sigma/types.js","webpack://semantictree/./node_modules/sigma/utils/animate.js","webpack://semantictree/./node_modules/sigma/utils/data.js","webpack://semantictree/./node_modules/sigma/utils/easings.js","webpack://semantictree/./node_modules/sigma/utils/edge-collisions.js","webpack://semantictree/./node_modules/sigma/utils/index.js","webpack://semantictree/./node_modules/sigma/utils/matrices.js"],"sourcesContent":["var isCallable = require('../internals/is-callable');\n\nvar $String = String;\nvar $TypeError = TypeError;\n\nmodule.exports = function (argument) {\n  if (typeof argument == 'object' || isCallable(argument)) return argument;\n  throw $TypeError(\"Can't set \" + $String(argument) + ' as a prototype');\n};\n","// eslint-disable-next-line es/no-typed-arrays -- safe\nmodule.exports = typeof ArrayBuffer != 'undefined' && typeof DataView != 'undefined';\n","'use strict';\nvar NATIVE_ARRAY_BUFFER = require('../internals/array-buffer-basic-detection');\nvar DESCRIPTORS = require('../internals/descriptors');\nvar global = require('../internals/global');\nvar isCallable = require('../internals/is-callable');\nvar isObject = require('../internals/is-object');\nvar hasOwn = require('../internals/has-own-property');\nvar classof = require('../internals/classof');\nvar tryToString = require('../internals/try-to-string');\nvar createNonEnumerableProperty = require('../internals/create-non-enumerable-property');\nvar defineBuiltIn = require('../internals/define-built-in');\nvar defineProperty = require('../internals/object-define-property').f;\nvar isPrototypeOf = require('../internals/object-is-prototype-of');\nvar getPrototypeOf = require('../internals/object-get-prototype-of');\nvar setPrototypeOf = require('../internals/object-set-prototype-of');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\nvar uid = require('../internals/uid');\nvar InternalStateModule = require('../internals/internal-state');\n\nvar enforceInternalState = InternalStateModule.enforce;\nvar getInternalState = InternalStateModule.get;\nvar Int8Array = global.Int8Array;\nvar Int8ArrayPrototype = Int8Array && Int8Array.prototype;\nvar Uint8ClampedArray = global.Uint8ClampedArray;\nvar Uint8ClampedArrayPrototype = Uint8ClampedArray && Uint8ClampedArray.prototype;\nvar TypedArray = Int8Array && getPrototypeOf(Int8Array);\nvar TypedArrayPrototype = Int8ArrayPrototype && getPrototypeOf(Int8ArrayPrototype);\nvar ObjectPrototype = Object.prototype;\nvar TypeError = global.TypeError;\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar TYPED_ARRAY_TAG = uid('TYPED_ARRAY_TAG');\nvar TYPED_ARRAY_CONSTRUCTOR = 'TypedArrayConstructor';\n// Fixing native typed arrays in Opera Presto crashes the browser, see #595\nvar NATIVE_ARRAY_BUFFER_VIEWS = NATIVE_ARRAY_BUFFER && !!setPrototypeOf && classof(global.opera) !== 'Opera';\nvar TYPED_ARRAY_TAG_REQUIRED = false;\nvar NAME, Constructor, Prototype;\n\nvar TypedArrayConstructorsList = {\n  Int8Array: 1,\n  Uint8Array: 1,\n  Uint8ClampedArray: 1,\n  Int16Array: 2,\n  Uint16Array: 2,\n  Int32Array: 4,\n  Uint32Array: 4,\n  Float32Array: 4,\n  Float64Array: 8\n};\n\nvar BigIntArrayConstructorsList = {\n  BigInt64Array: 8,\n  BigUint64Array: 8\n};\n\nvar isView = function isView(it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return klass === 'DataView'\n    || hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar getTypedArrayConstructor = function (it) {\n  var proto = getPrototypeOf(it);\n  if (!isObject(proto)) return;\n  var state = getInternalState(proto);\n  return (state && hasOwn(state, TYPED_ARRAY_CONSTRUCTOR)) ? state[TYPED_ARRAY_CONSTRUCTOR] : getTypedArrayConstructor(proto);\n};\n\nvar isTypedArray = function (it) {\n  if (!isObject(it)) return false;\n  var klass = classof(it);\n  return hasOwn(TypedArrayConstructorsList, klass)\n    || hasOwn(BigIntArrayConstructorsList, klass);\n};\n\nvar aTypedArray = function (it) {\n  if (isTypedArray(it)) return it;\n  throw TypeError('Target is not a typed array');\n};\n\nvar aTypedArrayConstructor = function (C) {\n  if (isCallable(C) && (!setPrototypeOf || isPrototypeOf(TypedArray, C))) return C;\n  throw TypeError(tryToString(C) + ' is not a typed array constructor');\n};\n\nvar exportTypedArrayMethod = function (KEY, property, forced, options) {\n  if (!DESCRIPTORS) return;\n  if (forced) for (var ARRAY in TypedArrayConstructorsList) {\n    var TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && hasOwn(TypedArrayConstructor.prototype, KEY)) try {\n      delete TypedArrayConstructor.prototype[KEY];\n    } catch (error) {\n      // old WebKit bug - some methods are non-configurable\n      try {\n        TypedArrayConstructor.prototype[KEY] = property;\n      } catch (error2) { /* empty */ }\n    }\n  }\n  if (!TypedArrayPrototype[KEY] || forced) {\n    defineBuiltIn(TypedArrayPrototype, KEY, forced ? property\n      : NATIVE_ARRAY_BUFFER_VIEWS && Int8ArrayPrototype[KEY] || property, options);\n  }\n};\n\nvar exportTypedArrayStaticMethod = function (KEY, property, forced) {\n  var ARRAY, TypedArrayConstructor;\n  if (!DESCRIPTORS) return;\n  if (setPrototypeOf) {\n    if (forced) for (ARRAY in TypedArrayConstructorsList) {\n      TypedArrayConstructor = global[ARRAY];\n      if (TypedArrayConstructor && hasOwn(TypedArrayConstructor, KEY)) try {\n        delete TypedArrayConstructor[KEY];\n      } catch (error) { /* empty */ }\n    }\n    if (!TypedArray[KEY] || forced) {\n      // V8 ~ Chrome 49-50 `%TypedArray%` methods are non-writable non-configurable\n      try {\n        return defineBuiltIn(TypedArray, KEY, forced ? property : NATIVE_ARRAY_BUFFER_VIEWS && TypedArray[KEY] || property);\n      } catch (error) { /* empty */ }\n    } else return;\n  }\n  for (ARRAY in TypedArrayConstructorsList) {\n    TypedArrayConstructor = global[ARRAY];\n    if (TypedArrayConstructor && (!TypedArrayConstructor[KEY] || forced)) {\n      defineBuiltIn(TypedArrayConstructor, KEY, property);\n    }\n  }\n};\n\nfor (NAME in TypedArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n  else NATIVE_ARRAY_BUFFER_VIEWS = false;\n}\n\nfor (NAME in BigIntArrayConstructorsList) {\n  Constructor = global[NAME];\n  Prototype = Constructor && Constructor.prototype;\n  if (Prototype) enforceInternalState(Prototype)[TYPED_ARRAY_CONSTRUCTOR] = Constructor;\n}\n\n// WebKit bug - typed arrays constructors prototype is Object.prototype\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !isCallable(TypedArray) || TypedArray === Function.prototype) {\n  // eslint-disable-next-line no-shadow -- safe\n  TypedArray = function TypedArray() {\n    throw TypeError('Incorrect invocation');\n  };\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME], TypedArray);\n  }\n}\n\nif (!NATIVE_ARRAY_BUFFER_VIEWS || !TypedArrayPrototype || TypedArrayPrototype === ObjectPrototype) {\n  TypedArrayPrototype = TypedArray.prototype;\n  if (NATIVE_ARRAY_BUFFER_VIEWS) for (NAME in TypedArrayConstructorsList) {\n    if (global[NAME]) setPrototypeOf(global[NAME].prototype, TypedArrayPrototype);\n  }\n}\n\n// WebKit bug - one more object in Uint8ClampedArray prototype chain\nif (NATIVE_ARRAY_BUFFER_VIEWS && getPrototypeOf(Uint8ClampedArrayPrototype) !== TypedArrayPrototype) {\n  setPrototypeOf(Uint8ClampedArrayPrototype, TypedArrayPrototype);\n}\n\nif (DESCRIPTORS && !hasOwn(TypedArrayPrototype, TO_STRING_TAG)) {\n  TYPED_ARRAY_TAG_REQUIRED = true;\n  defineProperty(TypedArrayPrototype, TO_STRING_TAG, { get: function () {\n    return isObject(this) ? this[TYPED_ARRAY_TAG] : undefined;\n  } });\n  for (NAME in TypedArrayConstructorsList) if (global[NAME]) {\n    createNonEnumerableProperty(global[NAME], TYPED_ARRAY_TAG, NAME);\n  }\n}\n\nmodule.exports = {\n  NATIVE_ARRAY_BUFFER_VIEWS: NATIVE_ARRAY_BUFFER_VIEWS,\n  TYPED_ARRAY_TAG: TYPED_ARRAY_TAG_REQUIRED && TYPED_ARRAY_TAG,\n  aTypedArray: aTypedArray,\n  aTypedArrayConstructor: aTypedArrayConstructor,\n  exportTypedArrayMethod: exportTypedArrayMethod,\n  exportTypedArrayStaticMethod: exportTypedArrayStaticMethod,\n  getTypedArrayConstructor: getTypedArrayConstructor,\n  isView: isView,\n  isTypedArray: isTypedArray,\n  TypedArray: TypedArray,\n  TypedArrayPrototype: TypedArrayPrototype\n};\n","var bind = require('../internals/function-bind-context');\nvar IndexedObject = require('../internals/indexed-object');\nvar toObject = require('../internals/to-object');\nvar lengthOfArrayLike = require('../internals/length-of-array-like');\n\n// `Array.prototype.{ findLast, findLastIndex }` methods implementation\nvar createMethod = function (TYPE) {\n  var IS_FIND_LAST_INDEX = TYPE == 1;\n  return function ($this, callbackfn, that) {\n    var O = toObject($this);\n    var self = IndexedObject(O);\n    var boundFunction = bind(callbackfn, that);\n    var index = lengthOfArrayLike(self);\n    var value, result;\n    while (index-- > 0) {\n      value = self[index];\n      result = boundFunction(value, index, O);\n      if (result) switch (TYPE) {\n        case 0: return value; // findLast\n        case 1: return index; // findLastIndex\n      }\n    }\n    return IS_FIND_LAST_INDEX ? -1 : undefined;\n  };\n};\n\nmodule.exports = {\n  // `Array.prototype.findLast` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLast: createMethod(0),\n  // `Array.prototype.findLastIndex` method\n  // https://github.com/tc39/proposal-array-find-from-last\n  findLastIndex: createMethod(1)\n};\n","var TO_STRING_TAG_SUPPORT = require('../internals/to-string-tag-support');\nvar isCallable = require('../internals/is-callable');\nvar classofRaw = require('../internals/classof-raw');\nvar wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar $Object = Object;\n\n// ES3 wrong here\nvar CORRECT_ARGUMENTS = classofRaw(function () { return arguments; }()) == 'Arguments';\n\n// fallback for IE11 Script Access Denied error\nvar tryGet = function (it, key) {\n  try {\n    return it[key];\n  } catch (error) { /* empty */ }\n};\n\n// getting tag from ES6+ `Object.prototype.toString`\nmodule.exports = TO_STRING_TAG_SUPPORT ? classofRaw : function (it) {\n  var O, tag, result;\n  return it === undefined ? 'Undefined' : it === null ? 'Null'\n    // @@toStringTag case\n    : typeof (tag = tryGet(O = $Object(it), TO_STRING_TAG)) == 'string' ? tag\n    // builtinTag case\n    : CORRECT_ARGUMENTS ? classofRaw(O)\n    // ES3 arguments fallback\n    : (result = classofRaw(O)) == 'Object' && isCallable(O.callee) ? 'Arguments' : result;\n};\n","var fails = require('../internals/fails');\n\nmodule.exports = !fails(function () {\n  function F() { /* empty */ }\n  F.prototype.constructor = null;\n  // eslint-disable-next-line es/no-object-getprototypeof -- required for testing\n  return Object.getPrototypeOf(new F()) !== F.prototype;\n});\n","var uncurryThis = require('../internals/function-uncurry-this');\nvar aCallable = require('../internals/a-callable');\nvar NATIVE_BIND = require('../internals/function-bind-native');\n\nvar bind = uncurryThis(uncurryThis.bind);\n\n// optional / simple context binding\nmodule.exports = function (fn, that) {\n  aCallable(fn);\n  return that === undefined ? fn : NATIVE_BIND ? bind(fn, that) : function (/* ...args */) {\n    return fn.apply(that, arguments);\n  };\n};\n","var hasOwn = require('../internals/has-own-property');\nvar isCallable = require('../internals/is-callable');\nvar toObject = require('../internals/to-object');\nvar sharedKey = require('../internals/shared-key');\nvar CORRECT_PROTOTYPE_GETTER = require('../internals/correct-prototype-getter');\n\nvar IE_PROTO = sharedKey('IE_PROTO');\nvar $Object = Object;\nvar ObjectPrototype = $Object.prototype;\n\n// `Object.getPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.getprototypeof\n// eslint-disable-next-line es/no-object-getprototypeof -- safe\nmodule.exports = CORRECT_PROTOTYPE_GETTER ? $Object.getPrototypeOf : function (O) {\n  var object = toObject(O);\n  if (hasOwn(object, IE_PROTO)) return object[IE_PROTO];\n  var constructor = object.constructor;\n  if (isCallable(constructor) && object instanceof constructor) {\n    return constructor.prototype;\n  } return object instanceof $Object ? ObjectPrototype : null;\n};\n","/* eslint-disable no-proto -- safe */\nvar uncurryThis = require('../internals/function-uncurry-this');\nvar anObject = require('../internals/an-object');\nvar aPossiblePrototype = require('../internals/a-possible-prototype');\n\n// `Object.setPrototypeOf` method\n// https://tc39.es/ecma262/#sec-object.setprototypeof\n// Works with __proto__ only. Old v8 can't work with null proto objects.\n// eslint-disable-next-line es/no-object-setprototypeof -- safe\nmodule.exports = Object.setPrototypeOf || ('__proto__' in {} ? function () {\n  var CORRECT_SETTER = false;\n  var test = {};\n  var setter;\n  try {\n    // eslint-disable-next-line es/no-object-getownpropertydescriptor -- safe\n    setter = uncurryThis(Object.getOwnPropertyDescriptor(Object.prototype, '__proto__').set);\n    setter(test, []);\n    CORRECT_SETTER = test instanceof Array;\n  } catch (error) { /* empty */ }\n  return function setPrototypeOf(O, proto) {\n    anObject(O);\n    aPossiblePrototype(proto);\n    if (CORRECT_SETTER) setter(O, proto);\n    else O.__proto__ = proto;\n    return O;\n  };\n}() : undefined);\n","var wellKnownSymbol = require('../internals/well-known-symbol');\n\nvar TO_STRING_TAG = wellKnownSymbol('toStringTag');\nvar test = {};\n\ntest[TO_STRING_TAG] = 'z';\n\nmodule.exports = String(test) === '[object z]';\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLastIndex = require('../internals/array-iteration-from-last').findLastIndex;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLastIndex` method\n// https://github.com/tc39/proposal-array-find-from-last\nexportTypedArrayMethod('findLastIndex', function findLastIndex(predicate /* , thisArg */) {\n  return $findLastIndex(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","'use strict';\nvar ArrayBufferViewCore = require('../internals/array-buffer-view-core');\nvar $findLast = require('../internals/array-iteration-from-last').findLast;\n\nvar aTypedArray = ArrayBufferViewCore.aTypedArray;\nvar exportTypedArrayMethod = ArrayBufferViewCore.exportTypedArrayMethod;\n\n// `%TypedArray%.prototype.findLast` method\n// https://github.com/tc39/proposal-array-find-from-last\nexportTypedArrayMethod('findLast', function findLast(predicate /* , thisArg */) {\n  return $findLast(aTypedArray(this), predicate, arguments.length > 1 ? arguments[1] : undefined);\n});\n","/**\n * Extend function\n * ================\n *\n * Function used to push a bunch of values into an array at once.\n *\n * Its strategy is to mutate target array's length then setting the new indices\n * to be the values to add.\n *\n * A benchmark proved that it is faster than the following strategies:\n *   1) `array.push.apply(array, values)`.\n *   2) A loop of pushes.\n *   3) `array = array.concat(values)`, obviously.\n *\n * Intuitively, this is correct because when adding a lot of elements, the\n * chosen strategies does not need to handle the `arguments` object to\n * execute #.apply's variadicity and because the array know its final length\n * at the beginning, avoiding potential multiple reallocations of the underlying\n * contiguous array. Some engines may be able to optimize the loop of push\n * operations but empirically they don't seem to do so.\n */\n\n/**\n * Extends the target array with the given values.\n *\n * @param  {array} array  - Target array.\n * @param  {array} values - Values to add.\n */\nmodule.exports = function extend(array, values) {\n  var l2 = values.length;\n\n  if (l2 === 0)\n    return;\n\n  var l1 = array.length;\n\n  array.length += l2;\n\n  for (var i = 0; i < l2; i++)\n    array[l1 + i] = values[i];\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Graphology Force Layout Defaults\n * =================================\n *\n * Default options & settings used by the library.\n */\nmodule.exports = {\n  nodeXAttribute: 'x',\n  nodeYAttribute: 'y',\n  isNodeFixed: 'fixed',\n  shouldSkipNode: null,\n  shouldSkipEdge: null,\n  settings: {\n    attraction: 0.0005,\n    repulsion: 0.1,\n    gravity: 0.0001,\n    inertia: 0.6,\n    maxMove: 200\n  }\n};\n","/**\n * Graphology Force Layout Helpers\n * ================================\n *\n * Miscellaneous helper functions related to the force layout.\n */\nexports.assignLayoutChanges = function (graph, nodeStates, params) {\n  const {nodeXAttribute: x, nodeYAttribute: y} = params;\n\n  graph.updateEachNodeAttributes(\n    (n, attr) => {\n      const state = nodeStates[n];\n\n      if (!state || state.fixed) return attr;\n\n      attr[x] = state.x;\n      attr[y] = state.y;\n\n      return attr;\n    },\n    {attributes: ['x', 'y']}\n  );\n};\n\nexports.collectLayoutChanges = function (nodeStates) {\n  const mapping = {};\n\n  for (const n in nodeStates) {\n    const state = nodeStates[n];\n\n    mapping[n] = {x: state.x, y: state.y};\n  }\n\n  return mapping;\n};\n","/**\n * Graphology Force Layout Iteration\n * ==================================\n *\n * Function describing a single iteration of the force layout.\n */\nconst {\n  createNodeValueGetter,\n  createEdgeValueGetter\n} = require('graphology-utils/getters');\n\n// const EPSILON = -Infinity;\n\n// function isVeryCloseToZero(x) {\n//   return Math.abs(x) < EPSILON;\n// }\n\nmodule.exports = function iterate(graph, nodeStates, params) {\n  const {nodeXAttribute: xKey, nodeYAttribute: yKey} = params;\n  const {attraction, repulsion, gravity, inertia, maxMove} = params.settings;\n\n  let {shouldSkipNode, shouldSkipEdge, isNodeFixed} = params;\n\n  isNodeFixed = createNodeValueGetter(isNodeFixed);\n  shouldSkipNode = createNodeValueGetter(shouldSkipNode, false);\n  shouldSkipEdge = createEdgeValueGetter(shouldSkipEdge, false);\n\n  const nodes = graph.filterNodes((n, attr) => {\n    return !shouldSkipNode.fromEntry(n, attr);\n  });\n\n  const adjustedOrder = nodes.length;\n\n  // Check nodeStatess and inertia\n  for (let i = 0; i < adjustedOrder; i++) {\n    const n = nodes[i];\n    const attr = graph.getNodeAttributes(n);\n    const nodeState = nodeStates[n];\n\n    if (!nodeState)\n      nodeStates[n] = {\n        dx: 0,\n        dy: 0,\n        x: attr[xKey] || 0,\n        y: attr[yKey] || 0\n      };\n    else\n      nodeStates[n] = {\n        dx: nodeState.dx * inertia,\n        dy: nodeState.dy * inertia,\n        x: attr[xKey] || 0,\n        y: attr[yKey] || 0\n      };\n  }\n\n  // Repulsion\n  if (repulsion)\n    for (let i = 0; i < adjustedOrder; i++) {\n      const n1 = nodes[i];\n      const n1State = nodeStates[n1];\n\n      for (let j = i + 1; j < adjustedOrder; j++) {\n        const n2 = nodes[j];\n        const n2State = nodeStates[n2];\n\n        // Compute distance:\n        const dx = n2State.x - n1State.x;\n        const dy = n2State.y - n1State.y;\n        const distance = Math.sqrt(dx * dx + dy * dy) || 1;\n\n        // Repulse nodes relatively to 1 / distance:\n        const repulsionX = (repulsion / distance) * dx;\n        const repulsionY = (repulsion / distance) * dy;\n        n1State.dx -= repulsionX;\n        n1State.dy -= repulsionY;\n        n2State.dx += repulsionX;\n        n2State.dy += repulsionY;\n      }\n    }\n\n  // Attraction\n  if (attraction)\n    graph.forEachEdge(\n      (edge, attr, source, target, sourceAttr, targetAttr, undirected) => {\n        if (source === target) return;\n\n        if (\n          shouldSkipNode.fromEntry(source, sourceAttr) ||\n          shouldSkipNode.fromEntry(target, targetAttr)\n        )\n          return;\n\n        if (\n          shouldSkipEdge.fromEntry(\n            edge,\n            attr,\n            source,\n            target,\n            sourceAttr,\n            targetAttr,\n            undirected\n          )\n        )\n          return;\n\n        const n1State = nodeStates[source];\n        const n2State = nodeStates[target];\n\n        // Compute distance:\n        const dx = n2State.x - n1State.x;\n        const dy = n2State.y - n1State.y;\n\n        const distance = Math.sqrt(dx * dx + dy * dy) || 1;\n\n        // Attract nodes relatively to their distance:\n        const attractionX = attraction * distance * dx;\n        const attractionY = attraction * distance * dy;\n        n1State.dx += attractionX;\n        n1State.dy += attractionY;\n        n2State.dx -= attractionX;\n        n2State.dy -= attractionY;\n      }\n    );\n\n  // Gravity\n  if (gravity)\n    for (let i = 0; i < adjustedOrder; i++) {\n      const n = nodes[i];\n      const nodeState = nodeStates[n];\n\n      // Attract nodes to [0, 0] relatively to the distance:\n      const {x, y} = nodeState;\n      const distance = Math.sqrt(x * x + y * y) || 1;\n      nodeStates[n].dx -= x * gravity * distance;\n      nodeStates[n].dy -= y * gravity * distance;\n    }\n\n  // Apply forces\n  const converged = false;\n\n  for (let i = 0; i < adjustedOrder; i++) {\n    const n = nodes[i];\n    const nodeState = nodeStates[n];\n\n    const distance = Math.sqrt(\n      nodeState.dx * nodeState.dx + nodeState.dy * nodeState.dy\n    );\n\n    if (distance > maxMove) {\n      nodeState.dx *= maxMove / distance;\n      nodeState.dy *= maxMove / distance;\n    }\n\n    // if (!isVeryCloseToZero(nodeState.dx) || !isVeryCloseToZero(nodeState.dy)) {\n    //   converged = false;\n    // }\n\n    if (!isNodeFixed.fromGraph(graph, n)) {\n      nodeState.x += nodeState.dx;\n      nodeState.y += nodeState.dy;\n      nodeState.fixed = false;\n    } else {\n      nodeState.fixed = true;\n    }\n\n    // NOTE: possibility to assign here to save one loop in the future\n  }\n\n  return {converged};\n};\n","/**\n * Graphology Force Layout Worker\n * ===============================\n *\n * A worker made for running a force layout live.\n *\n * Note that it does not run in a webworker yet but respect animation frames.\n */\nconst isGraph = require('graphology-utils/is-graph');\nconst resolveDefaults = require('graphology-utils/defaults');\n\nconst iterate = require('./iterate.js');\nconst helpers = require('./helpers.js');\nconst DEFAULTS = require('./defaults.js');\n\nfunction ForceSupervisor(graph, params) {\n  // Validation\n  if (!isGraph(graph))\n    throw new Error(\n      'graphology-layout-force/worker: the given graph is not a valid graphology instance.'\n    );\n\n  params = resolveDefaults(params, DEFAULTS);\n\n  this.callbacks = {};\n\n  if (params.onConverged) this.callbacks.onConverged = params.onConverged;\n\n  this.graph = graph;\n  this.params = params;\n  this.nodeStates = {};\n  this.frameID = null;\n  this.running = false;\n  this.killed = false;\n\n  // TODO: hook listeners on graph to listen to dropNode, dropEdge, clear, clearEdges\n}\n\nForceSupervisor.prototype.isRunning = function () {\n  return this.running;\n};\n\nForceSupervisor.prototype.runFrame = function () {\n  let {converged} = iterate(this.graph, this.nodeStates, this.params);\n\n  helpers.assignLayoutChanges(this.graph, this.nodeStates, this.params);\n\n  // TODO: figure out convergence\n  converged = false;\n\n  if (converged) {\n    if (this.callbacks.onConverged) this.callbacks.onConverged();\n    this.stop();\n  } else {\n    this.frameID = window.requestAnimationFrame(() => this.runFrame());\n  }\n};\n\nForceSupervisor.prototype.stop = function () {\n  this.running = false;\n\n  if (this.frameID !== null) {\n    window.cancelAnimationFrame(this.frameID);\n    this.frameID = null;\n  }\n\n  return this;\n};\n\nForceSupervisor.prototype.start = function () {\n  if (this.killed)\n    throw new Error('graphology-layout-force/worker.start: layout was killed.');\n\n  if (this.running) return;\n\n  this.running = true;\n  this.runFrame();\n};\n\nForceSupervisor.prototype.kill = function () {\n  this.stop();\n  delete this.nodeStates;\n  this.killed = true;\n\n  // TODO: cleanup events\n};\n\nmodule.exports = ForceSupervisor;\n","/**\n * Graphology Defaults\n * ====================\n *\n * Helper function used throughout the standard lib to resolve defaults.\n */\nfunction isLeaf(o) {\n  return (\n    !o ||\n    typeof o !== 'object' ||\n    typeof o === 'function' ||\n    Array.isArray(o) ||\n    o instanceof Set ||\n    o instanceof Map ||\n    o instanceof RegExp ||\n    o instanceof Date\n  );\n}\n\nfunction resolveDefaults(target, defaults) {\n  target = target || {};\n\n  var output = {};\n\n  for (var k in defaults) {\n    var existing = target[k];\n    var def = defaults[k];\n\n    // Recursion\n    if (!isLeaf(def)) {\n      output[k] = resolveDefaults(existing, def);\n\n      continue;\n    }\n\n    // Leaf\n    if (existing === undefined) {\n      output[k] = def;\n    } else {\n      output[k] = existing;\n    }\n  }\n\n  return output;\n}\n\nmodule.exports = resolveDefaults;\n","/**\n * Graphology Weight Getter\n * =========================\n *\n * Function creating weight getters.\n */\nfunction coerceWeight(value) {\n  // Ensuring target value is a correct number\n  if (typeof value !== 'number' || isNaN(value)) return 1;\n\n  return value;\n}\n\nfunction createNodeValueGetter(nameOrFunction, defaultValue) {\n  var getter = {};\n\n  var coerceToDefault = function (v) {\n    if (typeof v === 'undefined') return defaultValue;\n\n    return v;\n  };\n\n  if (typeof defaultValue === 'function') coerceToDefault = defaultValue;\n\n  var get = function (attributes) {\n    return coerceToDefault(attributes[nameOrFunction]);\n  };\n\n  var returnDefault = function () {\n    return coerceToDefault(undefined);\n  };\n\n  if (typeof nameOrFunction === 'string') {\n    getter.fromAttributes = get;\n    getter.fromGraph = function (graph, node) {\n      return get(graph.getNodeAttributes(node));\n    };\n    getter.fromEntry = function (node, attributes) {\n      return get(attributes);\n    };\n  } else if (typeof nameOrFunction === 'function') {\n    getter.fromAttributes = function () {\n      throw new Error(\n        'graphology-utils/getters/createNodeValueGetter: irrelevant usage.'\n      );\n    };\n    getter.fromGraph = function (graph, node) {\n      return coerceToDefault(\n        nameOrFunction(node, graph.getNodeAttributes(node))\n      );\n    };\n    getter.fromEntry = function (node, attributes) {\n      return coerceToDefault(nameOrFunction(node, attributes));\n    };\n  } else {\n    getter.fromAttributes = returnDefault;\n    getter.fromGraph = returnDefault;\n    getter.fromEntry = returnDefault;\n  }\n\n  return getter;\n}\n\nfunction createEdgeValueGetter(nameOrFunction, defaultValue) {\n  var getter = {};\n\n  var coerceToDefault = function (v) {\n    if (typeof v === 'undefined') return defaultValue;\n\n    return v;\n  };\n\n  if (typeof defaultValue === 'function') coerceToDefault = defaultValue;\n\n  var get = function (attributes) {\n    return coerceToDefault(attributes[nameOrFunction]);\n  };\n\n  var returnDefault = function () {\n    return coerceToDefault(undefined);\n  };\n\n  if (typeof nameOrFunction === 'string') {\n    getter.fromAttributes = get;\n    getter.fromGraph = function (graph, edge) {\n      return get(graph.getEdgeAttributes(edge));\n    };\n    getter.fromEntry = function (edge, attributes) {\n      return get(attributes);\n    };\n    getter.fromPartialEntry = getter.fromEntry;\n    getter.fromMinimalEntry = getter.fromEntry;\n  } else if (typeof nameOrFunction === 'function') {\n    getter.fromAttributes = function () {\n      throw new Error(\n        'graphology-utils/getters/createEdgeValueGetter: irrelevant usage.'\n      );\n    };\n    getter.fromGraph = function (graph, edge) {\n      // TODO: we can do better, check #310\n      var extremities = graph.extremities(edge);\n      return coerceToDefault(\n        nameOrFunction(\n          edge,\n          graph.getEdgeAttributes(edge),\n          extremities[0],\n          extremities[1],\n          graph.getNodeAttributes(extremities[0]),\n          graph.getNodeAttributes(extremities[1]),\n          graph.isUndirected(edge)\n        )\n      );\n    };\n    getter.fromEntry = function (e, a, s, t, sa, ta, u) {\n      return coerceToDefault(nameOrFunction(e, a, s, t, sa, ta, u));\n    };\n    getter.fromPartialEntry = function (e, a, s, t) {\n      return coerceToDefault(nameOrFunction(e, a, s, t));\n    };\n    getter.fromMinimalEntry = function (e, a) {\n      return coerceToDefault(nameOrFunction(e, a));\n    };\n  } else {\n    getter.fromAttributes = returnDefault;\n    getter.fromGraph = returnDefault;\n    getter.fromEntry = returnDefault;\n    getter.fromMinimalEntry = returnDefault;\n  }\n\n  return getter;\n}\n\nexports.createNodeValueGetter = createNodeValueGetter;\nexports.createEdgeValueGetter = createEdgeValueGetter;\nexports.createEdgeWeightGetter = function (name) {\n  return createEdgeValueGetter(name, coerceWeight);\n};\n","/**\n * Graphology isGraph\n * ===================\n *\n * Very simple function aiming at ensuring the given variable is a\n * graphology instance.\n */\n\n/**\n * Checking the value is a graphology instance.\n *\n * @param  {any}     value - Target value.\n * @return {boolean}\n */\nmodule.exports = function isGraph(value) {\n  return (\n    value !== null &&\n    typeof value === 'object' &&\n    typeof value.addUndirectedEdgeWithKey === 'function' &&\n    typeof value.dropNode === 'function' &&\n    typeof value.multi === 'boolean'\n  );\n};\n","/**\n * Graphology Utilities\n * =====================\n *\n * Collection of helpful functions used by the implementation.\n */\n\n/**\n * Object.assign-like polyfill.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignPolyfill() {\n  const target = arguments[0];\n\n  for (let i = 1, l = arguments.length; i < l; i++) {\n    if (!arguments[i]) continue;\n\n    for (const k in arguments[i]) target[k] = arguments[i][k];\n  }\n\n  return target;\n}\n\nlet assign = assignPolyfill;\n\nif (typeof Object.assign === 'function') assign = Object.assign;\n\nexport {assign};\n\n/**\n * Function returning the first matching edge for given path.\n * Note: this function does not check the existence of source & target. This\n * must be performed by the caller.\n *\n * @param  {Graph}  graph  - Target graph.\n * @param  {any}    source - Source node.\n * @param  {any}    target - Target node.\n * @param  {string} type   - Type of the edge (mixed, directed or undirected).\n * @return {string|null}\n */\nexport function getMatchingEdge(graph, source, target, type) {\n  const sourceData = graph._nodes.get(source);\n\n  let edge = null;\n\n  if (!sourceData) return edge;\n\n  if (type === 'mixed') {\n    edge =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]);\n  } else if (type === 'directed') {\n    edge = sourceData.out && sourceData.out[target];\n  } else {\n    edge = sourceData.undirected && sourceData.undirected[target];\n  }\n\n  return edge;\n}\n\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\nexport function isPlainObject(value) {\n  return (\n    typeof value === 'object' && value !== null && value.constructor === Object\n  );\n}\n\n/**\n * Checks whether the given object is empty.\n *\n * @param  {object}  o - Target Object.\n * @return {boolean}\n */\nexport function isEmpty(o) {\n  let k;\n\n  for (k in o) return false;\n\n  return true;\n}\n\n/**\n * Creates a \"private\" property for the given member name by concealing it\n * using the `enumerable` option.\n *\n * @param {object} target - Target object.\n * @param {string} name   - Member name.\n */\nexport function privateProperty(target, name, value) {\n  Object.defineProperty(target, name, {\n    enumerable: false,\n    configurable: false,\n    writable: true,\n    value\n  });\n}\n\n/**\n * Creates a read-only property for the given member name & the given getter.\n *\n * @param {object}   target - Target object.\n * @param {string}   name   - Member name.\n * @param {mixed}    value  - The attached getter or fixed value.\n */\nexport function readOnlyProperty(target, name, value) {\n  const descriptor = {\n    enumerable: true,\n    configurable: true\n  };\n\n  if (typeof value === 'function') {\n    descriptor.get = value;\n  } else {\n    descriptor.value = value;\n    descriptor.writable = false;\n  }\n\n  Object.defineProperty(target, name, descriptor);\n}\n\n/**\n * Returns whether the given object constitute valid hints.\n *\n * @param {object} hints - Target object.\n */\nexport function validateHints(hints) {\n  if (!isPlainObject(hints)) return false;\n\n  if (hints.attributes && !Array.isArray(hints.attributes)) return false;\n\n  return true;\n}\n\n/**\n * Creates a function generating incremental ids for edges.\n *\n * @return {function}\n */\nexport function incrementalIdStartingFromRandomByte() {\n  let i = Math.floor(Math.random() * 256) & 0xff;\n\n  return () => {\n    return i++;\n  };\n}\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Obliterator Iterator Class\n * ===========================\n *\n * Simple class representing the library's iterators.\n */\n\n/**\n * Iterator class.\n *\n * @constructor\n * @param {function} next - Next function.\n */\nfunction Iterator(next) {\n  if (typeof next !== 'function')\n    throw new Error('obliterator/iterator: expecting a function!');\n\n  this.next = next;\n}\n\n/**\n * If symbols are supported, we add `next` to `Symbol.iterator`.\n */\nif (typeof Symbol !== 'undefined')\n  Iterator.prototype[Symbol.iterator] = function () {\n    return this;\n  };\n\n/**\n * Returning an iterator of the given values.\n *\n * @param  {any...} values - Values.\n * @return {Iterator}\n */\nIterator.of = function () {\n  var args = arguments,\n    l = args.length,\n    i = 0;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: args[i++]};\n  });\n};\n\n/**\n * Returning an empty iterator.\n *\n * @return {Iterator}\n */\nIterator.empty = function () {\n  var iterator = new Iterator(function () {\n    return {done: true};\n  });\n\n  return iterator;\n};\n\n/**\n * Returning an iterator over the given indexed sequence.\n *\n * @param  {string|Array} sequence - Target sequence.\n * @return {Iterator}\n */\nIterator.fromSequence = function (sequence) {\n  var i = 0,\n    l = sequence.length;\n\n  return new Iterator(function () {\n    if (i >= l) return {done: true};\n\n    return {done: false, value: sequence[i++]};\n  });\n};\n\n/**\n * Returning whether the given value is an iterator.\n *\n * @param  {any} value - Value.\n * @return {boolean}\n */\nIterator.is = function (value) {\n  if (value instanceof Iterator) return true;\n\n  return (\n    typeof value === 'object' &&\n    value !== null &&\n    typeof value.next === 'function'\n  );\n};\n\n/**\n * Exporting.\n */\nmodule.exports = Iterator;\n","exports.ARRAY_BUFFER_SUPPORT = typeof ArrayBuffer !== 'undefined';\nexports.SYMBOL_SUPPORT = typeof Symbol !== 'undefined';\n","/**\n * Obliterator Iter Function\n * ==========================\n *\n * Function coercing values to an iterator. It can be quite useful when needing\n * to handle iterables and iterators the same way.\n */\nvar Iterator = require('./iterator.js');\nvar support = require('./support.js');\n\nvar ARRAY_BUFFER_SUPPORT = support.ARRAY_BUFFER_SUPPORT;\nvar SYMBOL_SUPPORT = support.SYMBOL_SUPPORT;\n\nfunction iterOrNull(target) {\n  // Indexed sequence\n  if (\n    typeof target === 'string' ||\n    Array.isArray(target) ||\n    (ARRAY_BUFFER_SUPPORT && ArrayBuffer.isView(target))\n  )\n    return Iterator.fromSequence(target);\n\n  // Invalid value\n  if (typeof target !== 'object' || target === null) return null;\n\n  // Iterable\n  if (SYMBOL_SUPPORT && typeof target[Symbol.iterator] === 'function')\n    return target[Symbol.iterator]();\n\n  // Iterator duck-typing\n  if (typeof target.next === 'function') return target;\n\n  // Invalid object\n  return null;\n}\n\nmodule.exports = function iter(target) {\n  var iterator = iterOrNull(target);\n\n  if (!iterator)\n    throw new Error(\n      'obliterator: target is not iterable nor a valid iterator.'\n    );\n\n  return iterator;\n};\n","/* eslint no-constant-condition: 0 */\n/**\n * Obliterator Take Function\n * ==========================\n *\n * Function taking n or every value of the given iterator and returns them\n * into an array.\n */\nvar iter = require('./iter.js');\n\n/**\n * Take.\n *\n * @param  {Iterable} iterable - Target iterable.\n * @param  {number}   [n]      - Optional number of items to take.\n * @return {array}\n */\nmodule.exports = function take(iterable, n) {\n  var l = arguments.length > 1 ? n : Infinity,\n    array = l !== Infinity ? new Array(l) : [],\n    step,\n    i = 0;\n\n  var iterator = iter(iterable);\n\n  while (true) {\n    if (i === l) return array;\n\n    step = iterator.next();\n\n    if (step.done) {\n      if (i !== n) array.length = i;\n\n      return array;\n    }\n\n    array[i++] = step.value;\n  }\n};\n","/**\n * Graphology Custom Errors\n * =========================\n *\n * Defining custom errors for ease of use & easy unit tests across\n * implementations (normalized typology rather than relying on error\n * messages to check whether the correct error was found).\n */\nexport class GraphError extends Error {\n  constructor(message) {\n    super();\n    this.name = 'GraphError';\n    this.message = message;\n  }\n}\n\nexport class InvalidArgumentsGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'InvalidArgumentsGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(\n        this,\n        InvalidArgumentsGraphError.prototype.constructor\n      );\n  }\n}\n\nexport class NotFoundGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'NotFoundGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, NotFoundGraphError.prototype.constructor);\n  }\n}\n\nexport class UsageGraphError extends GraphError {\n  constructor(message) {\n    super(message);\n    this.name = 'UsageGraphError';\n\n    // This is V8 specific to enhance stack readability\n    if (typeof Error.captureStackTrace === 'function')\n      Error.captureStackTrace(this, UsageGraphError.prototype.constructor);\n  }\n}\n","/**\n * Graphology Internal Data Classes\n * =================================\n *\n * Internal classes hopefully reduced to structs by engines & storing\n * necessary information for nodes & edges.\n *\n * Note that those classes don't rely on the `class` keyword to avoid some\n * cruft introduced by most of ES2015 transpilers.\n */\n\n/**\n * MixedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function MixedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nMixedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n  this.undirectedDegree = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n  this.undirected = {};\n};\n\n/**\n * DirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function DirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nDirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.inDegree = 0;\n  this.outDegree = 0;\n\n  // Indices\n  this.in = {};\n  this.out = {};\n};\n\n/**\n * UndirectedNodeData class.\n *\n * @constructor\n * @param {string} string     - The node's key.\n * @param {object} attributes - Node's attributes.\n */\nexport function UndirectedNodeData(key, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n\n  this.clear();\n}\n\nUndirectedNodeData.prototype.clear = function () {\n  // Degrees\n  this.undirectedDegree = 0;\n\n  // Indices\n  this.undirected = {};\n};\n\n/**\n * EdgeData class.\n *\n * @constructor\n * @param {boolean} undirected   - Whether the edge is undirected.\n * @param {string}  string       - The edge's key.\n * @param {string}  source       - Source of the edge.\n * @param {string}  target       - Target of the edge.\n * @param {object}  attributes   - Edge's attributes.\n */\nexport function EdgeData(undirected, key, source, target, attributes) {\n  // Attributes\n  this.key = key;\n  this.attributes = attributes;\n  this.undirected = undirected;\n\n  // Extremities\n  this.source = source;\n  this.target = target;\n}\n\nEdgeData.prototype.attach = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  // Handling source\n  this.source[outKey][target] = this;\n\n  if (this.undirected && source === target) return;\n\n  // Handling target\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.attachMulti = function () {\n  let outKey = 'out';\n  let inKey = 'in';\n\n  const source = this.source.key;\n  const target = this.target.key;\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Handling source\n  const adj = this.source[outKey];\n  const head = adj[target];\n\n  if (typeof head === 'undefined') {\n    adj[target] = this;\n\n    // Self-loop optimization\n    if (!(this.undirected && source === target)) {\n      // Handling target\n      this.target[inKey][source] = this;\n    }\n\n    return;\n  }\n\n  // Prepending to doubly-linked list\n  head.previous = this;\n  this.next = head;\n\n  // Pointing to new head\n  // NOTE: use mutating swap later to avoid lookup?\n  adj[target] = this;\n  this.target[inKey][source] = this;\n};\n\nEdgeData.prototype.detach = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  delete this.source[outKey][target];\n\n  // No-op delete in case of undirected self-loop\n  delete this.target[inKey][source];\n};\n\nEdgeData.prototype.detachMulti = function () {\n  const source = this.source.key;\n  const target = this.target.key;\n\n  let outKey = 'out';\n  let inKey = 'in';\n\n  if (this.undirected) outKey = inKey = 'undirected';\n\n  // Deleting from doubly-linked list\n  if (this.previous === undefined) {\n    // We are dealing with the head\n\n    // Should we delete the adjacency entry because it is now empty?\n    if (this.next === undefined) {\n      delete this.source[outKey][target];\n\n      // No-op delete in case of undirected self-loop\n      delete this.target[inKey][source];\n    } else {\n      // Detaching\n      this.next.previous = undefined;\n\n      // NOTE: could avoid the lookups by creating a #.become mutating method\n      this.source[outKey][target] = this.next;\n\n      // No-op delete in case of undirected self-loop\n      this.target[inKey][source] = this.next;\n    }\n  } else {\n    // We are dealing with another list node\n    this.previous.next = this.next;\n\n    // If not last\n    if (this.next !== undefined) {\n      this.next.previous = this.previous;\n    }\n  }\n};\n","/**\n * Graphology Node Attributes methods\n * ===================================\n */\nimport {assign, isPlainObject} from '../utils';\n\nimport {InvalidArgumentsGraphError, NotFoundGraphError} from '../errors';\n\nconst NODE = 0;\nconst SOURCE = 1;\nconst TARGET = 2;\nconst OPPOSITE = 3;\n\nfunction findRelevantNodeData(\n  graph,\n  method,\n  mode,\n  nodeOrEdge,\n  nameOrEdge,\n  add1,\n  add2\n) {\n  let nodeData, edgeData, arg1, arg2;\n\n  nodeOrEdge = '' + nodeOrEdge;\n\n  if (mode === NODE) {\n    nodeData = graph._nodes.get(nodeOrEdge);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" node in the graph.`\n      );\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  } else if (mode === OPPOSITE) {\n    nameOrEdge = '' + nameOrEdge;\n\n    edgeData = graph._edges.get(nameOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nameOrEdge}\" edge in the graph.`\n      );\n\n    const source = edgeData.source.key;\n    const target = edgeData.target.key;\n\n    if (nodeOrEdge === source) {\n      nodeData = edgeData.target;\n    } else if (nodeOrEdge === target) {\n      nodeData = edgeData.source;\n    } else {\n      throw new NotFoundGraphError(\n        `Graph.${method}: the \"${nodeOrEdge}\" node is not attached to the \"${nameOrEdge}\" edge (${source}, ${target}).`\n      );\n    }\n\n    arg1 = add1;\n    arg2 = add2;\n  } else {\n    edgeData = graph._edges.get(nodeOrEdge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.${method}: could not find the \"${nodeOrEdge}\" edge in the graph.`\n      );\n\n    if (mode === SOURCE) {\n      nodeData = edgeData.source;\n    } else {\n      nodeData = edgeData.target;\n    }\n\n    arg1 = nameOrEdge;\n    arg2 = add1;\n  }\n\n  return [nodeData, arg1, arg2];\n}\n\nfunction attachNodeAttributeGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes[name];\n  };\n}\n\nfunction attachNodeAttributesGetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge) {\n    const [data] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge\n    );\n\n    return data.attributes;\n  };\n}\n\nfunction attachNodeAttributeChecker(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\nfunction attachNodeAttributeSetter(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, value] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1, add2) {\n    const [data, name, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1,\n      add2\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    const attributes = data.attributes;\n    const value = updater(attributes[name]);\n\n    attributes[name] = value;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributeRemover(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, name] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesReplacer(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesMerger(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, attributes] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\nfunction attachNodeAttributesUpdater(Class, method, mode) {\n  Class.prototype[method] = function (nodeOrEdge, nameOrEdge, add1) {\n    const [data, updater] = findRelevantNodeData(\n      this,\n      method,\n      mode,\n      nodeOrEdge,\n      nameOrEdge,\n      add1\n    );\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('nodeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst NODE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachNodeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachNodeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachNodeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachNodeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachNodeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachNodeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachNodeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachNodeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachNodeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nexport default function attachNodeAttributesMethods(Graph) {\n  NODE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For nodes\n    attacher(Graph, name('Node'), NODE);\n\n    // For sources\n    attacher(Graph, name('Source'), SOURCE);\n\n    // For targets\n    attacher(Graph, name('Target'), TARGET);\n\n    // For opposites\n    attacher(Graph, name('Opposite'), OPPOSITE);\n  });\n}\n","/**\n * Graphology Edge Attributes methods\n * ===================================\n */\nimport {assign, isPlainObject, getMatchingEdge} from '../utils';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from '../errors';\n\n/**\n * Attach an attribute getter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeGetter(Class, method, type) {\n  /**\n   * Get the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {mixed}          - The attribute's value.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes[name];\n  };\n}\n\n/**\n * Attach an attributes getter method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributesGetter(Class, method, type) {\n  /**\n   * Retrieves all the target element's attributes.\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   *\n   * @return {object}          - The element's attributes.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 1) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + arguments[1];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes;\n  };\n}\n\n/**\n * Attach an attribute checker method onto the provided class.\n *\n * @param {function} Class       - Target class.\n * @param {string}   method      - Method name.\n * @param {string}   type        - Type of the edge to find.\n */\nfunction attachEdgeAttributeChecker(Class, method, type) {\n  /**\n   * Checks whether the desired attribute is set for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    return data.attributes.hasOwnProperty(name);\n  };\n}\n\n/**\n * Attach an attribute setter method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeSetter(Class, method, type) {\n  /**\n   * Set the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   * @param  {mixed}  value   - New attribute value.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, value) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      value = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    data.attributes[name] = value;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeUpdater(Class, method, type) {\n  /**\n   * Update the desired attribute for the given element (node or edge) using\n   * the provided function.\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {string}   name    - Attribute's name.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 3) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n      updater = arguments[3];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: updater should be a function.`\n      );\n\n    data.attributes[name] = updater(data.attributes[name]);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'set',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute remover method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributeRemover(Class, method, type) {\n  /**\n   * Remove the desired attribute for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element - Target element.\n   * @param  {string} name    - Attribute's name.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source - Source element.\n   * @param  {any}     target - Target element.\n   * @param  {string}  name   - Attribute's name.\n   *\n   * @return {Graph}          - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, name) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element;\n      const target = '' + name;\n\n      name = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    delete data.attributes[name];\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'remove',\n      attributes: data.attributes,\n      name\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute replacer method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesReplacer(Class, method, type) {\n  /**\n   * Replace the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - New attributes.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - New attributes.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    data.attributes = attributes;\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'replace',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute merger method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesMerger(Class, method, type) {\n  /**\n   * Merge the attributes for the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}    element    - Target element.\n   * @param  {object} attributes - Attributes to merge.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}     source     - Source element.\n   * @param  {any}     target     - Target element.\n   * @param  {object}  attributes - Attributes to merge.\n   *\n   * @return {Graph}              - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, attributes) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + attributes;\n\n      attributes = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided attributes are not a plain object.`\n      );\n\n    assign(data.attributes, attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'merge',\n      attributes: data.attributes,\n      data: attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * Attach an attribute updater method onto the provided class.\n *\n * @param {function} Class         - Target class.\n * @param {string}   method        - Method name.\n * @param {string}   type          - Type of the edge to find.\n */\nfunction attachEdgeAttributesUpdater(Class, method, type) {\n  /**\n   * Update the attributes of the given element (node or edge).\n   *\n   * Arity 2:\n   * @param  {any}      element - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * Arity 3 (only for edges):\n   * @param  {any}      source  - Source element.\n   * @param  {any}      target  - Target element.\n   * @param  {function} updater - Updater function.\n   *\n   * @return {Graph}            - Returns itself for chaining.\n   *\n   * @throws {Error} - Will throw if too many arguments are provided.\n   * @throws {Error} - Will throw if any of the elements is not found.\n   */\n  Class.prototype[method] = function (element, updater) {\n    let data;\n\n    if (this.type !== 'mixed' && type !== 'mixed' && type !== this.type)\n      throw new UsageGraphError(\n        `Graph.${method}: cannot find this type of edges in your ${this.type} graph.`\n      );\n\n    if (arguments.length > 2) {\n      if (this.multi)\n        throw new UsageGraphError(\n          `Graph.${method}: cannot use a {source,target} combo when asking about an edge's attributes in a MultiGraph since we cannot infer the one you want information about.`\n        );\n\n      const source = '' + element,\n        target = '' + updater;\n\n      updater = arguments[2];\n\n      data = getMatchingEdge(this, source, target, type);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find an edge for the given path (\"${source}\" - \"${target}\").`\n        );\n    } else {\n      if (type !== 'mixed')\n        throw new UsageGraphError(\n          `Graph.${method}: calling this method with only a key (vs. a source and target) does not make sense since an edge with this key could have the other type.`\n        );\n\n      element = '' + element;\n      data = this._edges.get(element);\n\n      if (!data)\n        throw new NotFoundGraphError(\n          `Graph.${method}: could not find the \"${element}\" edge in the graph.`\n        );\n    }\n\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.${method}: provided updater is not a function.`\n      );\n\n    data.attributes = updater(data.attributes);\n\n    // Emitting\n    this.emit('edgeAttributesUpdated', {\n      key: data.key,\n      type: 'update',\n      attributes: data.attributes\n    });\n\n    return this;\n  };\n}\n\n/**\n * List of methods to attach.\n */\nconst EDGE_ATTRIBUTES_METHODS = [\n  {\n    name: element => `get${element}Attribute`,\n    attacher: attachEdgeAttributeGetter\n  },\n  {\n    name: element => `get${element}Attributes`,\n    attacher: attachEdgeAttributesGetter\n  },\n  {\n    name: element => `has${element}Attribute`,\n    attacher: attachEdgeAttributeChecker\n  },\n  {\n    name: element => `set${element}Attribute`,\n    attacher: attachEdgeAttributeSetter\n  },\n  {\n    name: element => `update${element}Attribute`,\n    attacher: attachEdgeAttributeUpdater\n  },\n  {\n    name: element => `remove${element}Attribute`,\n    attacher: attachEdgeAttributeRemover\n  },\n  {\n    name: element => `replace${element}Attributes`,\n    attacher: attachEdgeAttributesReplacer\n  },\n  {\n    name: element => `merge${element}Attributes`,\n    attacher: attachEdgeAttributesMerger\n  },\n  {\n    name: element => `update${element}Attributes`,\n    attacher: attachEdgeAttributesUpdater\n  }\n];\n\n/**\n * Attach every attributes-related methods to a Graph class.\n *\n * @param {function} Graph - Target class.\n */\nexport default function attachEdgeAttributesMethods(Graph) {\n  EDGE_ATTRIBUTES_METHODS.forEach(function ({name, attacher}) {\n    // For edges\n    attacher(Graph, name('Edge'), 'mixed');\n\n    // For directed edges\n    attacher(Graph, name('DirectedEdge'), 'directed');\n\n    // For undirected edges\n    attacher(Graph, name('UndirectedEdge'), 'undirected');\n  });\n}\n","/**\n * Obliterator Chain Function\n * ===========================\n *\n * Variadic function combining the given iterables.\n */\nvar Iterator = require('./iterator.js');\nvar iter = require('./iter.js');\n\n/**\n * Chain.\n *\n * @param  {...Iterator} iterables - Target iterables.\n * @return {Iterator}\n */\nmodule.exports = function chain() {\n  var iterables = arguments;\n  var current = null;\n  var i = -1;\n\n  /* eslint-disable no-constant-condition */\n  return new Iterator(function next() {\n    var step = null;\n\n    do {\n      if (current === null) {\n        i++;\n\n        if (i >= iterables.length) return {done: true};\n\n        current = iter(iterables[i]);\n      }\n\n      step = current.next();\n\n      if (step.done === true) {\n        current = null;\n        continue;\n      }\n\n      break;\n    } while (true);\n\n    return step;\n  });\n};\n","/**\n * Graphology Edge Iteration\n * ==========================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's edges.\n */\nimport Iterator from 'obliterator/iterator';\nimport chain from 'obliterator/chain';\nimport take from 'obliterator/take';\n\nimport {InvalidArgumentsGraphError, NotFoundGraphError} from '../errors';\n\n/**\n * Definitions.\n */\nconst EDGES_ITERATION = [\n  {\n    name: 'edges',\n    type: 'mixed'\n  },\n  {\n    name: 'inEdges',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outEdges',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundEdges',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundEdges',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedEdges',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedEdges',\n    type: 'undirected'\n  }\n];\n\n/**\n * Function iterating over edges from the given object to match one of them.\n *\n * @param {object}   object   - Target object.\n * @param {function} callback - Function to call.\n */\nfunction forEachSimple(breakable, object, callback, avoid) {\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    const edgeData = object[k];\n\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n  }\n\n  return;\n}\n\nfunction forEachMulti(breakable, object, callback, avoid) {\n  let edgeData, source, target;\n\n  let shouldBreak = false;\n\n  for (const k in object) {\n    if (k === avoid) continue;\n\n    edgeData = object[k];\n\n    do {\n      source = edgeData.source;\n      target = edgeData.target;\n\n      shouldBreak = callback(\n        edgeData.key,\n        edgeData.attributes,\n        source.key,\n        target.key,\n        source.attributes,\n        target.attributes,\n        edgeData.undirected\n      );\n\n      if (breakable && shouldBreak) return edgeData.key;\n\n      edgeData = edgeData.next;\n    } while (edgeData !== undefined);\n  }\n\n  return;\n}\n\n/**\n * Function returning an iterator over edges from the given object.\n *\n * @param  {object}   object - Target object.\n * @return {Iterator}\n */\nfunction createIterator(object, avoid) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let edgeData;\n  let i = 0;\n\n  return new Iterator(function next() {\n    do {\n      if (!edgeData) {\n        if (i >= l) return {done: true};\n\n        const k = keys[i++];\n\n        if (k === avoid) {\n          edgeData = undefined;\n          continue;\n        }\n\n        edgeData = object[k];\n      } else {\n        edgeData = edgeData.next;\n      }\n    } while (!edgeData);\n\n    return {\n      done: false,\n      value: {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      }\n    };\n  });\n}\n\n/**\n * Function iterating over the egdes from the object at given key to match\n * one of them.\n *\n * @param {object}   object   - Target object.\n * @param {mixed}    k        - Neighbor key.\n * @param {function} callback - Callback to use.\n */\nfunction forEachForKeySimple(breakable, object, k, callback) {\n  const edgeData = object[k];\n\n  if (!edgeData) return;\n\n  const sourceData = edgeData.source;\n  const targetData = edgeData.target;\n\n  if (\n    callback(\n      edgeData.key,\n      edgeData.attributes,\n      sourceData.key,\n      targetData.key,\n      sourceData.attributes,\n      targetData.attributes,\n      edgeData.undirected\n    ) &&\n    breakable\n  )\n    return edgeData.key;\n}\n\nfunction forEachForKeyMulti(breakable, object, k, callback) {\n  let edgeData = object[k];\n\n  if (!edgeData) return;\n\n  let shouldBreak = false;\n\n  do {\n    shouldBreak = callback(\n      edgeData.key,\n      edgeData.attributes,\n      edgeData.source.key,\n      edgeData.target.key,\n      edgeData.source.attributes,\n      edgeData.target.attributes,\n      edgeData.undirected\n    );\n\n    if (breakable && shouldBreak) return edgeData.key;\n\n    edgeData = edgeData.next;\n  } while (edgeData !== undefined);\n\n  return;\n}\n\n/**\n * Function returning an iterator over the egdes from the object at given key.\n *\n * @param  {object}   object   - Target object.\n * @param  {mixed}    k        - Neighbor key.\n * @return {Iterator}\n */\nfunction createIteratorForKey(object, k) {\n  let edgeData = object[k];\n\n  if (edgeData.next !== undefined) {\n    return new Iterator(function () {\n      if (!edgeData) return {done: true};\n\n      const value = {\n        edge: edgeData.key,\n        attributes: edgeData.attributes,\n        source: edgeData.source.key,\n        target: edgeData.target.key,\n        sourceAttributes: edgeData.source.attributes,\n        targetAttributes: edgeData.target.attributes,\n        undirected: edgeData.undirected\n      };\n\n      edgeData = edgeData.next;\n\n      return {\n        done: false,\n        value\n      };\n    });\n  }\n\n  return Iterator.of({\n    edge: edgeData.key,\n    attributes: edgeData.attributes,\n    source: edgeData.source.key,\n    target: edgeData.target.key,\n    sourceAttributes: edgeData.source.attributes,\n    targetAttributes: edgeData.target.attributes,\n    undirected: edgeData.undirected\n  });\n}\n\n/**\n * Function creating an array of edges for the given type.\n *\n * @param  {Graph}   graph - Target Graph instance.\n * @param  {string}  type  - Type of edges to retrieve.\n * @return {array}         - Array of edges.\n */\nfunction createEdgeArray(graph, type) {\n  if (graph.size === 0) return [];\n\n  if (type === 'mixed' || type === graph.type) {\n    if (typeof Array.from === 'function')\n      return Array.from(graph._edges.keys());\n\n    return take(graph._edges.keys(), graph._edges.size);\n  }\n\n  const size =\n    type === 'undirected' ? graph.undirectedSize : graph.directedSize;\n\n  const list = new Array(size),\n    mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  let i = 0;\n  let step, data;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (data.undirected === mask) list[i++] = data.key;\n  }\n\n  return list;\n}\n\n/**\n * Function iterating over a graph's edges using a callback to match one of\n * them.\n *\n * @param  {Graph}    graph    - Target Graph instance.\n * @param  {string}   type     - Type of edges to retrieve.\n * @param  {function} callback - Function to call.\n */\nfunction forEachEdge(breakable, graph, type, callback) {\n  if (graph.size === 0) return;\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  let step, data;\n  let shouldBreak = false;\n  const iterator = graph._edges.values();\n\n  while (((step = iterator.next()), step.done !== true)) {\n    data = step.value;\n\n    if (shouldFilter && data.undirected !== mask) continue;\n\n    const {key, attributes, source, target} = data;\n\n    shouldBreak = callback(\n      key,\n      attributes,\n      source.key,\n      target.key,\n      source.attributes,\n      target.attributes,\n      data.undirected\n    );\n\n    if (breakable && shouldBreak) return key;\n  }\n\n  return;\n}\n\n/**\n * Function creating an iterator of edges for the given type.\n *\n * @param  {Graph}    graph - Target Graph instance.\n * @param  {string}   type  - Type of edges to retrieve.\n * @return {Iterator}\n */\nfunction createEdgeIterator(graph, type) {\n  if (graph.size === 0) return Iterator.empty();\n\n  const shouldFilter = type !== 'mixed' && type !== graph.type;\n  const mask = type === 'undirected';\n\n  const iterator = graph._edges.values();\n\n  return new Iterator(function next() {\n    let step, data;\n\n    // eslint-disable-next-line no-constant-condition\n    while (true) {\n      step = iterator.next();\n\n      if (step.done) return step;\n\n      data = step.value;\n\n      if (shouldFilter && data.undirected !== mask) continue;\n\n      break;\n    }\n\n    const value = {\n      edge: data.key,\n      attributes: data.attributes,\n      source: data.source.key,\n      target: data.target.key,\n      sourceAttributes: data.source.attributes,\n      targetAttributes: data.target.attributes,\n      undirected: data.undirected\n    };\n\n    return {value, done: false};\n  });\n}\n\n/**\n * Function iterating over a node's edges using a callback to match one of them.\n *\n * @param  {boolean}  multi     - Whether the graph is multi or not.\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Function to call.\n */\nfunction forEachEdgeForNode(\n  breakable,\n  multi,\n  type,\n  direction,\n  nodeData,\n  callback\n) {\n  const fn = multi ? forEachMulti : forEachSimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = fn(breakable, nodeData.in, callback);\n\n      if (breakable && found) return found;\n    }\n    if (direction !== 'in') {\n      found = fn(\n        breakable,\n        nodeData.out,\n        callback,\n        !direction ? nodeData.key : undefined\n      );\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    found = fn(breakable, nodeData.undirected, callback);\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given type & the given node.\n *\n * @param  {boolean} multi     - Whether the graph is multi or not.\n * @param  {string}  type      - Type of edges to retrieve.\n * @param  {string}  direction - In or out?\n * @param  {any}     nodeData  - Target node's data.\n * @return {array}             - Array of edges.\n */\nfunction createEdgeArrayForNode(multi, type, direction, nodeData) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForNode(false, multi, type, direction, nodeData, function (key) {\n    edges.push(key);\n  });\n\n  return edges;\n}\n\n/**\n * Function iterating over a node's edges using a callback.\n *\n * @param  {string}   type      - Type of edges to retrieve.\n * @param  {string}   direction - In or out?\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createEdgeIteratorForNode(type, direction, nodeData) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out' && typeof nodeData.in !== 'undefined')\n      iterator = chain(iterator, createIterator(nodeData.in));\n    if (direction !== 'in' && typeof nodeData.out !== 'undefined')\n      iterator = chain(\n        iterator,\n        createIterator(nodeData.out, !direction ? nodeData.key : undefined)\n      );\n  }\n\n  if (type !== 'directed' && typeof nodeData.undirected !== 'undefined') {\n    iterator = chain(iterator, createIterator(nodeData.undirected));\n  }\n\n  return iterator;\n}\n\n/**\n * Function iterating over edges for the given path using a callback to match\n * one of them.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction forEachEdgeForPath(\n  breakable,\n  type,\n  multi,\n  direction,\n  sourceData,\n  target,\n  callback\n) {\n  const fn = multi ? forEachForKeyMulti : forEachForKeySimple;\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (typeof sourceData.in !== 'undefined' && direction !== 'out') {\n      found = fn(breakable, sourceData.in, target, callback);\n\n      if (breakable && found) return found;\n    }\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      (direction || sourceData.key !== target)\n    ) {\n      found = fn(breakable, sourceData.out, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  if (type !== 'directed') {\n    if (typeof sourceData.undirected !== 'undefined') {\n      found = fn(breakable, sourceData.undirected, target, callback);\n\n      if (breakable && found) return found;\n    }\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {boolean}  multi      - Whether the graph is multi.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {any}      target     - Target node.\n * @return {array}               - Array of edges.\n */\nfunction createEdgeArrayForPath(type, multi, direction, sourceData, target) {\n  const edges = []; // TODO: possibility to know size beforehand or factorize with map\n\n  forEachEdgeForPath(\n    false,\n    type,\n    multi,\n    direction,\n    sourceData,\n    target,\n    function (key) {\n      edges.push(key);\n    }\n  );\n\n  return edges;\n}\n\n/**\n * Function returning an iterator over edges for the given path.\n *\n * @param  {string}   type       - Type of edges to retrieve.\n * @param  {string}   direction  - In or out?\n * @param  {NodeData} sourceData - Source node's data.\n * @param  {string}   target     - Target node.\n * @param  {function} callback   - Function to call.\n */\nfunction createEdgeIteratorForPath(type, direction, sourceData, target) {\n  let iterator = Iterator.empty();\n\n  if (type !== 'undirected') {\n    if (\n      typeof sourceData.in !== 'undefined' &&\n      direction !== 'out' &&\n      target in sourceData.in\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.in, target));\n\n    if (\n      typeof sourceData.out !== 'undefined' &&\n      direction !== 'in' &&\n      target in sourceData.out &&\n      (direction || sourceData.key !== target)\n    )\n      iterator = chain(iterator, createIteratorForKey(sourceData.out, target));\n  }\n\n  if (type !== 'directed') {\n    if (\n      typeof sourceData.undirected !== 'undefined' &&\n      target in sourceData.undirected\n    )\n      iterator = chain(\n        iterator,\n        createIteratorForKey(sourceData.undirected, target)\n      );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching an edge array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain edges.\n   *\n   * Arity 0: Return all the relevant edges.\n   *\n   * Arity 1: Return all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Return the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    if (!arguments.length) return createEdgeArray(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeArrayForNode(\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData\n      );\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeArrayForPath(\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching a edge callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(false, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        false,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${forEachName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        false,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${forEachName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function mapping the graph's relevant edges by applying the given\n   * callback.\n   *\n   * Arity 1: Map all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Map all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Map the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    let result;\n\n    // We know the result length beforehand\n    if (args.length === 0) {\n      let length = 0;\n\n      if (type !== 'directed') length += this.undirectedSize;\n      if (type !== 'undirected') length += this.directedSize;\n\n      result = new Array(length);\n\n      let i = 0;\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result[i++] = callback(e, ea, s, t, sa, ta, u);\n      });\n    }\n\n    // We don't know the result length beforehand\n    // TODO: we can in some instances of simple graphs, knowing degree\n    else {\n      result = [];\n\n      args.push((e, ea, s, t, sa, ta, u) => {\n        result.push(callback(e, ea, s, t, sa, ta, u));\n      });\n    }\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function filtering the graph's relevant edges using the provided predicate\n   * function.\n   *\n   * Arity 1: Filter all the relevant edges.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 2: Filter all of a node's relevant edges.\n   * @param  {any}      node      - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * Arity 3: Filter the relevant edges across the given path.\n   * @param  {any}      source    - Source node.\n   * @param  {any}      target    - Target node.\n   * @param  {function} predicate - Predicate to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    const result = [];\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      if (callback(e, ea, s, t, sa, ta, u)) result.push(e);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return result;\n  };\n\n  /**\n   * Function reducing the graph's relevant edges using the provided accumulator\n   * function.\n   *\n   * Arity 1: Reduce all the relevant edges.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 2: Reduce all of a node's relevant edges.\n   * @param  {any}      node         - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * Arity 3: Reduce the relevant edges across the given path.\n   * @param  {any}      source       - Source node.\n   * @param  {any}      target       - Target node.\n   * @param  {function} accumulator  - Accumulator to use.\n   * @param  {any}      initialValue - Initial value.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function () {\n    let args = Array.prototype.slice.call(arguments);\n\n    if (args.length < 2 || args.length > 4) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: invalid number of arguments (expecting 2, 3 or 4 and got ${args.length}).`\n      );\n    }\n\n    if (\n      typeof args[args.length - 1] === 'function' &&\n      typeof args[args.length - 2] !== 'function'\n    ) {\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n    }\n\n    let callback;\n    let initialValue;\n\n    if (args.length === 2) {\n      callback = args[0];\n      initialValue = args[1];\n      args = [];\n    } else if (args.length === 3) {\n      callback = args[1];\n      initialValue = args[2];\n      args = [args[0]];\n    } else if (args.length === 4) {\n      callback = args[2];\n      initialValue = args[3];\n      args = [args[0], args[1]];\n    }\n\n    let accumulator = initialValue;\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      accumulator = callback(accumulator, e, ea, s, t, sa, ta, u);\n    });\n\n    this[forEachName].apply(this, args);\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable edge callback iterator method to the Graph\n * prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindEdge(Class, description) {\n  const {name, type, direction} = description;\n\n  const findEdgeName = 'find' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over the graph's relevant edges in order to match\n   * one of them using the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findEdgeName] = function (source, target, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return false;\n\n    if (arguments.length === 1) {\n      callback = source;\n      return forEachEdge(true, this, type, callback);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      callback = target;\n\n      const nodeData = this._nodes.get(source);\n\n      if (typeof nodeData === 'undefined')\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      // TODO: maybe attach the sub method to the instance dynamically?\n      return forEachEdgeForNode(\n        true,\n        this.multi,\n        type === 'mixed' ? this.type : type,\n        direction,\n        nodeData,\n        callback\n      );\n    }\n\n    if (arguments.length === 3) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${findEdgeName}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return forEachEdgeForPath(\n        true,\n        type,\n        this.multi,\n        direction,\n        sourceData,\n        target,\n        callback\n      );\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${findEdgeName}: too many arguments (expecting 1, 2 or 3 and got ${arguments.length}).`\n    );\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether any one of them matches the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[someName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over the graph's relevant edges in order to assert\n   * whether all of them matche the provided predicate function.\n   *\n   * Arity 1: Iterate over all the relevant edges.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 2: Iterate over all of a node's relevant edges.\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * Arity 3: Iterate over the relevant edges across the given path.\n   * @param  {any}      source   - Source node.\n   * @param  {any}      target   - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + name[0].toUpperCase() + name.slice(1, -1);\n\n  Class.prototype[everyName] = function () {\n    const args = Array.prototype.slice.call(arguments);\n    const callback = args.pop();\n\n    args.push((e, ea, s, t, sa, ta, u) => {\n      return !callback(e, ea, s, t, sa, ta, u);\n    });\n\n    const found = this[findEdgeName].apply(this, args);\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching an edge iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachEdgeIteratorCreator(Class, description) {\n  const {name: originalName, type, direction} = description;\n\n  const name = originalName.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over the graph's edges.\n   *\n   * Arity 0: Iterate over all the relevant edges.\n   *\n   * Arity 1: Iterate over all of a node's relevant edges.\n   * @param  {any}   node   - Target node.\n   *\n   * Arity 2: Iterate over the relevant edges across the given path.\n   * @param  {any}   source - Source node.\n   * @param  {any}   target - Target node.\n   *\n   * @return {array|number} - The edges or the number of edges.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[name] = function (source, target) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    if (!arguments.length) return createEdgeIterator(this, type);\n\n    if (arguments.length === 1) {\n      source = '' + source;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}: could not find the \"${source}\" node in the graph.`\n        );\n\n      // Iterating over a node's edges\n      return createEdgeIteratorForNode(type, direction, sourceData);\n    }\n\n    if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      const sourceData = this._nodes.get(source);\n\n      if (!sourceData)\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${source}\" source node in the graph.`\n        );\n\n      if (!this._nodes.has(target))\n        throw new NotFoundGraphError(\n          `Graph.${name}:  could not find the \"${target}\" target node in the graph.`\n        );\n\n      // Iterating over the edges between source & target\n      return createEdgeIteratorForPath(type, direction, sourceData, target);\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: too many arguments (expecting 0, 1 or 2 and got ${arguments.length}).`\n    );\n  };\n}\n\n/**\n * Function attaching every edge iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nexport default function attachEdgeIterationMethods(Graph) {\n  EDGES_ITERATION.forEach(description => {\n    attachEdgeArrayCreator(Graph, description);\n    attachForEachEdge(Graph, description);\n    attachFindEdge(Graph, description);\n    attachEdgeIteratorCreator(Graph, description);\n  });\n}\n","/**\n * Graphology Neighbor Iteration\n * ==============================\n *\n * Attaching some methods to the Graph class to be able to iterate over\n * neighbors.\n */\nimport Iterator from 'obliterator/iterator';\nimport chain from 'obliterator/chain';\n\nimport {NotFoundGraphError, InvalidArgumentsGraphError} from '../errors';\n\n/**\n * Definitions.\n */\nconst NEIGHBORS_ITERATION = [\n  {\n    name: 'neighbors',\n    type: 'mixed'\n  },\n  {\n    name: 'inNeighbors',\n    type: 'directed',\n    direction: 'in'\n  },\n  {\n    name: 'outNeighbors',\n    type: 'directed',\n    direction: 'out'\n  },\n  {\n    name: 'inboundNeighbors',\n    type: 'mixed',\n    direction: 'in'\n  },\n  {\n    name: 'outboundNeighbors',\n    type: 'mixed',\n    direction: 'out'\n  },\n  {\n    name: 'directedNeighbors',\n    type: 'directed'\n  },\n  {\n    name: 'undirectedNeighbors',\n    type: 'undirected'\n  }\n];\n\n/**\n * Helpers.\n */\nfunction CompositeSetWrapper() {\n  this.A = null;\n  this.B = null;\n}\n\nCompositeSetWrapper.prototype.wrap = function (set) {\n  if (this.A === null) this.A = set;\n  else if (this.B === null) this.B = set;\n};\n\nCompositeSetWrapper.prototype.has = function (key) {\n  if (this.A !== null && key in this.A) return true;\n  if (this.B !== null && key in this.B) return true;\n  return false;\n};\n\n/**\n * Function iterating over the given node's relevant neighbors to match\n * one of them using a predicated function.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @param  {function} callback  - Callback to use.\n */\nfunction forEachInObjectOnce(breakable, visited, nodeData, object, callback) {\n  for (const k in object) {\n    const edgeData = object[k];\n\n    const sourceData = edgeData.source;\n    const targetData = edgeData.target;\n\n    const neighborData = sourceData === nodeData ? targetData : sourceData;\n\n    if (visited && visited.has(neighborData.key)) continue;\n\n    const shouldBreak = callback(neighborData.key, neighborData.attributes);\n\n    if (breakable && shouldBreak) return neighborData.key;\n  }\n\n  return;\n}\n\nfunction forEachNeighbor(breakable, type, direction, nodeData, callback) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.undirected,\n        callback\n      );\n\n    if (typeof direction === 'string')\n      return forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData[direction],\n        callback\n      );\n  }\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  let found;\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      found = forEachInObjectOnce(\n        breakable,\n        null,\n        nodeData,\n        nodeData.in,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.in);\n    }\n    if (direction !== 'in') {\n      found = forEachInObjectOnce(\n        breakable,\n        visited,\n        nodeData,\n        nodeData.out,\n        callback\n      );\n\n      if (breakable && found) return found;\n\n      visited.wrap(nodeData.out);\n    }\n  }\n\n  if (type !== 'directed') {\n    found = forEachInObjectOnce(\n      breakable,\n      visited,\n      nodeData,\n      nodeData.undirected,\n      callback\n    );\n\n    if (breakable && found) return found;\n  }\n\n  return;\n}\n\n/**\n * Function creating an array of relevant neighbors for the given node.\n *\n * @param  {string}       type      - Type of neighbors.\n * @param  {string}       direction - Direction.\n * @param  {any}          nodeData  - Target node's data.\n * @return {Array}                  - The list of neighbors.\n */\nfunction createNeighborArrayForNode(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected') return Object.keys(nodeData.undirected);\n\n    if (typeof direction === 'string') return Object.keys(nodeData[direction]);\n  }\n\n  const neighbors = [];\n\n  forEachNeighbor(false, type, direction, nodeData, function (key) {\n    neighbors.push(key);\n  });\n\n  return neighbors;\n}\n\n/**\n * Function returning an iterator over the given node's relevant neighbors.\n *\n * @param  {string}   type      - Type of neighbors.\n * @param  {string}   direction - Direction.\n * @param  {any}      nodeData  - Target node's data.\n * @return {Iterator}\n */\nfunction createDedupedObjectIterator(visited, nodeData, object) {\n  const keys = Object.keys(object);\n  const l = keys.length;\n\n  let i = 0;\n\n  return new Iterator(function next() {\n    let neighborData = null;\n\n    do {\n      if (i >= l) {\n        if (visited) visited.wrap(object);\n        return {done: true};\n      }\n\n      const edgeData = object[keys[i++]];\n\n      const sourceData = edgeData.source;\n      const targetData = edgeData.target;\n\n      neighborData = sourceData === nodeData ? targetData : sourceData;\n\n      if (visited && visited.has(neighborData.key)) {\n        neighborData = null;\n        continue;\n      }\n    } while (neighborData === null);\n\n    return {\n      done: false,\n      value: {neighbor: neighborData.key, attributes: neighborData.attributes}\n    };\n  });\n}\n\nfunction createNeighborIterator(type, direction, nodeData) {\n  // If we want only undirected or in or out, we can roll some optimizations\n  if (type !== 'mixed') {\n    if (type === 'undirected')\n      return createDedupedObjectIterator(null, nodeData, nodeData.undirected);\n\n    if (typeof direction === 'string')\n      return createDedupedObjectIterator(null, nodeData, nodeData[direction]);\n  }\n\n  let iterator = Iterator.empty();\n\n  // Else we need to keep a set of neighbors not to return duplicates\n  // We cheat by querying the other adjacencies\n  const visited = new CompositeSetWrapper();\n\n  if (type !== 'undirected') {\n    if (direction !== 'out') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.in)\n      );\n    }\n    if (direction !== 'in') {\n      iterator = chain(\n        iterator,\n        createDedupedObjectIterator(visited, nodeData, nodeData.out)\n      );\n    }\n  }\n\n  if (type !== 'directed') {\n    iterator = chain(\n      iterator,\n      createDedupedObjectIterator(visited, nodeData, nodeData.undirected)\n    );\n  }\n\n  return iterator;\n}\n\n/**\n * Function attaching a neighbors array creator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborArrayCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  /**\n   * Function returning an array of certain neighbors.\n   *\n   * @param  {any}   node   - Target node.\n   * @return {array} - The neighbors of neighbors.\n   *\n   * @throws {Error} - Will throw if node is not found in the graph.\n   */\n  Class.prototype[name] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return [];\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${name}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborArrayForNode(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachForEachNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const forEachName = 'forEach' + name[0].toUpperCase() + name.slice(1, -1);\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[forEachName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${forEachName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    forEachNeighbor(\n      false,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function mapping the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const mapName = 'map' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[mapName] = function (node, callback) {\n    // TODO: optimize when size is known beforehand\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      result.push(callback(n, a));\n    });\n\n    return result;\n  };\n\n  /**\n   * Function filtering the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const filterName = 'filter' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[filterName] = function (node, callback) {\n    const result = [];\n\n    this[forEachName](node, (n, a) => {\n      if (callback(n, a)) result.push(n);\n    });\n\n    return result;\n  };\n\n  /**\n   * Function reducing the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const reduceName = 'reduce' + name[0].toUpperCase() + name.slice(1);\n\n  Class.prototype[reduceName] = function (node, callback, initialValue) {\n    if (arguments.length < 3)\n      throw new InvalidArgumentsGraphError(\n        `Graph.${reduceName}: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.`\n      );\n\n    let accumulator = initialValue;\n\n    this[forEachName](node, (n, a) => {\n      accumulator = callback(accumulator, n, a);\n    });\n\n    return accumulator;\n  };\n}\n\n/**\n * Function attaching a breakable neighbors callback iterator method to the\n * Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachFindNeighbor(Class, description) {\n  const {name, type, direction} = description;\n\n  const capitalizedSingular = name[0].toUpperCase() + name.slice(1, -1);\n\n  const findName = 'find' + capitalizedSingular;\n\n  /**\n   * Function iterating over all the relevant neighbors using a callback.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {undefined}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[findName] = function (node, callback) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type) return;\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${findName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return forEachNeighbor(\n      true,\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData,\n      callback\n    );\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if any of them\n   * matches the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const someName = 'some' + capitalizedSingular;\n\n  Class.prototype[someName] = function (node, callback) {\n    const found = this[findName](node, callback);\n\n    if (found) return true;\n\n    return false;\n  };\n\n  /**\n   * Function iterating over all the relevant neighbors to find if all of them\n   * matche the given predicate.\n   *\n   * @param  {any}      node     - Target node.\n   * @param  {function} callback - Callback to use.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  const everyName = 'every' + capitalizedSingular;\n\n  Class.prototype[everyName] = function (node, callback) {\n    const found = this[findName](node, (n, a) => {\n      return !callback(n, a);\n    });\n\n    if (found) return false;\n\n    return true;\n  };\n}\n\n/**\n * Function attaching a neighbors callback iterator method to the Graph prototype.\n *\n * @param {function} Class       - Target class.\n * @param {object}   description - Method description.\n */\nfunction attachNeighborIteratorCreator(Class, description) {\n  const {name, type, direction} = description;\n\n  const iteratorName = name.slice(0, -1) + 'Entries';\n\n  /**\n   * Function returning an iterator over all the relevant neighbors.\n   *\n   * @param  {any}      node     - Target node.\n   * @return {Iterator}\n   *\n   * @throws {Error} - Will throw if there are too many arguments.\n   */\n  Class.prototype[iteratorName] = function (node) {\n    // Early termination\n    if (type !== 'mixed' && this.type !== 'mixed' && type !== this.type)\n      return Iterator.empty();\n\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (typeof nodeData === 'undefined')\n      throw new NotFoundGraphError(\n        `Graph.${iteratorName}: could not find the \"${node}\" node in the graph.`\n      );\n\n    // Here, we want to iterate over a node's relevant neighbors\n    return createNeighborIterator(\n      type === 'mixed' ? this.type : type,\n      direction,\n      nodeData\n    );\n  };\n}\n\n/**\n * Function attaching every neighbor iteration method to the Graph class.\n *\n * @param {function} Graph - Graph class.\n */\nexport default function attachNeighborIterationMethods(Graph) {\n  NEIGHBORS_ITERATION.forEach(description => {\n    attachNeighborArrayCreator(Graph, description);\n    attachForEachNeighbor(Graph, description);\n    attachFindNeighbor(Graph, description);\n    attachNeighborIteratorCreator(Graph, description);\n  });\n}\n","/**\n * Graphology Adjacency Iteration\n * ===============================\n *\n * Attaching some methods to the Graph class to be able to iterate over a\n * graph's adjacency.\n */\n\n/**\n * Function iterating over a simple graph's adjacency using a callback.\n *\n * @param {boolean}  breakable         - Can we break?\n * @param {boolean}  assymetric        - Whether to emit undirected edges only once.\n * @param {boolean}  disconnectedNodes - Whether to emit disconnected nodes.\n * @param {Graph}    graph             - Target Graph instance.\n * @param {callback} function          - Iteration callback.\n */\nexport function forEachAdjacency(\n  breakable,\n  assymetric,\n  disconnectedNodes,\n  graph,\n  callback\n) {\n  const iterator = graph._nodes.values();\n\n  const type = graph.type;\n\n  let step, sourceData, neighbor, adj, edgeData, targetData, shouldBreak;\n\n  while (((step = iterator.next()), step.done !== true)) {\n    let hasEdges = false;\n\n    sourceData = step.value;\n\n    if (type !== 'undirected') {\n      adj = sourceData.out;\n\n      for (neighbor in adj) {\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (type !== 'directed') {\n      adj = sourceData.undirected;\n\n      for (neighbor in adj) {\n        if (assymetric && sourceData.key > neighbor) continue;\n\n        edgeData = adj[neighbor];\n\n        do {\n          targetData = edgeData.target;\n\n          if (targetData.key !== neighbor) targetData = edgeData.source;\n\n          hasEdges = true;\n          shouldBreak = callback(\n            sourceData.key,\n            targetData.key,\n            sourceData.attributes,\n            targetData.attributes,\n            edgeData.key,\n            edgeData.attributes,\n            edgeData.undirected\n          );\n\n          if (breakable && shouldBreak) return edgeData;\n\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (disconnectedNodes && !hasEdges) {\n      shouldBreak = callback(\n        sourceData.key,\n        null,\n        sourceData.attributes,\n        null,\n        null,\n        null,\n        null\n      );\n\n      if (breakable && shouldBreak) return null;\n    }\n  }\n\n  return;\n}\n","/**\n * Graphology Serialization Utilities\n * ===================================\n *\n * Collection of functions used by the graph serialization schemes.\n */\nimport {InvalidArgumentsGraphError} from './errors';\nimport {assign, isPlainObject, isEmpty} from './utils';\n\n/**\n * Formats internal node data into a serialized node.\n *\n * @param  {any}    key  - The node's key.\n * @param  {object} data - Internal node's data.\n * @return {array}       - The serialized node.\n */\nexport function serializeNode(key, data) {\n  const serialized = {key};\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  return serialized;\n}\n\n/**\n * Formats internal edge data into a serialized edge.\n *\n * @param  {string} type - The graph's type.\n * @param  {any}    key  - The edge's key.\n * @param  {object} data - Internal edge's data.\n * @return {array}       - The serialized edge.\n */\nexport function serializeEdge(type, key, data) {\n  const serialized = {\n    key,\n    source: data.source.key,\n    target: data.target.key\n  };\n\n  if (!isEmpty(data.attributes))\n    serialized.attributes = assign({}, data.attributes);\n\n  if (type === 'mixed' && data.undirected) serialized.undirected = true;\n\n  return serialized;\n}\n\n/**\n * Checks whether the given value is a serialized node.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nexport function validateSerializedNode(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized node. A serialized node should be a plain object with at least a \"key\" property.'\n    );\n\n  if (!('key' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized node is missing its key.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n}\n\n/**\n * Checks whether the given value is a serialized edge.\n *\n * @param  {mixed} value - Target value.\n * @return {string|null}\n */\nexport function validateSerializedEdge(value) {\n  if (!isPlainObject(value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid serialized edge. A serialized edge should be a plain object with at least a \"source\" & \"target\" property.'\n    );\n\n  if (!('source' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its source.'\n    );\n\n  if (!('target' in value))\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: serialized edge is missing its target.'\n    );\n\n  if (\n    'attributes' in value &&\n    (!isPlainObject(value.attributes) || value.attributes === null)\n  )\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid attributes. Attributes should be a plain object, null or omitted.'\n    );\n\n  if ('undirected' in value && typeof value.undirected !== 'boolean')\n    throw new InvalidArgumentsGraphError(\n      'Graph.import: invalid undirectedness information. Undirected should be boolean or omitted.'\n    );\n}\n","/* eslint no-nested-ternary: 0 */\n/**\n * Graphology Reference Implementation\n * ====================================\n *\n * Reference implementation of the graphology specs.\n */\nimport {EventEmitter} from 'events';\nimport Iterator from 'obliterator/iterator';\nimport take from 'obliterator/take';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from './errors';\n\nimport {\n  MixedNodeData,\n  DirectedNodeData,\n  UndirectedNodeData,\n  EdgeData\n} from './data';\n\nimport attachNodeAttributesMethods from './attributes/nodes';\nimport attachEdgeAttributesMethods from './attributes/edges';\nimport attachEdgeIterationMethods from './iteration/edges';\nimport attachNeighborIterationMethods from './iteration/neighbors';\nimport {forEachAdjacency} from './iteration/adjacency';\n\nimport {\n  serializeNode,\n  serializeEdge,\n  validateSerializedNode,\n  validateSerializedEdge\n} from './serialization';\n\nimport {\n  assign,\n  getMatchingEdge,\n  isPlainObject,\n  privateProperty,\n  readOnlyProperty,\n  incrementalIdStartingFromRandomByte,\n  validateHints\n} from './utils';\n\n/**\n * Constants.\n */\nconst INSTANCE_ID = incrementalIdStartingFromRandomByte();\n\n/**\n * Enums.\n */\nconst TYPES = new Set(['directed', 'undirected', 'mixed']);\n\nconst EMITTER_PROPS = new Set([\n  'domain',\n  '_events',\n  '_eventsCount',\n  '_maxListeners'\n]);\n\nconst EDGE_ADD_METHODS = [\n  {\n    name: verb => `${verb}Edge`,\n    generateKey: true\n  },\n  {\n    name: verb => `${verb}DirectedEdge`,\n    generateKey: true,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdge`,\n    generateKey: true,\n    type: 'undirected'\n  },\n  {\n    name: verb => `${verb}EdgeWithKey`\n  },\n  {\n    name: verb => `${verb}DirectedEdgeWithKey`,\n    type: 'directed'\n  },\n  {\n    name: verb => `${verb}UndirectedEdgeWithKey`,\n    type: 'undirected'\n  }\n];\n\n/**\n * Default options.\n */\nconst DEFAULTS = {\n  allowSelfLoops: true,\n  multi: false,\n  type: 'mixed'\n};\n\n/**\n * Abstract functions used by the Graph class for various methods.\n */\n\n/**\n * Internal method used to add a node to the given graph\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {any}     node            - The node's key.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {NodeData}                - Created node data.\n */\nfunction addNode(graph, node, attributes) {\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.addNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // String coercion\n  node = '' + node;\n  attributes = attributes || {};\n\n  if (graph._nodes.has(node))\n    throw new UsageGraphError(\n      `Graph.addNode: the \"${node}\" node already exist in the graph.`\n    );\n\n  const data = new graph.NodeDataClass(node, attributes);\n\n  // Adding the node to internal register\n  graph._nodes.set(node, data);\n\n  // Emitting\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Same as the above but without sanity checks because we call this in contexts\n * where necessary checks were already done.\n */\nfunction unsafeAddNode(graph, node, attributes) {\n  const data = new graph.NodeDataClass(node, attributes);\n\n  graph._nodes.set(node, data);\n\n  graph.emit('nodeAdded', {\n    key: node,\n    attributes\n  });\n\n  return data;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction addEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add a directed edge to an undirected graph. Use the #.addEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot add an undirected edge to a directed graph. Use the #.addEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes && !isPlainObject(attributes))\n    throw new InvalidArgumentsGraphError(\n      `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n    );\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n  attributes = attributes || {};\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  const sourceData = graph._nodes.get(source),\n    targetData = graph._nodes.get(target);\n\n  if (!sourceData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: source node \"${source}\" not found.`\n    );\n\n  if (!targetData)\n    throw new NotFoundGraphError(\n      `Graph.${name}: target node \"${target}\" not found.`\n    );\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  // Here, we might have a source / target collision\n  if (\n    !graph.multi &&\n    (undirected\n      ? typeof sourceData.undirected[target] !== 'undefined'\n      : typeof sourceData.out[target] !== 'undefined')\n  ) {\n    throw new UsageGraphError(\n      `Graph.${name}: an edge linking \"${source}\" to \"${target}\" already exists. If you really want to add multiple edges linking those nodes, you should create a multi graph by using the 'multi' option.`\n    );\n  }\n\n  // Storing some data\n  const edgeData = new EdgeData(\n    undirected,\n    edge,\n    sourceData,\n    targetData,\n    attributes\n  );\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) graph._undirectedSelfLoopCount++;\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) graph._directedSelfLoopCount++;\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return edge;\n}\n\n/**\n * Internal method used to add an arbitrary edge to the given graph.\n *\n * @param  {Graph}   graph           - Target graph.\n * @param  {string}  name            - Name of the child method for errors.\n * @param  {boolean} mustGenerateKey - Should the graph generate an id?\n * @param  {boolean} undirected      - Whether the edge is undirected.\n * @param  {any}     edge            - The edge's key.\n * @param  {any}     source          - The source node.\n * @param  {any}     target          - The target node.\n * @param  {object}  [attributes]    - Optional attributes.\n * @param  {boolean} [asUpdater]       - Are we updating or merging?\n * @return {any}                     - The edge.\n *\n * @throws {Error} - Will throw if the graph is of the wrong type.\n * @throws {Error} - Will throw if the given attributes are not an object.\n * @throws {Error} - Will throw if source or target doesn't exist.\n * @throws {Error} - Will throw if the edge already exist.\n */\nfunction mergeEdge(\n  graph,\n  name,\n  mustGenerateKey,\n  undirected,\n  edge,\n  source,\n  target,\n  attributes,\n  asUpdater\n) {\n  // Checking validity of operation\n  if (!undirected && graph.type === 'undirected')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update a directed edge to an undirected graph. Use the #.mergeEdge/#.updateEdge or #.addUndirectedEdge instead.`\n    );\n\n  if (undirected && graph.type === 'directed')\n    throw new UsageGraphError(\n      `Graph.${name}: you cannot merge/update an undirected edge to a directed graph. Use the #.mergeEdge/#.updateEdge or #.addDirectedEdge instead.`\n    );\n\n  if (attributes) {\n    if (asUpdater) {\n      if (typeof attributes !== 'function')\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid updater function. Expecting a function but got \"${attributes}\"`\n        );\n    } else {\n      if (!isPlainObject(attributes))\n        throw new InvalidArgumentsGraphError(\n          `Graph.${name}: invalid attributes. Expecting an object but got \"${attributes}\"`\n        );\n    }\n  }\n\n  // Coercion of source & target:\n  source = '' + source;\n  target = '' + target;\n\n  let updater;\n\n  if (asUpdater) {\n    updater = attributes;\n    attributes = undefined;\n  }\n\n  if (!graph.allowSelfLoops && source === target)\n    throw new UsageGraphError(\n      `Graph.${name}: source & target are the same (\"${source}\"), thus creating a loop explicitly forbidden by this graph 'allowSelfLoops' option set to false.`\n    );\n\n  let sourceData = graph._nodes.get(source);\n  let targetData = graph._nodes.get(target);\n  let edgeData;\n\n  // Do we need to handle duplicate?\n  let alreadyExistingEdgeData;\n\n  if (!mustGenerateKey) {\n    edgeData = graph._edges.get(edge);\n\n    if (edgeData) {\n      // Here, we need to ensure, if the user gave a key, that source & target\n      // are consistent\n      if (edgeData.source.key !== source || edgeData.target.key !== target) {\n        // If source or target inconsistent\n        if (\n          !undirected ||\n          edgeData.source.key !== target ||\n          edgeData.target.key !== source\n        ) {\n          // If directed, or source/target aren't flipped\n          throw new UsageGraphError(\n            `Graph.${name}: inconsistency detected when attempting to merge the \"${edge}\" edge with \"${source}\" source & \"${target}\" target vs. (\"${edgeData.source.key}\", \"${edgeData.target.key}\").`\n          );\n        }\n      }\n\n      alreadyExistingEdgeData = edgeData;\n    }\n  }\n\n  // Here, we might have a source / target collision\n  if (!alreadyExistingEdgeData && !graph.multi && sourceData) {\n    alreadyExistingEdgeData = undirected\n      ? sourceData.undirected[target]\n      : sourceData.out[target];\n  }\n\n  // Handling duplicates\n  if (alreadyExistingEdgeData) {\n    const info = [alreadyExistingEdgeData.key, false, false, false];\n\n    // We can skip the attribute merging part if the user did not provide them\n    if (asUpdater ? !updater : !attributes) return info;\n\n    // Updating the attributes\n    if (asUpdater) {\n      const oldAttributes = alreadyExistingEdgeData.attributes;\n      alreadyExistingEdgeData.attributes = updater(oldAttributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'replace',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes\n      });\n    }\n\n    // Merging the attributes\n    else {\n      assign(alreadyExistingEdgeData.attributes, attributes);\n\n      graph.emit('edgeAttributesUpdated', {\n        type: 'merge',\n        key: alreadyExistingEdgeData.key,\n        attributes: alreadyExistingEdgeData.attributes,\n        data: attributes\n      });\n    }\n\n    return info;\n  }\n\n  attributes = attributes || {};\n\n  if (asUpdater && updater) attributes = updater(attributes);\n\n  // Must the graph generate an id for this edge?\n  const eventData = {\n    key: null,\n    undirected,\n    source,\n    target,\n    attributes\n  };\n\n  if (mustGenerateKey) {\n    // NOTE: in this case we can guarantee that the key does not already\n    // exist and is already correctly casted as a string\n    edge = graph._edgeKeyGenerator();\n  } else {\n    // Coercion of edge key\n    edge = '' + edge;\n\n    // Here, we have a key collision\n    if (graph._edges.has(edge))\n      throw new UsageGraphError(\n        `Graph.${name}: the \"${edge}\" edge already exists in the graph.`\n      );\n  }\n\n  let sourceWasAdded = false;\n  let targetWasAdded = false;\n\n  if (!sourceData) {\n    sourceData = unsafeAddNode(graph, source, {});\n    sourceWasAdded = true;\n\n    if (source === target) {\n      targetData = sourceData;\n      targetWasAdded = true;\n    }\n  }\n  if (!targetData) {\n    targetData = unsafeAddNode(graph, target, {});\n    targetWasAdded = true;\n  }\n\n  // Storing some data\n  edgeData = new EdgeData(undirected, edge, sourceData, targetData, attributes);\n\n  // Adding the edge to the internal register\n  graph._edges.set(edge, edgeData);\n\n  // Incrementing node degree counters\n  const isSelfLoop = source === target;\n\n  if (undirected) {\n    sourceData.undirectedDegree++;\n    targetData.undirectedDegree++;\n\n    if (isSelfLoop) graph._undirectedSelfLoopCount++;\n  } else {\n    sourceData.outDegree++;\n    targetData.inDegree++;\n\n    if (isSelfLoop) graph._directedSelfLoopCount++;\n  }\n\n  // Updating relevant index\n  if (graph.multi) edgeData.attachMulti();\n  else edgeData.attach();\n\n  if (undirected) graph._undirectedSize++;\n  else graph._directedSize++;\n\n  // Emitting\n  eventData.key = edge;\n\n  graph.emit('edgeAdded', eventData);\n\n  return [edge, true, sourceWasAdded, targetWasAdded];\n}\n\n/**\n * Internal method used to drop an edge.\n *\n * @param  {Graph}    graph    - Target graph.\n * @param  {EdgeData} edgeData - Data of the edge to drop.\n */\nfunction dropEdgeFromData(graph, edgeData) {\n  // Dropping the edge from the register\n  graph._edges.delete(edgeData.key);\n\n  // Updating related degrees\n  const {source: sourceData, target: targetData, attributes} = edgeData;\n\n  const undirected = edgeData.undirected;\n\n  const isSelfLoop = sourceData === targetData;\n\n  if (undirected) {\n    sourceData.undirectedDegree--;\n    targetData.undirectedDegree--;\n\n    if (isSelfLoop) graph._undirectedSelfLoopCount--;\n  } else {\n    sourceData.outDegree--;\n    targetData.inDegree--;\n\n    if (isSelfLoop) graph._directedSelfLoopCount--;\n  }\n\n  // Clearing index\n  if (graph.multi) edgeData.detachMulti();\n  else edgeData.detach();\n\n  if (undirected) graph._undirectedSize--;\n  else graph._directedSize--;\n\n  // Emitting\n  graph.emit('edgeDropped', {\n    key: edgeData.key,\n    attributes,\n    source: sourceData.key,\n    target: targetData.key,\n    undirected\n  });\n}\n\n/**\n * Graph class\n *\n * @constructor\n * @param  {object}  [options] - Options:\n * @param  {boolean}   [allowSelfLoops] - Allow self loops?\n * @param  {string}    [type]           - Type of the graph.\n * @param  {boolean}   [map]            - Allow references as keys?\n * @param  {boolean}   [multi]          - Allow parallel edges?\n *\n * @throws {Error} - Will throw if the arguments are not valid.\n */\nexport default class Graph extends EventEmitter {\n  constructor(options) {\n    super();\n\n    //-- Solving options\n    options = assign({}, DEFAULTS, options);\n\n    // Enforcing options validity\n    if (typeof options.multi !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'multi' option. Expecting a boolean but got \"${options.multi}\".`\n      );\n\n    if (!TYPES.has(options.type))\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'type' option. Should be one of \"mixed\", \"directed\" or \"undirected\" but got \"${options.type}\".`\n      );\n\n    if (typeof options.allowSelfLoops !== 'boolean')\n      throw new InvalidArgumentsGraphError(\n        `Graph.constructor: invalid 'allowSelfLoops' option. Expecting a boolean but got \"${options.allowSelfLoops}\".`\n      );\n\n    //-- Private properties\n\n    // Utilities\n    const NodeDataClass =\n      options.type === 'mixed'\n        ? MixedNodeData\n        : options.type === 'directed'\n        ? DirectedNodeData\n        : UndirectedNodeData;\n\n    privateProperty(this, 'NodeDataClass', NodeDataClass);\n\n    // Internal edge key generator\n\n    // NOTE: this internal generator produce keys that are strings\n    // composed of a weird prefix, an incremental instance id starting from\n    // a random byte and finally an internal instance incremental id.\n    // All this to avoid intra-frame and cross-frame adversarial inputs\n    // that can force a single #.addEdge call to degenerate into a O(n)\n    // available key search loop.\n\n    // It also ensures that automatically generated edge keys are unlikely\n    // to produce collisions with arbitrary keys given by users.\n    const instancePrefix = 'geid_' + INSTANCE_ID() + '_';\n    let edgeId = 0;\n\n    const edgeKeyGenerator = () => {\n      let availableEdgeKey;\n\n      do {\n        availableEdgeKey = instancePrefix + edgeId++;\n      } while (this._edges.has(availableEdgeKey));\n\n      return availableEdgeKey;\n    };\n\n    // Indexes\n    privateProperty(this, '_attributes', {});\n    privateProperty(this, '_nodes', new Map());\n    privateProperty(this, '_edges', new Map());\n    privateProperty(this, '_directedSize', 0);\n    privateProperty(this, '_undirectedSize', 0);\n    privateProperty(this, '_directedSelfLoopCount', 0);\n    privateProperty(this, '_undirectedSelfLoopCount', 0);\n    privateProperty(this, '_edgeKeyGenerator', edgeKeyGenerator);\n\n    // Options\n    privateProperty(this, '_options', options);\n\n    // Emitter properties\n    EMITTER_PROPS.forEach(prop => privateProperty(this, prop, this[prop]));\n\n    //-- Properties readers\n    readOnlyProperty(this, 'order', () => this._nodes.size);\n    readOnlyProperty(this, 'size', () => this._edges.size);\n    readOnlyProperty(this, 'directedSize', () => this._directedSize);\n    readOnlyProperty(this, 'undirectedSize', () => this._undirectedSize);\n    readOnlyProperty(\n      this,\n      'selfLoopCount',\n      () => this._directedSelfLoopCount + this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'directedSelfLoopCount',\n      () => this._directedSelfLoopCount\n    );\n    readOnlyProperty(\n      this,\n      'undirectedSelfLoopCount',\n      () => this._undirectedSelfLoopCount\n    );\n    readOnlyProperty(this, 'multi', this._options.multi);\n    readOnlyProperty(this, 'type', this._options.type);\n    readOnlyProperty(this, 'allowSelfLoops', this._options.allowSelfLoops);\n    readOnlyProperty(this, 'implementation', () => 'graphology');\n  }\n\n  _resetInstanceCounters() {\n    this._directedSize = 0;\n    this._undirectedSize = 0;\n    this._directedSelfLoopCount = 0;\n    this._undirectedSelfLoopCount = 0;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Read\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning whether the given node is found in the graph.\n   *\n   * @param  {any}     node - The node.\n   * @return {boolean}\n   */\n  hasNode(node) {\n    return this._nodes.has('' + node);\n  }\n\n  /**\n   * Method returning whether the given directed edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasDirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'undirected') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && !edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      const edges = nodeData.out[target];\n\n      if (!edges) return false;\n\n      return this.multi ? !!edges.size : true;\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given undirected edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasUndirectedEdge(source, target) {\n    // Early termination\n    if (this.type === 'directed') return false;\n\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      const edgeData = this._edges.get(edge);\n\n      return !!edgeData && edgeData.undirected;\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      const edges = nodeData.undirected[target];\n\n      if (!edges) return false;\n\n      return this.multi ? !!edges.size : true;\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasDirectedEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning whether the given edge is found in the graph.\n   *\n   * Arity 1:\n   * @param  {any}     edge - The edge's key.\n   *\n   * Arity 2:\n   * @param  {any}     source - The edge's source.\n   * @param  {any}     target - The edge's target.\n   *\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the arguments are invalid.\n   */\n  hasEdge(source, target) {\n    if (arguments.length === 1) {\n      const edge = '' + source;\n\n      return this._edges.has(edge);\n    } else if (arguments.length === 2) {\n      source = '' + source;\n      target = '' + target;\n\n      // If the node source or the target is not in the graph we break\n      const nodeData = this._nodes.get(source);\n\n      if (!nodeData) return false;\n\n      // Is there a directed edge pointing toward target?\n      let edges = typeof nodeData.out !== 'undefined' && nodeData.out[target];\n\n      if (!edges)\n        edges =\n          typeof nodeData.undirected !== 'undefined' &&\n          nodeData.undirected[target];\n\n      if (!edges) return false;\n\n      return this.multi ? !!edges.size : true;\n    }\n\n    throw new InvalidArgumentsGraphError(\n      `Graph.hasEdge: invalid arity (${arguments.length}, instead of 1 or 2). You can either ask for an edge id or for the existence of an edge between a source & a target.`\n    );\n  }\n\n  /**\n   * Method returning the edge matching source & target in a directed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  directedEdge(source, target) {\n    if (this.type === 'undirected') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.directedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.directedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.directedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData = (sourceData.out && sourceData.out[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a undirected fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  undirectedEdge(source, target) {\n    if (this.type === 'directed') return;\n\n    source = '' + source;\n    target = '' + target;\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.undirectedEdge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.undirectedEdges instead.'\n      );\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.undirectedEdge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.undirected && sourceData.undirected[target]) || undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning the edge matching source & target in a mixed fashion.\n   *\n   * @param  {any} source - The edge's source.\n   * @param  {any} target - The edge's target.\n   *\n   * @return {any|undefined}\n   *\n   * @throws {Error} - Will throw if the graph is multi.\n   * @throws {Error} - Will throw if source or target doesn't exist.\n   */\n  edge(source, target) {\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.edge: this method is irrelevant with multigraphs since there might be multiple edges between source & target. See #.edges instead.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const sourceData = this._nodes.get(source);\n\n    if (!sourceData)\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${source}\" source node in the graph.`\n      );\n\n    if (!this._nodes.has(target))\n      throw new NotFoundGraphError(\n        `Graph.edge: could not find the \"${target}\" target node in the graph.`\n      );\n\n    const edgeData =\n      (sourceData.out && sourceData.out[target]) ||\n      (sourceData.undirected && sourceData.undirected[target]) ||\n      undefined;\n\n    if (edgeData) return edgeData.key;\n  }\n\n  /**\n   * Method returning whether two nodes are directed neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areDirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areDirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in || neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are out neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.out;\n  }\n\n  /**\n   * Method returning whether two nodes are in neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return false;\n\n    return neighbor in nodeData.in;\n  }\n\n  /**\n   * Method returning whether two nodes are undirected neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areUndirectedNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areUndirectedNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return false;\n\n    return neighbor in nodeData.undirected;\n  }\n\n  /**\n   * Method returning whether two nodes are neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in || neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are inbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areInboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areInboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.in) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether two nodes are outbound neighbors.\n   *\n   * @param  {any}     node     - The node's key.\n   * @param  {any}     neighbor - The neighbor's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  areOutboundNeighbors(node, neighbor) {\n    node = '' + node;\n    neighbor = '' + neighbor;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.areOutboundNeighbors: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type !== 'undirected') {\n      if (neighbor in nodeData.out) return true;\n    }\n\n    if (this.type !== 'directed') {\n      if (neighbor in nodeData.undirected) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning the given node's in degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree;\n  }\n\n  /**\n   * Method returning the given node's out degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    return nodeData.inDegree + nodeData.outDegree;\n  }\n\n  /**\n   * Method returning the given node's undirected degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    return nodeData.undirectedDegree;\n  }\n\n  /**\n   * Method returning the given node's inbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's outbound degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's directed degree.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degree(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degree: could not find the \"${node}\" node in the graph.`\n      );\n\n    let degree = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n    }\n\n    return degree;\n  }\n\n  /**\n   * Method returning the given node's in degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    const self = nodeData.in[node];\n    const loops = self ? (this.multi ? self.size : 1) : 0;\n\n    return nodeData.inDegree - loops;\n  }\n\n  /**\n   * Method returning the given node's out degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    const self = nodeData.out[node];\n    const loops = self ? (this.multi ? self.size : 1) : 0;\n\n    return nodeData.outDegree - loops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  directedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.directedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'undirected') return 0;\n\n    const self = nodeData.out[node];\n    const loops = self ? (this.multi ? self.size : 1) : 0;\n\n    return nodeData.inDegree + nodeData.outDegree - loops * 2;\n  }\n\n  /**\n   * Method returning the given node's undirected degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's in degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  undirectedDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.undirectedDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    if (this.type === 'directed') return 0;\n\n    const self = nodeData.undirected[node];\n    const loops = self ? (this.multi ? self.size : 1) : 0;\n\n    return nodeData.undirectedDegree - loops * 2;\n  }\n\n  /**\n   * Method returning the given node's inbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's inbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  inboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.inboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let self;\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n\n      self = nodeData.undirected[node];\n      loops += (self ? (this.multi ? self.size : 1) : 0) * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree;\n\n      self = nodeData.out[node];\n      loops += self ? (this.multi ? self.size : 1) : 0;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's outbound degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's outbound degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  outboundDegreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.outboundDegreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let self;\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n\n      self = nodeData.undirected[node];\n      loops += (self ? (this.multi ? self.size : 1) : 0) * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.outDegree;\n\n      self = nodeData.in[node];\n      loops += self ? (this.multi ? self.size : 1) : 0;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given node's directed degree without considering self loops.\n   *\n   * @param  {any}     node - The node's key.\n   * @return {number}       - The node's degree.\n   *\n   * @throws {Error} - Will throw if the node isn't in the graph.\n   */\n  degreeWithoutSelfLoops(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.degreeWithoutSelfLoops: could not find the \"${node}\" node in the graph.`\n      );\n\n    let self;\n    let degree = 0;\n    let loops = 0;\n\n    if (this.type !== 'directed') {\n      degree += nodeData.undirectedDegree;\n\n      self = nodeData.undirected[node];\n      loops += (self ? (this.multi ? self.size : 1) : 0) * 2;\n    }\n\n    if (this.type !== 'undirected') {\n      degree += nodeData.inDegree + nodeData.outDegree;\n\n      self = nodeData.out[node];\n      loops += (self ? (this.multi ? self.size : 1) : 0) * 2;\n    }\n\n    return degree - loops;\n  }\n\n  /**\n   * Method returning the given edge's source.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's source.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  source(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.source: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key;\n  }\n\n  /**\n   * Method returning the given edge's target.\n   *\n   * @param  {any} edge - The edge's key.\n   * @return {any}      - The edge's target.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  target(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.target: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.target.key;\n  }\n\n  /**\n   * Method returning the given edge's extremities.\n   *\n   * @param  {any}   edge - The edge's key.\n   * @return {array}      - The edge's extremities.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  extremities(edge) {\n    edge = '' + edge;\n\n    const edgeData = this._edges.get(edge);\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.extremities: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return [edgeData.source.key, edgeData.target.key];\n  }\n\n  /**\n   * Given a node & an edge, returns the other extremity of the edge.\n   *\n   * @param  {any}   node - The node's key.\n   * @param  {any}   edge - The edge's key.\n   * @return {any}        - The related node.\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph or if the\n   *                   edge & node are not related.\n   */\n  opposite(node, edge) {\n    node = '' + node;\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.opposite: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    const source = data.source.key;\n    const target = data.target.key;\n\n    if (node === source) return target;\n    if (node === target) return source;\n\n    throw new NotFoundGraphError(\n      `Graph.opposite: the \"${node}\" node is not attached to the \"${edge}\" edge (${source}, ${target}).`\n    );\n  }\n\n  /**\n   * Returns whether the given edge has the given node as extremity.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @param  {any}     node - The node's key.\n   * @return {boolean}      - The related node.\n   *\n   * @throws {Error} - Will throw if either the node or the edge isn't in the graph.\n   */\n  hasExtremity(edge, node) {\n    edge = '' + edge;\n    node = '' + node;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.hasExtremity: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source.key === node || data.target.key === node;\n  }\n\n  /**\n   * Method returning whether the given edge is undirected.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isUndirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isUndirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is directed.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isDirected(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isDirected: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return !data.undirected;\n  }\n\n  /**\n   * Method returning whether the given edge is a self loop.\n   *\n   * @param  {any}     edge - The edge's key.\n   * @return {boolean}\n   *\n   * @throws {Error} - Will throw if the edge isn't in the graph.\n   */\n  isSelfLoop(edge) {\n    edge = '' + edge;\n\n    const data = this._edges.get(edge);\n\n    if (!data)\n      throw new NotFoundGraphError(\n        `Graph.isSelfLoop: could not find the \"${edge}\" edge in the graph.`\n      );\n\n    return data.source === data.target;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Mutation\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to add a node to the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   *\n   * @throws {Error} - Will throw if the given node already exist.\n   * @throws {Error} - Will throw if the given attributes are not an object.\n   */\n  addNode(node, attributes) {\n    const nodeData = addNode(this, node, attributes);\n\n    return nodeData.key;\n  }\n\n  /**\n   * Method used to merge a node into the graph.\n   *\n   * @param  {any}    node         - The node.\n   * @param  {object} [attributes] - Optional attributes.\n   * @return {any}                 - The node.\n   */\n  mergeNode(node, attributes) {\n    if (attributes && !isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        `Graph.mergeNode: invalid attributes. Expecting an object but got \"${attributes}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n    attributes = attributes || {};\n\n    // If the node already exists, we merge the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (attributes) {\n        assign(data.attributes, attributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'merge',\n          key: node,\n          attributes: data.attributes,\n          data: attributes\n        });\n      }\n      return [node, false];\n    }\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to add a node if it does not exist in the graph or else to\n   * update its attributes using a function.\n   *\n   * @param  {any}      node      - The node.\n   * @param  {function} [updater] - Optional updater function.\n   * @return {any}                - The node.\n   */\n  updateNode(node, updater) {\n    if (updater && typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        `Graph.updateNode: invalid updater function. Expecting a function but got \"${updater}\"`\n      );\n\n    // String coercion\n    node = '' + node;\n\n    // If the node already exists, we update the attributes\n    let data = this._nodes.get(node);\n\n    if (data) {\n      if (updater) {\n        const oldAttributes = data.attributes;\n        data.attributes = updater(oldAttributes);\n\n        this.emit('nodeAttributesUpdated', {\n          type: 'replace',\n          key: node,\n          attributes: data.attributes\n        });\n      }\n      return [node, false];\n    }\n\n    const attributes = updater ? updater({}) : {};\n\n    data = new this.NodeDataClass(node, attributes);\n\n    // Adding the node to internal register\n    this._nodes.set(node, data);\n\n    // Emitting\n    this.emit('nodeAdded', {\n      key: node,\n      attributes\n    });\n\n    return [node, true];\n  }\n\n  /**\n   * Method used to drop a single node & all its attached edges from the graph.\n   *\n   * @param  {any}    node - The node.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the node doesn't exist.\n   */\n  dropNode(node) {\n    node = '' + node;\n\n    const nodeData = this._nodes.get(node);\n\n    if (!nodeData)\n      throw new NotFoundGraphError(\n        `Graph.dropNode: could not find the \"${node}\" node in the graph.`\n      );\n\n    let edgeData;\n\n    // Removing attached edges\n    // NOTE: we could be faster here, but this is such a pain to maintain\n    if (this.type !== 'undirected') {\n      for (const neighbor in nodeData.out) {\n        edgeData = nodeData.out[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n\n      for (const neighbor in nodeData.in) {\n        edgeData = nodeData.in[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    if (this.type !== 'directed') {\n      for (const neighbor in nodeData.undirected) {\n        edgeData = nodeData.undirected[neighbor];\n\n        do {\n          dropEdgeFromData(this, edgeData);\n          edgeData = edgeData.next;\n        } while (edgeData);\n      }\n    }\n\n    // Dropping the node from the register\n    this._nodes.delete(node);\n\n    // Emitting\n    this.emit('nodeDropped', {\n      key: node,\n      attributes: nodeData.attributes\n    });\n  }\n\n  /**\n   * Method used to drop a single edge from the graph.\n   *\n   * Arity 1:\n   * @param  {any}    edge - The edge.\n   *\n   * Arity 2:\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropEdge(edge) {\n    let edgeData;\n\n    if (arguments.length > 1) {\n      const source = '' + arguments[0];\n      const target = '' + arguments[1];\n\n      edgeData = getMatchingEdge(this, source, target, this.type);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${source}\" -> \"${target}\" edge in the graph.`\n        );\n    } else {\n      edge = '' + edge;\n\n      edgeData = this._edges.get(edge);\n\n      if (!edgeData)\n        throw new NotFoundGraphError(\n          `Graph.dropEdge: could not find the \"${edge}\" edge in the graph.`\n        );\n    }\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single directed edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropDirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: it does not make sense to try and drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropDirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    source = '' + source;\n    target = '' + target;\n\n    const edgeData = getMatchingEdge(this, source, target, 'directed');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropDirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to drop a single undirected edge from the graph.\n   *\n   * @param  {any}    source - Source node.\n   * @param  {any}    target - Target node.\n   *\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if the edge doesn't exist.\n   */\n  dropUndirectedEdge(source, target) {\n    if (arguments.length < 2)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: it does not make sense to drop a directed edge by key. What if the edge with this key is undirected? Use #.dropEdge for this purpose instead.'\n      );\n\n    if (this.multi)\n      throw new UsageGraphError(\n        'Graph.dropUndirectedEdge: cannot use a {source,target} combo when dropping an edge in a MultiGraph since we cannot infer the one you want to delete as there could be multiple ones.'\n      );\n\n    const edgeData = getMatchingEdge(this, source, target, 'undirected');\n\n    if (!edgeData)\n      throw new NotFoundGraphError(\n        `Graph.dropUndirectedEdge: could not find a \"${source}\" -> \"${target}\" edge in the graph.`\n      );\n\n    dropEdgeFromData(this, edgeData);\n\n    return this;\n  }\n\n  /**\n   * Method used to remove every edge & every node from the graph.\n   *\n   * @return {Graph}\n   */\n  clear() {\n    // Clearing edges\n    this._edges.clear();\n\n    // Clearing nodes\n    this._nodes.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('cleared');\n  }\n\n  /**\n   * Method used to remove every edge from the graph.\n   *\n   * @return {Graph}\n   */\n  clearEdges() {\n    // Clearing structure index\n    const iterator = this._nodes.values();\n\n    let step;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      step.value.clear();\n    }\n\n    // Clearing edges\n    this._edges.clear();\n\n    // Reset counters\n    this._resetInstanceCounters();\n\n    // Emitting\n    this.emit('edgesCleared');\n  }\n\n  /**---------------------------------------------------------------------------\n   * Attributes-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning the desired graph's attribute.\n   *\n   * @param  {string} name - Name of the attribute.\n   * @return {any}\n   */\n  getAttribute(name) {\n    return this._attributes[name];\n  }\n\n  /**\n   * Method returning the graph's attributes.\n   *\n   * @return {object}\n   */\n  getAttributes() {\n    return this._attributes;\n  }\n\n  /**\n   * Method returning whether the graph has the desired attribute.\n   *\n   * @param  {string}  name - Name of the attribute.\n   * @return {boolean}\n   */\n  hasAttribute(name) {\n    return this._attributes.hasOwnProperty(name);\n  }\n\n  /**\n   * Method setting a value for the desired graph's attribute.\n   *\n   * @param  {string}  name  - Name of the attribute.\n   * @param  {any}     value - Value for the attribute.\n   * @return {Graph}\n   */\n  setAttribute(name, value) {\n    this._attributes[name] = value;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method using a function to update the desired graph's attribute's value.\n   *\n   * @param  {string}   name    - Name of the attribute.\n   * @param  {function} updater - Function use to update the attribute's value.\n   * @return {Graph}\n   */\n  updateAttribute(name, updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttribute: updater should be a function.'\n      );\n\n    const value = this._attributes[name];\n\n    this._attributes[name] = updater(value);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'set',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method removing the desired graph's attribute.\n   *\n   * @param  {string} name  - Name of the attribute.\n   * @return {Graph}\n   */\n  removeAttribute(name) {\n    delete this._attributes[name];\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'remove',\n      attributes: this._attributes,\n      name\n    });\n\n    return this;\n  }\n\n  /**\n   * Method replacing the graph's attributes.\n   *\n   * @param  {object} attributes - New attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  replaceAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.replaceAttributes: provided attributes are not a plain object.'\n      );\n\n    this._attributes = attributes;\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'replace',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method merging the graph's attributes.\n   *\n   * @param  {object} attributes - Attributes to merge.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given attributes are not a plain object.\n   */\n  mergeAttributes(attributes) {\n    if (!isPlainObject(attributes))\n      throw new InvalidArgumentsGraphError(\n        'Graph.mergeAttributes: provided attributes are not a plain object.'\n      );\n\n    assign(this._attributes, attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'merge',\n      attributes: this._attributes,\n      data: attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method updating the graph's attributes.\n   *\n   * @param  {function} updater - Function used to update the attributes.\n   * @return {Graph}\n   *\n   * @throws {Error} - Will throw if given updater is not a function.\n   */\n  updateAttributes(updater) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateAttributes: provided updater is not a function.'\n      );\n\n    this._attributes = updater(this._attributes);\n\n    // Emitting\n    this.emit('attributesUpdated', {\n      type: 'update',\n      attributes: this._attributes\n    });\n\n    return this;\n  }\n\n  /**\n   * Method used to update each node's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachNodeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachNodeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      nodeData.attributes = updater(nodeData.key, nodeData.attributes);\n    }\n\n    this.emit('eachNodeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**\n   * Method used to update each edge's attributes using the given function.\n   *\n   * @param {function}  updater - Updater function to use.\n   * @param {object}    [hints] - Optional hints.\n   */\n  updateEachEdgeAttributes(updater, hints) {\n    if (typeof updater !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: expecting an updater function.'\n      );\n\n    if (hints && !validateHints(hints))\n      throw new InvalidArgumentsGraphError(\n        'Graph.updateEachEdgeAttributes: invalid hints. Expecting an object having the following shape: {attributes?: [string]}'\n      );\n\n    const iterator = this._edges.values();\n\n    let step, edgeData, sourceData, targetData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n      sourceData = edgeData.source;\n      targetData = edgeData.target;\n\n      edgeData.attributes = updater(\n        edgeData.key,\n        edgeData.attributes,\n        sourceData.key,\n        targetData.key,\n        sourceData.attributes,\n        targetData.attributes,\n        edgeData.undirected\n      );\n    }\n\n    this.emit('eachEdgeAttributesUpdated', {\n      hints: hints ? hints : null\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Iteration-related methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method iterating over the graph's adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, false, this, callback);\n  }\n  forEachAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, false, true, this, callback);\n  }\n\n  /**\n   * Method iterating over the graph's assymetric adjacency using the given callback.\n   *\n   * @param  {function}  callback - Callback to use.\n   */\n  forEachAssymetricAdjacencyEntry(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntry: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, false, this, callback);\n  }\n  forEachAssymetricAdjacencyEntryWithOrphans(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachAssymetricAdjacencyEntryWithOrphans: expecting a callback.'\n      );\n\n    forEachAdjacency(false, true, true, this, callback);\n  }\n\n  /**\n   * Method returning the list of the graph's nodes.\n   *\n   * @return {array} - The nodes.\n   */\n  nodes() {\n    if (typeof Array.from === 'function') return Array.from(this._nodes.keys());\n\n    return take(this._nodes.keys(), this._nodes.size);\n  }\n\n  /**\n   * Method iterating over the graph's nodes using the given callback.\n   *\n   * @param  {function}  callback - Callback (key, attributes, index).\n   */\n  forEachNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.forEachNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      callback(nodeData.key, nodeData.attributes);\n    }\n  }\n\n  /**\n   * Method iterating attempting to find a node matching the given predicate\n   * function.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  findNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.findNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return nodeData.key;\n    }\n\n    return;\n  }\n\n  /**\n   * Method mapping nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  mapNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.mapNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = new Array(this.order);\n    let i = 0;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      result[i++] = callback(nodeData.key, nodeData.attributes);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method returning whether some node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  someNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.someNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes)) return true;\n    }\n\n    return false;\n  }\n\n  /**\n   * Method returning whether all node verify the given predicate.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  everyNode(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.everyNode: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (!callback(nodeData.key, nodeData.attributes)) return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Method filtering nodes.\n   *\n   * @param  {function}  callback - Callback (key, attributes).\n   */\n  filterNodes(callback) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.filterNodes: expecting a callback.'\n      );\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    const result = [];\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n\n      if (callback(nodeData.key, nodeData.attributes))\n        result.push(nodeData.key);\n    }\n\n    return result;\n  }\n\n  /**\n   * Method reducing nodes.\n   *\n   * @param  {function}  callback - Callback (accumulator, key, attributes).\n   */\n  reduceNodes(callback, initialValue) {\n    if (typeof callback !== 'function')\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: expecting a callback.'\n      );\n\n    if (arguments.length < 2)\n      throw new InvalidArgumentsGraphError(\n        'Graph.reduceNodes: missing initial value. You must provide it because the callback takes more than one argument and we cannot infer the initial value from the first iteration, as you could with a simple array.'\n      );\n\n    let accumulator = initialValue;\n\n    const iterator = this._nodes.values();\n\n    let step, nodeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      nodeData = step.value;\n      accumulator = callback(accumulator, nodeData.key, nodeData.attributes);\n    }\n\n    return accumulator;\n  }\n\n  /**\n   * Method returning an iterator over the graph's node entries.\n   *\n   * @return {Iterator}\n   */\n  nodeEntries() {\n    const iterator = this._nodes.values();\n\n    return new Iterator(() => {\n      const step = iterator.next();\n\n      if (step.done) return step;\n\n      const data = step.value;\n\n      return {\n        value: {node: data.key, attributes: data.attributes},\n        done: false\n      };\n    });\n  }\n\n  /**---------------------------------------------------------------------------\n   * Serialization\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used to export the whole graph.\n   *\n   * @return {object} - The serialized graph.\n   */\n  export() {\n    const nodes = new Array(this._nodes.size);\n\n    let i = 0;\n\n    this._nodes.forEach((data, key) => {\n      nodes[i++] = serializeNode(key, data);\n    });\n\n    const edges = new Array(this._edges.size);\n\n    i = 0;\n\n    this._edges.forEach((data, key) => {\n      edges[i++] = serializeEdge(this.type, key, data);\n    });\n\n    return {\n      options: {\n        type: this.type,\n        multi: this.multi,\n        allowSelfLoops: this.allowSelfLoops\n      },\n      attributes: this.getAttributes(),\n      nodes,\n      edges\n    };\n  }\n\n  /**\n   * Method used to import a serialized graph.\n   *\n   * @param  {object|Graph} data  - The serialized graph.\n   * @param  {boolean}      merge - Whether to merge data.\n   * @return {Graph}              - Returns itself for chaining.\n   */\n  import(data, merge = false) {\n    // Importing a Graph instance directly\n    if (data instanceof Graph) {\n      // Nodes\n      data.forEachNode((n, a) => {\n        if (merge) this.mergeNode(n, a);\n        else this.addNode(n, a);\n      });\n\n      // Edges\n      data.forEachEdge((e, a, s, t, _sa, _ta, u) => {\n        if (merge) {\n          if (u) this.mergeUndirectedEdgeWithKey(e, s, t, a);\n          else this.mergeDirectedEdgeWithKey(e, s, t, a);\n        } else {\n          if (u) this.addUndirectedEdgeWithKey(e, s, t, a);\n          else this.addDirectedEdgeWithKey(e, s, t, a);\n        }\n      });\n\n      return this;\n    }\n\n    // Importing a serialized graph\n    if (!isPlainObject(data))\n      throw new InvalidArgumentsGraphError(\n        'Graph.import: invalid argument. Expecting a serialized graph or, alternatively, a Graph instance.'\n      );\n\n    if (data.attributes) {\n      if (!isPlainObject(data.attributes))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid attributes. Expecting a plain object.'\n        );\n\n      if (merge) this.mergeAttributes(data.attributes);\n      else this.replaceAttributes(data.attributes);\n    }\n\n    let i, l, list, node, edge;\n\n    if (data.nodes) {\n      list = data.nodes;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid nodes. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        node = list[i];\n\n        // Validating\n        validateSerializedNode(node);\n\n        // Adding the node\n        const {key, attributes} = node;\n\n        if (merge) this.mergeNode(key, attributes);\n        else this.addNode(key, attributes);\n      }\n    }\n\n    if (data.edges) {\n      let undirectedByDefault = false;\n\n      if (this.type === 'undirected') {\n        undirectedByDefault = true;\n      }\n\n      list = data.edges;\n\n      if (!Array.isArray(list))\n        throw new InvalidArgumentsGraphError(\n          'Graph.import: invalid edges. Expecting an array.'\n        );\n\n      for (i = 0, l = list.length; i < l; i++) {\n        edge = list[i];\n\n        // Validating\n        validateSerializedEdge(edge);\n\n        // Adding the edge\n        const {\n          source,\n          target,\n          attributes,\n          undirected = undirectedByDefault\n        } = edge;\n\n        let method;\n\n        if ('key' in edge) {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdgeWithKey\n              : this.mergeDirectedEdgeWithKey\n            : undirected\n            ? this.addUndirectedEdgeWithKey\n            : this.addDirectedEdgeWithKey;\n\n          method.call(this, edge.key, source, target, attributes);\n        } else {\n          method = merge\n            ? undirected\n              ? this.mergeUndirectedEdge\n              : this.mergeDirectedEdge\n            : undirected\n            ? this.addUndirectedEdge\n            : this.addDirectedEdge;\n\n          method.call(this, source, target, attributes);\n        }\n      }\n    }\n\n    return this;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Utils\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method returning a null copy of the graph, i.e. a graph without nodes\n   * & edges but with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The null copy.\n   */\n  nullCopy(options) {\n    const graph = new Graph(assign({}, this._options, options));\n    graph.replaceAttributes(assign({}, this.getAttributes()));\n    return graph;\n  }\n\n  /**\n   * Method returning an empty copy of the graph, i.e. a graph without edges but\n   * with the exact same options.\n   *\n   * @param  {object} options - Options to merge with the current ones.\n   * @return {Graph}          - The empty copy.\n   */\n  emptyCopy(options) {\n    const graph = this.nullCopy(options);\n\n    this._nodes.forEach((nodeData, key) => {\n      const attributes = assign({}, nodeData.attributes);\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      nodeData = new graph.NodeDataClass(key, attributes);\n      graph._nodes.set(key, nodeData);\n    });\n\n    return graph;\n  }\n\n  /**\n   * Method returning an exact copy of the graph.\n   *\n   * @param  {object} options - Upgrade options.\n   * @return {Graph}          - The copy.\n   */\n  copy(options) {\n    options = options || {};\n\n    if (\n      typeof options.type === 'string' &&\n      options.type !== this.type &&\n      options.type !== 'mixed'\n    )\n      throw new UsageGraphError(\n        `Graph.copy: cannot create an incompatible copy from \"${this.type}\" type to \"${options.type}\" because this would mean losing information about the current graph.`\n      );\n\n    if (\n      typeof options.multi === 'boolean' &&\n      options.multi !== this.multi &&\n      options.multi !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy by downgrading a multi graph to a simple one because this would mean losing information about the current graph.'\n      );\n\n    if (\n      typeof options.allowSelfLoops === 'boolean' &&\n      options.allowSelfLoops !== this.allowSelfLoops &&\n      options.allowSelfLoops !== true\n    )\n      throw new UsageGraphError(\n        'Graph.copy: cannot create an incompatible copy from a graph allowing self loops to one that does not because this would mean losing information about the current graph.'\n      );\n\n    const graph = this.emptyCopy(options);\n\n    const iterator = this._edges.values();\n\n    let step, edgeData;\n\n    while (((step = iterator.next()), step.done !== true)) {\n      edgeData = step.value;\n\n      // NOTE: no need to emit events since user cannot access the instance yet\n      addEdge(\n        graph,\n        'copy',\n        false,\n        edgeData.undirected,\n        edgeData.key,\n        edgeData.source.key,\n        edgeData.target.key,\n        assign({}, edgeData.attributes)\n      );\n    }\n\n    return graph;\n  }\n\n  /**---------------------------------------------------------------------------\n   * Known methods\n   **---------------------------------------------------------------------------\n   */\n\n  /**\n   * Method used by JavaScript to perform JSON serialization.\n   *\n   * @return {object} - The serialized graph.\n   */\n  toJSON() {\n    return this.export();\n  }\n\n  /**\n   * Method returning [object Graph].\n   */\n  toString() {\n    return '[object Graph]';\n  }\n\n  /**\n   * Method used internally by node's console to display a custom object.\n   *\n   * @return {object} - Formatted object representation of the graph.\n   */\n  inspect() {\n    const nodes = {};\n    this._nodes.forEach((data, key) => {\n      nodes[key] = data.attributes;\n    });\n\n    const edges = {},\n      multiIndex = {};\n\n    this._edges.forEach((data, key) => {\n      const direction = data.undirected ? '--' : '->';\n\n      let label = '';\n\n      let source = data.source.key;\n      let target = data.target.key;\n      let tmp;\n\n      if (data.undirected && source > target) {\n        tmp = source;\n        source = target;\n        target = tmp;\n      }\n\n      const desc = `(${source})${direction}(${target})`;\n\n      if (!key.startsWith('geid_')) {\n        label += `[${key}]: `;\n      } else if (this.multi) {\n        if (typeof multiIndex[desc] === 'undefined') {\n          multiIndex[desc] = 0;\n        } else {\n          multiIndex[desc]++;\n        }\n\n        label += `${multiIndex[desc]}. `;\n      }\n\n      label += desc;\n\n      edges[label] = data.attributes;\n    });\n\n    const dummy = {};\n\n    for (const k in this) {\n      if (\n        this.hasOwnProperty(k) &&\n        !EMITTER_PROPS.has(k) &&\n        typeof this[k] !== 'function' &&\n        typeof k !== 'symbol'\n      )\n        dummy[k] = this[k];\n    }\n\n    dummy.attributes = this._attributes;\n    dummy.nodes = nodes;\n    dummy.edges = edges;\n\n    privateProperty(dummy, 'constructor', this.constructor);\n\n    return dummy;\n  }\n}\n\n/**\n * Attaching methods to the prototype.\n *\n * Here, we are attaching a wide variety of methods to the Graph class'\n * prototype when those are very numerous and when their creation is\n * abstracted.\n */\n\n/**\n * Attaching custom inspect method for node >= 10.\n */\nif (typeof Symbol !== 'undefined')\n  Graph.prototype[Symbol.for('nodejs.util.inspect.custom')] =\n    Graph.prototype.inspect;\n\n/**\n * Related to edge addition.\n */\nEDGE_ADD_METHODS.forEach(method => {\n  ['add', 'merge', 'update'].forEach(verb => {\n    const name = method.name(verb);\n    const fn = verb === 'add' ? addEdge : mergeEdge;\n\n    if (method.generateKey) {\n      Graph.prototype[name] = function (source, target, attributes) {\n        return fn(\n          this,\n          name,\n          true,\n          (method.type || this.type) === 'undirected',\n          null,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    } else {\n      Graph.prototype[name] = function (edge, source, target, attributes) {\n        return fn(\n          this,\n          name,\n          false,\n          (method.type || this.type) === 'undirected',\n          edge,\n          source,\n          target,\n          attributes,\n          verb === 'update'\n        );\n      };\n    }\n  });\n});\n\n/**\n * Attributes-related.\n */\nattachNodeAttributesMethods(Graph);\nattachEdgeAttributesMethods(Graph);\n\n/**\n * Edge iteration-related.\n */\nattachEdgeIterationMethods(Graph);\n\n/**\n * Neighbor iteration-related.\n */\nattachNeighborIterationMethods(Graph);\n","/**\n * Graphology Helper Classes\n * ==========================\n *\n * Building some higher-order classes instantiating the graph with\n * predefinite options.\n */\nimport {assign} from './utils';\nimport Graph from './graph';\n\nimport {\n  InvalidArgumentsGraphError,\n  NotFoundGraphError,\n  UsageGraphError\n} from './errors';\n\n/**\n * Alternative constructors.\n */\nclass DirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'DirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass UndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected'}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== false)\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent indication that the graph should be multi in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'UndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiDirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'directed', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'directed')\n      throw new InvalidArgumentsGraphError(\n        'MultiDirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\nclass MultiUndirectedGraph extends Graph {\n  constructor(options) {\n    const finalOptions = assign({type: 'undirected', multi: true}, options);\n\n    if ('multi' in finalOptions && finalOptions.multi !== true)\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent indication that the graph should be simple in given options!'\n      );\n\n    if (finalOptions.type !== 'undirected')\n      throw new InvalidArgumentsGraphError(\n        'MultiUndirectedGraph.from: inconsistent \"' +\n          finalOptions.type +\n          '\" type in given options!'\n      );\n\n    super(finalOptions);\n  }\n}\n\n/**\n * Attaching static #.from method to each of the constructors.\n */\nfunction attachStaticFromMethod(Class) {\n  /**\n   * Builds a graph from serialized data or another graph's data.\n   *\n   * @param  {Graph|SerializedGraph} data      - Hydratation data.\n   * @param  {object}                [options] - Options.\n   * @return {Class}\n   */\n  Class.from = function (data, options) {\n    // Merging given options with serialized ones\n    const finalOptions = assign({}, data.options, options);\n\n    const instance = new Class(finalOptions);\n    instance.import(data);\n\n    return instance;\n  };\n}\n\nattachStaticFromMethod(Graph);\nattachStaticFromMethod(DirectedGraph);\nattachStaticFromMethod(UndirectedGraph);\nattachStaticFromMethod(MultiGraph);\nattachStaticFromMethod(MultiDirectedGraph);\nattachStaticFromMethod(MultiUndirectedGraph);\n\nGraph.Graph = Graph;\nGraph.DirectedGraph = DirectedGraph;\nGraph.UndirectedGraph = UndirectedGraph;\nGraph.MultiGraph = MultiGraph;\nGraph.MultiDirectedGraph = MultiDirectedGraph;\nGraph.MultiUndirectedGraph = MultiUndirectedGraph;\n\nGraph.InvalidArgumentsGraphError = InvalidArgumentsGraphError;\nGraph.NotFoundGraphError = NotFoundGraphError;\nGraph.UsageGraphError = UsageGraphError;\n\nexport {\n  Graph,\n  DirectedGraph,\n  UndirectedGraph,\n  MultiGraph,\n  MultiDirectedGraph,\n  MultiUndirectedGraph\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js Camera Class\n * ======================\n *\n * Class designed to store camera information & used to update it.\n * @module\n */\nvar animate_1 = require(\"../utils/animate\");\nvar easings_1 = __importDefault(require(\"../utils/easings\"));\nvar utils_1 = require(\"../utils\");\nvar types_1 = require(\"../types\");\n/**\n * Defaults.\n */\nvar DEFAULT_ZOOMING_RATIO = 1.5;\n/**\n * Camera class\n *\n * @constructor\n */\nvar Camera = /** @class */ (function (_super) {\n    __extends(Camera, _super);\n    function Camera() {\n        var _this = _super.call(this) || this;\n        _this.x = 0.5;\n        _this.y = 0.5;\n        _this.angle = 0;\n        _this.ratio = 1;\n        _this.minRatio = null;\n        _this.maxRatio = null;\n        _this.nextFrame = null;\n        _this.previousState = null;\n        _this.enabled = true;\n        // State\n        _this.previousState = _this.getState();\n        return _this;\n    }\n    /**\n     * Static method used to create a Camera object with a given state.\n     *\n     * @param state\n     * @return {Camera}\n     */\n    Camera.from = function (state) {\n        var camera = new Camera();\n        return camera.setState(state);\n    };\n    /**\n     * Method used to enable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.enable = function () {\n        this.enabled = true;\n        return this;\n    };\n    /**\n     * Method used to disable the camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.disable = function () {\n        this.enabled = false;\n        return this;\n    };\n    /**\n     * Method used to retrieve the camera's current state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getState = function () {\n        return {\n            x: this.x,\n            y: this.y,\n            angle: this.angle,\n            ratio: this.ratio,\n        };\n    };\n    /**\n     * Method used to check whether the camera has the given state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.hasState = function (state) {\n        return this.x === state.x && this.y === state.y && this.ratio === state.ratio && this.angle === state.angle;\n    };\n    /**\n     * Method used to retrieve the camera's previous state.\n     *\n     * @return {object}\n     */\n    Camera.prototype.getPreviousState = function () {\n        var state = this.previousState;\n        if (!state)\n            return null;\n        return {\n            x: state.x,\n            y: state.y,\n            angle: state.angle,\n            ratio: state.ratio,\n        };\n    };\n    /**\n     * Method used to check minRatio and maxRatio values.\n     *\n     * @param ratio\n     * @return {number}\n     */\n    Camera.prototype.getBoundedRatio = function (ratio) {\n        var r = ratio;\n        if (typeof this.minRatio === \"number\")\n            r = Math.max(r, this.minRatio);\n        if (typeof this.maxRatio === \"number\")\n            r = Math.min(r, this.maxRatio);\n        return r;\n    };\n    /**\n     * Method used to check various things to return a legit state candidate.\n     *\n     * @param state\n     * @return {object}\n     */\n    Camera.prototype.validateState = function (state) {\n        var validatedState = {};\n        if (typeof state.x === \"number\")\n            validatedState.x = state.x;\n        if (typeof state.y === \"number\")\n            validatedState.y = state.y;\n        if (typeof state.angle === \"number\")\n            validatedState.angle = state.angle;\n        if (typeof state.ratio === \"number\")\n            validatedState.ratio = this.getBoundedRatio(state.ratio);\n        return validatedState;\n    };\n    /**\n     * Method used to check whether the camera is currently being animated.\n     *\n     * @return {boolean}\n     */\n    Camera.prototype.isAnimated = function () {\n        return !!this.nextFrame;\n    };\n    /**\n     * Method used to set the camera's state.\n     *\n     * @param  {object} state - New state.\n     * @return {Camera}\n     */\n    Camera.prototype.setState = function (state) {\n        if (!this.enabled)\n            return this;\n        // TODO: update by function\n        // Keeping track of last state\n        this.previousState = this.getState();\n        var validState = this.validateState(state);\n        if (typeof validState.x === \"number\")\n            this.x = validState.x;\n        if (typeof validState.y === \"number\")\n            this.y = validState.y;\n        if (typeof validState.angle === \"number\")\n            this.angle = validState.angle;\n        if (typeof validState.ratio === \"number\")\n            this.ratio = validState.ratio;\n        // Emitting\n        if (!this.hasState(this.previousState))\n            this.emit(\"updated\", this.getState());\n        return this;\n    };\n    /**\n     * Method used to animate the camera.\n     *\n     * @param  {object}                    state      - State to reach eventually.\n     * @param  {object}                    opts       - Options:\n     * @param  {number}                      duration - Duration of the animation.\n     * @param  {string | number => number}   easing   - Easing function or name of an existing one\n     * @param  {function}                  callback   - Callback\n     */\n    Camera.prototype.animate = function (state, opts, callback) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var options = Object.assign({}, animate_1.ANIMATE_DEFAULTS, opts);\n        var validState = this.validateState(state);\n        var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n        // State\n        var start = Date.now(), initialState = this.getState();\n        // Function performing the animation\n        var fn = function () {\n            var t = (Date.now() - start) / options.duration;\n            // The animation is over:\n            if (t >= 1) {\n                _this.nextFrame = null;\n                _this.setState(validState);\n                if (_this.animationCallback) {\n                    _this.animationCallback.call(null);\n                    _this.animationCallback = undefined;\n                }\n                return;\n            }\n            var coefficient = easing(t);\n            var newState = {};\n            if (typeof validState.x === \"number\")\n                newState.x = initialState.x + (validState.x - initialState.x) * coefficient;\n            if (typeof validState.y === \"number\")\n                newState.y = initialState.y + (validState.y - initialState.y) * coefficient;\n            if (typeof validState.angle === \"number\")\n                newState.angle = initialState.angle + (validState.angle - initialState.angle) * coefficient;\n            if (typeof validState.ratio === \"number\")\n                newState.ratio = initialState.ratio + (validState.ratio - initialState.ratio) * coefficient;\n            _this.setState(newState);\n            _this.nextFrame = (0, utils_1.requestFrame)(fn);\n        };\n        if (this.nextFrame) {\n            (0, utils_1.cancelFrame)(this.nextFrame);\n            if (this.animationCallback)\n                this.animationCallback.call(null);\n            this.nextFrame = (0, utils_1.requestFrame)(fn);\n        }\n        else {\n            fn();\n        }\n        this.animationCallback = callback;\n    };\n    /**\n     * Method used to zoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     * @return {function}\n     */\n    Camera.prototype.animatedZoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio / DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio / factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio / (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to unzoom the camera.\n     *\n     * @param  {number|object} factorOrOptions - Factor or options.\n     */\n    Camera.prototype.animatedUnzoom = function (factorOrOptions) {\n        if (!factorOrOptions) {\n            this.animate({ ratio: this.ratio * DEFAULT_ZOOMING_RATIO });\n        }\n        else {\n            if (typeof factorOrOptions === \"number\")\n                return this.animate({ ratio: this.ratio * factorOrOptions });\n            else\n                this.animate({\n                    ratio: this.ratio * (factorOrOptions.factor || DEFAULT_ZOOMING_RATIO),\n                }, factorOrOptions);\n        }\n    };\n    /**\n     * Method used to reset the camera.\n     *\n     * @param  {object} options - Options.\n     */\n    Camera.prototype.animatedReset = function (options) {\n        this.animate({\n            x: 0.5,\n            y: 0.5,\n            ratio: 1,\n            angle: 0,\n        }, options);\n    };\n    /**\n     * Returns a new Camera instance, with the same state as the current camera.\n     *\n     * @return {Camera}\n     */\n    Camera.prototype.copy = function () {\n        return Camera.from(this.getState());\n    };\n    return Camera;\n}(types_1.TypedEventEmitter));\nexports.default = Camera;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getWheelDelta = exports.getTouchCoords = exports.getTouchesArray = exports.getWheelCoords = exports.getMouseCoords = exports.getPosition = void 0;\n/**\n * Sigma.js Captor Class\n * ======================\n * @module\n */\nvar types_1 = require(\"../../types\");\n/**\n * Captor utils functions\n * ======================\n */\n/**\n * Extract the local X and Y coordinates from a mouse event or touch object. If\n * a DOM element is given, it uses this element's offset to compute the position\n * (this allows using events that are not bound to the container itself and\n * still have a proper position).\n *\n * @param  {event}       e - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {number}      The local Y value of the mouse.\n */\nfunction getPosition(e, dom) {\n    var bbox = dom.getBoundingClientRect();\n    return {\n        x: e.clientX - bbox.left,\n        y: e.clientY - bbox.top,\n    };\n}\nexports.getPosition = getPosition;\n/**\n * Convert mouse coords to sigma coords.\n *\n * @param  {event}       e   - A mouse event or touch object.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getMouseCoords(e, dom) {\n    var res = __assign(__assign({}, getPosition(e, dom)), { sigmaDefaultPrevented: false, preventSigmaDefault: function () {\n            res.sigmaDefaultPrevented = true;\n        }, original: e });\n    return res;\n}\nexports.getMouseCoords = getMouseCoords;\n/**\n * Convert mouse wheel event coords to sigma coords.\n *\n * @param  {event}       e   - A wheel mouse event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getWheelCoords(e, dom) {\n    return __assign(__assign({}, getMouseCoords(e, dom)), { delta: getWheelDelta(e) });\n}\nexports.getWheelCoords = getWheelCoords;\nvar MAX_TOUCHES = 2;\nfunction getTouchesArray(touches) {\n    var arr = [];\n    for (var i = 0, l = Math.min(touches.length, MAX_TOUCHES); i < l; i++)\n        arr.push(touches[i]);\n    return arr;\n}\nexports.getTouchesArray = getTouchesArray;\n/**\n * Convert touch coords to sigma coords.\n *\n * @param  {event}       e   - A touch event.\n * @param  {HTMLElement} dom - A DOM element to compute offset relatively to.\n * @return {object}\n */\nfunction getTouchCoords(e, dom) {\n    return {\n        touches: getTouchesArray(e.touches).map(function (touch) { return getPosition(touch, dom); }),\n        original: e,\n    };\n}\nexports.getTouchCoords = getTouchCoords;\n/**\n * Extract the wheel delta from a mouse event or touch object.\n *\n * @param  {event}  e - A mouse event or touch object.\n * @return {number}     The wheel delta of the mouse.\n */\nfunction getWheelDelta(e) {\n    // TODO: check those ratios again to ensure a clean Chrome/Firefox compat\n    if (typeof e.deltaY !== \"undefined\")\n        return (e.deltaY * -3) / 360;\n    if (typeof e.detail !== \"undefined\")\n        return e.detail / -9;\n    throw new Error(\"Captor: could not extract delta from event.\");\n}\nexports.getWheelDelta = getWheelDelta;\n/**\n * Abstract class representing a captor like the user's mouse or touch controls.\n */\nvar Captor = /** @class */ (function (_super) {\n    __extends(Captor, _super);\n    function Captor(container, renderer) {\n        var _this = _super.call(this) || this;\n        // Properties\n        _this.container = container;\n        _this.renderer = renderer;\n        return _this;\n    }\n    return Captor;\n}(types_1.TypedEventEmitter));\nexports.default = Captor;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\n/**\n * Constants.\n */\nvar DRAG_TIMEOUT = 100;\nvar DRAGGED_EVENTS_TOLERANCE = 3;\nvar MOUSE_INERTIA_DURATION = 200;\nvar MOUSE_INERTIA_RATIO = 3;\nvar MOUSE_ZOOM_DURATION = 250;\nvar ZOOMING_RATIO = 1.7;\nvar DOUBLE_CLICK_TIMEOUT = 300;\nvar DOUBLE_CLICK_ZOOMING_RATIO = 2.2;\nvar DOUBLE_CLICK_ZOOMING_DURATION = 200;\n/**\n * Mouse captor class.\n *\n * @constructor\n */\nvar MouseCaptor = /** @class */ (function (_super) {\n    __extends(MouseCaptor, _super);\n    function MouseCaptor(container, renderer) {\n        var _this = _super.call(this, container, renderer) || this;\n        // State\n        _this.enabled = true;\n        _this.draggedEvents = 0;\n        _this.downStartTime = null;\n        _this.lastMouseX = null;\n        _this.lastMouseY = null;\n        _this.isMouseDown = false;\n        _this.isMoving = false;\n        _this.movingTimeout = null;\n        _this.startCameraState = null;\n        _this.clicks = 0;\n        _this.doubleClickTimeout = null;\n        _this.currentWheelDirection = 0;\n        // Binding methods\n        _this.handleClick = _this.handleClick.bind(_this);\n        _this.handleRightClick = _this.handleRightClick.bind(_this);\n        _this.handleDown = _this.handleDown.bind(_this);\n        _this.handleUp = _this.handleUp.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        _this.handleWheel = _this.handleWheel.bind(_this);\n        _this.handleOut = _this.handleOut.bind(_this);\n        // Binding events\n        container.addEventListener(\"click\", _this.handleClick, false);\n        container.addEventListener(\"contextmenu\", _this.handleRightClick, false);\n        container.addEventListener(\"mousedown\", _this.handleDown, false);\n        container.addEventListener(\"wheel\", _this.handleWheel, false);\n        container.addEventListener(\"mouseout\", _this.handleOut, false);\n        document.addEventListener(\"mousemove\", _this.handleMove, false);\n        document.addEventListener(\"mouseup\", _this.handleUp, false);\n        return _this;\n    }\n    MouseCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"click\", this.handleClick);\n        container.removeEventListener(\"contextmenu\", this.handleRightClick);\n        container.removeEventListener(\"mousedown\", this.handleDown);\n        container.removeEventListener(\"wheel\", this.handleWheel);\n        container.removeEventListener(\"mouseout\", this.handleOut);\n        document.removeEventListener(\"mousemove\", this.handleMove);\n        document.removeEventListener(\"mouseup\", this.handleUp);\n    };\n    MouseCaptor.prototype.handleClick = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        this.clicks++;\n        if (this.clicks === 2) {\n            this.clicks = 0;\n            if (typeof this.doubleClickTimeout === \"number\") {\n                clearTimeout(this.doubleClickTimeout);\n                this.doubleClickTimeout = null;\n            }\n            return this.handleDoubleClick(e);\n        }\n        setTimeout(function () {\n            _this.clicks = 0;\n            _this.doubleClickTimeout = null;\n        }, DOUBLE_CLICK_TIMEOUT);\n        // NOTE: this is here to prevent click events on drag\n        if (this.draggedEvents < DRAGGED_EVENTS_TOLERANCE)\n            this.emit(\"click\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleRightClick = function (e) {\n        if (!this.enabled)\n            return;\n        this.emit(\"rightClick\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleDoubleClick = function (e) {\n        if (!this.enabled)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n        this.emit(\"doubleClick\", mouseCoords);\n        if (mouseCoords.sigmaDefaultPrevented)\n            return;\n        // default behavior\n        var camera = this.renderer.getCamera();\n        var newRatio = camera.getBoundedRatio(camera.getState().ratio / DOUBLE_CLICK_ZOOMING_RATIO);\n        camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n            easing: \"quadraticInOut\",\n            duration: DOUBLE_CLICK_ZOOMING_DURATION,\n        });\n    };\n    MouseCaptor.prototype.handleDown = function (e) {\n        if (!this.enabled)\n            return;\n        this.startCameraState = this.renderer.getCamera().getState();\n        var _a = (0, captor_1.getPosition)(e, this.container), x = _a.x, y = _a.y;\n        this.lastMouseX = x;\n        this.lastMouseY = y;\n        this.draggedEvents = 0;\n        this.downStartTime = Date.now();\n        // TODO: dispatch events\n        // Left button pressed\n        this.isMouseDown = true;\n        this.emit(\"mousedown\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleUp = function (e) {\n        var _this = this;\n        if (!this.enabled || !this.isMouseDown)\n            return;\n        var camera = this.renderer.getCamera();\n        this.isMouseDown = false;\n        if (typeof this.movingTimeout === \"number\") {\n            clearTimeout(this.movingTimeout);\n            this.movingTimeout = null;\n        }\n        var _a = (0, captor_1.getPosition)(e, this.container), x = _a.x, y = _a.y;\n        var cameraState = camera.getState(), previousCameraState = camera.getPreviousState() || { x: 0, y: 0 };\n        if (this.isMoving) {\n            camera.animate({\n                x: cameraState.x + MOUSE_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                y: cameraState.y + MOUSE_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n            }, {\n                duration: MOUSE_INERTIA_DURATION,\n                easing: \"quadraticOut\",\n            });\n        }\n        else if (this.lastMouseX !== x || this.lastMouseY !== y) {\n            camera.setState({\n                x: cameraState.x,\n                y: cameraState.y,\n            });\n        }\n        this.isMoving = false;\n        setTimeout(function () {\n            _this.draggedEvents = 0;\n            _this.renderer.refresh();\n        }, 0);\n        this.emit(\"mouseup\", (0, captor_1.getMouseCoords)(e, this.container));\n    };\n    MouseCaptor.prototype.handleMove = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        var mouseCoords = (0, captor_1.getMouseCoords)(e, this.container);\n        // Always trigger a \"mousemovebody\" event, so that it is possible to develop\n        // a drag-and-drop effect that works even when the mouse is out of the\n        // container:\n        this.emit(\"mousemovebody\", mouseCoords);\n        // Only trigger the \"mousemove\" event when the mouse is actually hovering\n        // the container, to avoid weirdly hovering nodes and/or edges when the\n        // mouse is not hover the container:\n        if (e.target === this.container) {\n            this.emit(\"mousemove\", mouseCoords);\n        }\n        if (mouseCoords.sigmaDefaultPrevented)\n            return;\n        // Handle the case when \"isMouseDown\" all the time, to allow dragging the\n        // stage while the mouse is not hover the container:\n        if (this.isMouseDown) {\n            this.isMoving = true;\n            this.draggedEvents++;\n            if (typeof this.movingTimeout === \"number\") {\n                clearTimeout(this.movingTimeout);\n            }\n            this.movingTimeout = window.setTimeout(function () {\n                _this.movingTimeout = null;\n                _this.isMoving = false;\n            }, DRAG_TIMEOUT);\n            var camera = this.renderer.getCamera();\n            var _a = (0, captor_1.getPosition)(e, this.container), eX = _a.x, eY = _a.y;\n            var lastMouse = this.renderer.viewportToFramedGraph({\n                x: this.lastMouseX,\n                y: this.lastMouseY,\n            });\n            var mouse = this.renderer.viewportToFramedGraph({ x: eX, y: eY });\n            var offsetX = lastMouse.x - mouse.x, offsetY = lastMouse.y - mouse.y;\n            var cameraState = camera.getState();\n            var x = cameraState.x + offsetX, y = cameraState.y + offsetY;\n            camera.setState({ x: x, y: y });\n            this.lastMouseX = eX;\n            this.lastMouseY = eY;\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    };\n    MouseCaptor.prototype.handleWheel = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        e.preventDefault();\n        e.stopPropagation();\n        var delta = (0, captor_1.getWheelDelta)(e);\n        if (!delta)\n            return;\n        var wheelCoords = (0, captor_1.getWheelCoords)(e, this.container);\n        this.emit(\"wheel\", wheelCoords);\n        if (wheelCoords.sigmaDefaultPrevented)\n            return;\n        // Default behavior\n        var ratioDiff = delta > 0 ? 1 / ZOOMING_RATIO : ZOOMING_RATIO;\n        var camera = this.renderer.getCamera();\n        var newRatio = camera.getBoundedRatio(camera.getState().ratio * ratioDiff);\n        var wheelDirection = delta > 0 ? 1 : -1;\n        var now = Date.now();\n        // Cancel events that are too close too each other and in the same direction:\n        if (this.currentWheelDirection === wheelDirection &&\n            this.lastWheelTriggerTime &&\n            now - this.lastWheelTriggerTime < MOUSE_ZOOM_DURATION / 5) {\n            return;\n        }\n        camera.animate(this.renderer.getViewportZoomedState((0, captor_1.getPosition)(e, this.container), newRatio), {\n            easing: \"quadraticOut\",\n            duration: MOUSE_ZOOM_DURATION,\n        }, function () {\n            _this.currentWheelDirection = 0;\n        });\n        this.currentWheelDirection = wheelDirection;\n        this.lastWheelTriggerTime = now;\n    };\n    MouseCaptor.prototype.handleOut = function () {\n        // TODO: dispatch event\n    };\n    return MouseCaptor;\n}(captor_1.default));\nexports.default = MouseCaptor;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n    o[\"default\"] = v;\n});\nvar __importStar = (this && this.__importStar) || function (mod) {\n    if (mod && mod.__esModule) return mod;\n    var result = {};\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n    __setModuleDefault(result, mod);\n    return result;\n};\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar captor_1 = __importStar(require(\"./captor\"));\nvar DRAG_TIMEOUT = 200;\nvar TOUCH_INERTIA_RATIO = 3;\nvar TOUCH_INERTIA_DURATION = 200;\n/**\n * Touch captor class.\n *\n * @constructor\n */\nvar TouchCaptor = /** @class */ (function (_super) {\n    __extends(TouchCaptor, _super);\n    function TouchCaptor(container, renderer) {\n        var _this = _super.call(this, container, renderer) || this;\n        _this.enabled = true;\n        _this.isMoving = false;\n        _this.touchMode = 0; // number of touches down\n        // Binding methods:\n        _this.handleStart = _this.handleStart.bind(_this);\n        _this.handleLeave = _this.handleLeave.bind(_this);\n        _this.handleMove = _this.handleMove.bind(_this);\n        // Binding events\n        container.addEventListener(\"touchstart\", _this.handleStart, false);\n        container.addEventListener(\"touchend\", _this.handleLeave, false);\n        container.addEventListener(\"touchcancel\", _this.handleLeave, false);\n        container.addEventListener(\"touchmove\", _this.handleMove, false);\n        return _this;\n    }\n    TouchCaptor.prototype.kill = function () {\n        var container = this.container;\n        container.removeEventListener(\"touchstart\", this.handleStart);\n        container.removeEventListener(\"touchend\", this.handleLeave);\n        container.removeEventListener(\"touchcancel\", this.handleLeave);\n        container.removeEventListener(\"touchmove\", this.handleMove);\n    };\n    TouchCaptor.prototype.getDimensions = function () {\n        return {\n            width: this.container.offsetWidth,\n            height: this.container.offsetHeight,\n        };\n    };\n    TouchCaptor.prototype.dispatchRelatedMouseEvent = function (type, e, position, emitter) {\n        var mousePosition = position || (0, captor_1.getPosition)(e.touches[0], this.container);\n        var mouseEvent = new MouseEvent(type, {\n            clientX: mousePosition.x,\n            clientY: mousePosition.y,\n            altKey: e.altKey,\n            ctrlKey: e.ctrlKey,\n        });\n        mouseEvent.isFakeSigmaMouseEvent = true;\n        (emitter || this.container).dispatchEvent(mouseEvent);\n    };\n    TouchCaptor.prototype.handleStart = function (e) {\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousedown\", e);\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        this.isMoving = true;\n        this.touchMode = touches.length;\n        this.startCameraState = this.renderer.getCamera().getState();\n        this.startTouchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouchesPositions = this.startTouchesPositions;\n        // When there are two touches down, let's record distance and angle as well:\n        if (this.touchMode === 2) {\n            var _a = __read(this.startTouchesPositions, 2), _b = _a[0], x0 = _b.x, y0 = _b.y, _c = _a[1], x1 = _c.x, y1 = _c.y;\n            this.startTouchesAngle = Math.atan2(y1 - y0, x1 - x0);\n            this.startTouchesDistance = Math.sqrt(Math.pow(x1 - x0, 2) + Math.pow(y1 - y0, 2));\n        }\n        this.emit(\"touchdown\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleLeave = function (e) {\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 0 && this.lastTouchesPositions && this.lastTouchesPositions.length) {\n            this.dispatchRelatedMouseEvent(\"mouseup\", e, this.lastTouchesPositions[0], document);\n            this.dispatchRelatedMouseEvent(\"click\", e, this.lastTouchesPositions[0]);\n        }\n        if (this.movingTimeout) {\n            this.isMoving = false;\n            clearTimeout(this.movingTimeout);\n        }\n        switch (this.touchMode) {\n            case 2:\n                if (e.touches.length === 1) {\n                    this.handleStart(e);\n                    e.preventDefault();\n                    break;\n                }\n            /* falls through */\n            case 1:\n                // TODO\n                // Dispatch event\n                if (this.isMoving) {\n                    var camera = this.renderer.getCamera();\n                    var cameraState = camera.getState(), previousCameraState = camera.getPreviousState() || { x: 0, y: 0 };\n                    camera.animate({\n                        x: cameraState.x + TOUCH_INERTIA_RATIO * (cameraState.x - previousCameraState.x),\n                        y: cameraState.y + TOUCH_INERTIA_RATIO * (cameraState.y - previousCameraState.y),\n                    }, {\n                        duration: TOUCH_INERTIA_DURATION,\n                        easing: \"quadraticOut\",\n                    });\n                }\n                this.isMoving = false;\n                this.touchMode = 0;\n                break;\n        }\n        this.emit(\"touchup\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    TouchCaptor.prototype.handleMove = function (e) {\n        var _a;\n        var _this = this;\n        if (!this.enabled)\n            return;\n        // Prevent default to avoid default browser behaviors...\n        e.preventDefault();\n        // ...but simulate mouse behavior anyway, to get the MouseCaptor working as well:\n        if (e.touches.length === 1)\n            this.dispatchRelatedMouseEvent(\"mousemove\", e);\n        var camera = this.renderer.getCamera();\n        var startCameraState = this.startCameraState;\n        var touches = (0, captor_1.getTouchesArray)(e.touches);\n        var touchesPositions = touches.map(function (touch) { return (0, captor_1.getPosition)(touch, _this.container); });\n        this.lastTouchesPositions = touchesPositions;\n        this.isMoving = true;\n        if (this.movingTimeout)\n            clearTimeout(this.movingTimeout);\n        this.movingTimeout = window.setTimeout(function () {\n            _this.isMoving = false;\n        }, DRAG_TIMEOUT);\n        switch (this.touchMode) {\n            case 1: {\n                var _b = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0]), xStart = _b.x, yStart = _b.y;\n                var _c = this.renderer.viewportToFramedGraph(touchesPositions[0]), x = _c.x, y = _c.y;\n                camera.setState({\n                    x: startCameraState.x + xStart - x,\n                    y: startCameraState.y + yStart - y,\n                });\n                break;\n            }\n            case 2: {\n                /**\n                 * Here is the thinking here:\n                 *\n                 * 1. We can find the new angle and ratio, by comparing the vector from \"touch one\" to \"touch two\" at the start\n                 *    of the d'n'd and now\n                 *\n                 * 2. We can use `Camera#viewportToGraph` inside formula to retrieve the new camera position, using the graph\n                 *    position of a touch at the beginning of the d'n'd (using `startCamera.viewportToGraph`) and the viewport\n                 *    position of this same touch now\n                 */\n                var newCameraState = {};\n                var _d = touchesPositions[0], x0 = _d.x, y0 = _d.y;\n                var _e = touchesPositions[1], x1 = _e.x, y1 = _e.y;\n                var angleDiff = Math.atan2(y1 - y0, x1 - x0) - this.startTouchesAngle;\n                var ratioDiff = Math.hypot(y1 - y0, x1 - x0) / this.startTouchesDistance;\n                // 1.\n                var newRatio = camera.getBoundedRatio(startCameraState.ratio / ratioDiff);\n                newCameraState.ratio = newRatio;\n                newCameraState.angle = startCameraState.angle + angleDiff;\n                // 2.\n                var dimensions = this.getDimensions();\n                var touchGraphPosition = this.renderer.viewportToFramedGraph((this.startTouchesPositions || [])[0], { cameraState: startCameraState });\n                var smallestDimension = Math.min(dimensions.width, dimensions.height);\n                var dx = smallestDimension / dimensions.width;\n                var dy = smallestDimension / dimensions.height;\n                var ratio = newRatio / smallestDimension;\n                // Align with center of the graph:\n                var x = x0 - smallestDimension / 2 / dx;\n                var y = y0 - smallestDimension / 2 / dy;\n                // Rotate:\n                _a = __read([\n                    x * Math.cos(-newCameraState.angle) - y * Math.sin(-newCameraState.angle),\n                    y * Math.cos(-newCameraState.angle) + x * Math.sin(-newCameraState.angle),\n                ], 2), x = _a[0], y = _a[1];\n                newCameraState.x = touchGraphPosition.x - x * ratio;\n                newCameraState.y = touchGraphPosition.y + y * ratio;\n                camera.setState(newCameraState);\n                break;\n            }\n        }\n        this.emit(\"touchmove\", (0, captor_1.getTouchCoords)(e, this.container));\n    };\n    return TouchCaptor;\n}(captor_1.default));\nexports.default = TouchCaptor;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.edgeLabelsToDisplayFromNodes = exports.LabelGrid = void 0;\n/**\n * Class representing a single candidate for the label grid selection.\n *\n * It also describes a deterministic way to compare two candidates to assess\n * which one is better.\n */\nvar LabelCandidate = /** @class */ (function () {\n    function LabelCandidate(key, size) {\n        this.key = key;\n        this.size = size;\n    }\n    LabelCandidate.compare = function (first, second) {\n        // First we compare by size\n        if (first.size > second.size)\n            return -1;\n        if (first.size < second.size)\n            return 1;\n        // Then since no two nodes can have the same key, we use it to\n        // deterministically tie-break by key\n        if (first.key > second.key)\n            return 1;\n        // NOTE: this comparator cannot return 0\n        return -1;\n    };\n    return LabelCandidate;\n}());\n/**\n * Class representing a 2D spatial grid divided into constant-size cells.\n */\nvar LabelGrid = /** @class */ (function () {\n    function LabelGrid() {\n        this.width = 0;\n        this.height = 0;\n        this.cellSize = 0;\n        this.columns = 0;\n        this.rows = 0;\n        this.cells = {};\n    }\n    LabelGrid.prototype.resizeAndClear = function (dimensions, cellSize) {\n        this.width = dimensions.width;\n        this.height = dimensions.height;\n        this.cellSize = cellSize;\n        this.columns = Math.ceil(dimensions.width / cellSize);\n        this.rows = Math.ceil(dimensions.height / cellSize);\n        this.cells = {};\n    };\n    LabelGrid.prototype.getIndex = function (pos) {\n        var xIndex = Math.floor(pos.x / this.cellSize);\n        var yIndex = Math.floor(pos.y / this.cellSize);\n        return yIndex * this.columns + xIndex;\n    };\n    LabelGrid.prototype.add = function (key, size, pos) {\n        var candidate = new LabelCandidate(key, size);\n        var index = this.getIndex(pos);\n        var cell = this.cells[index];\n        if (!cell) {\n            cell = [];\n            this.cells[index] = cell;\n        }\n        cell.push(candidate);\n    };\n    LabelGrid.prototype.organize = function () {\n        for (var k in this.cells) {\n            var cell = this.cells[k];\n            cell.sort(LabelCandidate.compare);\n        }\n    };\n    LabelGrid.prototype.getLabelsToDisplay = function (ratio, density) {\n        // TODO: work on visible nodes to optimize? ^ -> threshold outside so that memoization works?\n        // TODO: adjust threshold lower, but increase cells a bit?\n        // TODO: hunt for geom issue in disguise\n        // TODO: memoize while ratio does not move. method to force recompute\n        var cellArea = this.cellSize * this.cellSize;\n        var scaledCellArea = cellArea / ratio / ratio;\n        var scaledDensity = (scaledCellArea * density) / cellArea;\n        var labelsToDisplayPerCell = Math.ceil(scaledDensity);\n        var labels = [];\n        for (var k in this.cells) {\n            var cell = this.cells[k];\n            for (var i = 0; i < Math.min(labelsToDisplayPerCell, cell.length); i++) {\n                labels.push(cell[i].key);\n            }\n        }\n        return labels;\n    };\n    return LabelGrid;\n}());\nexports.LabelGrid = LabelGrid;\n/**\n * Label heuristic selecting edge labels to display, based on displayed node\n * labels\n *\n * @param  {object} params                 - Parameters:\n * @param  {Set}      displayedNodeLabels  - Currently displayed node labels.\n * @param  {Set}      highlightedNodes     - Highlighted nodes.\n * @param  {Graph}    graph                - The rendered graph.\n * @param  {string}   hoveredNode          - Hovered node (optional)\n * @return {Array}                         - The selected labels.\n */\nfunction edgeLabelsToDisplayFromNodes(params) {\n    var graph = params.graph, hoveredNode = params.hoveredNode, highlightedNodes = params.highlightedNodes, displayedNodeLabels = params.displayedNodeLabels;\n    var worthyEdges = [];\n    // TODO: the code below can be optimized using #.forEach and batching the code per adj\n    // We should display an edge's label if:\n    //   - Any of its extremities is highlighted or hovered\n    //   - Both of its extremities has its label shown\n    graph.forEachEdge(function (edge, _, source, target) {\n        if (source === hoveredNode ||\n            target === hoveredNode ||\n            highlightedNodes.has(source) ||\n            highlightedNodes.has(target) ||\n            (displayedNodeLabels.has(source) && displayedNodeLabels.has(target))) {\n            worthyEdges.push(edge);\n        }\n    });\n    return worthyEdges;\n}\nexports.edgeLabelsToDisplayFromNodes = edgeLabelsToDisplayFromNodes;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.rectangleCollidesWithQuad = exports.squareCollidesWithQuad = exports.getCircumscribedAlignedRectangle = exports.isRectangleAligned = void 0;\n/**\n * Sigma.js Quad Tree Class\n * =========================\n *\n * Class implementing the quad tree data structure used to solve hovers and\n * determine which elements are currently in the scope of the camera so that\n * we don't waste time rendering things the user cannot see anyway.\n * @module\n */\n/* eslint no-nested-ternary: 0 */\n/* eslint no-constant-condition: 0 */\nvar extend_1 = __importDefault(require(\"@yomguithereal/helpers/extend\"));\n// TODO: should not ask the quadtree when the camera has the whole graph in\n// sight.\n// TODO: a square can be represented as topleft + width, saying for the quad blocks (reduce mem)\n// TODO: jsdoc\n// TODO: be sure we can handle cases overcoming boundaries (because of size) or use a maxed size\n// TODO: filtering unwanted labels beforehand through the filter function\n// NOTE: this is basically a MX-CIF Quadtree at this point\n// NOTE: need to explore R-Trees for edges\n// NOTE: need to explore 2d segment tree for edges\n// NOTE: probably can do faster using spatial hashing\n/**\n * Constants.\n *\n * Note that since we are representing a static 4-ary tree, the indices of the\n * quadrants are the following:\n *   - TOP_LEFT:     4i + b\n *   - TOP_RIGHT:    4i + 2b\n *   - BOTTOM_LEFT:  4i + 3b\n *   - BOTTOM_RIGHT: 4i + 4b\n */\nvar BLOCKS = 4, MAX_LEVEL = 5;\nvar OUTSIDE_BLOCK = \"outside\";\nvar X_OFFSET = 0, Y_OFFSET = 1, WIDTH_OFFSET = 2, HEIGHT_OFFSET = 3;\nvar TOP_LEFT = 1, TOP_RIGHT = 2, BOTTOM_LEFT = 3, BOTTOM_RIGHT = 4;\nvar hasWarnedTooMuchOutside = false;\n/**\n * Geometry helpers.\n */\n/**\n * Function returning whether the given rectangle is axis-aligned.\n *\n * @param  {Rectangle} rect\n * @return {boolean}\n */\nfunction isRectangleAligned(rect) {\n    return rect.x1 === rect.x2 || rect.y1 === rect.y2;\n}\nexports.isRectangleAligned = isRectangleAligned;\n/**\n * Function returning the smallest rectangle that contains the given rectangle, and that is aligned with the axis.\n *\n * @param {Rectangle} rect\n * @return {Rectangle}\n */\nfunction getCircumscribedAlignedRectangle(rect) {\n    var width = Math.sqrt(Math.pow(rect.x2 - rect.x1, 2) + Math.pow(rect.y2 - rect.y1, 2));\n    var heightVector = {\n        x: ((rect.y1 - rect.y2) * rect.height) / width,\n        y: ((rect.x2 - rect.x1) * rect.height) / width,\n    };\n    // Compute all corners:\n    var tl = { x: rect.x1, y: rect.y1 };\n    var tr = { x: rect.x2, y: rect.y2 };\n    var bl = {\n        x: rect.x1 + heightVector.x,\n        y: rect.y1 + heightVector.y,\n    };\n    var br = {\n        x: rect.x2 + heightVector.x,\n        y: rect.y2 + heightVector.y,\n    };\n    var xL = Math.min(tl.x, tr.x, bl.x, br.x);\n    var xR = Math.max(tl.x, tr.x, bl.x, br.x);\n    var yT = Math.min(tl.y, tr.y, bl.y, br.y);\n    var yB = Math.max(tl.y, tr.y, bl.y, br.y);\n    return {\n        x1: xL,\n        y1: yT,\n        x2: xR,\n        y2: yT,\n        height: yB - yT,\n    };\n}\nexports.getCircumscribedAlignedRectangle = getCircumscribedAlignedRectangle;\n/**\n *\n * @param x1\n * @param y1\n * @param w\n * @param qx\n * @param qy\n * @param qw\n * @param qh\n */\nfunction squareCollidesWithQuad(x1, y1, w, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + w > qy;\n}\nexports.squareCollidesWithQuad = squareCollidesWithQuad;\nfunction rectangleCollidesWithQuad(x1, y1, w, h, qx, qy, qw, qh) {\n    return x1 < qx + qw && x1 + w > qx && y1 < qy + qh && y1 + h > qy;\n}\nexports.rectangleCollidesWithQuad = rectangleCollidesWithQuad;\nfunction pointIsInQuad(x, y, qx, qy, qw, qh) {\n    var xmp = qx + qw / 2, ymp = qy + qh / 2, top = y < ymp, left = x < xmp;\n    return top ? (left ? TOP_LEFT : TOP_RIGHT) : left ? BOTTOM_LEFT : BOTTOM_RIGHT;\n}\n/**\n * Helper functions that are not bound to the class so an external user\n * cannot mess with them.\n */\nfunction buildQuadrants(maxLevel, data) {\n    // [block, level]\n    var stack = [0, 0];\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var x = data[block + X_OFFSET], y = data[block + Y_OFFSET], width = data[block + WIDTH_OFFSET], height = data[block + HEIGHT_OFFSET], hw = width / 2, hh = height / 2;\n        data[topLeftBlock + X_OFFSET] = x;\n        data[topLeftBlock + Y_OFFSET] = y;\n        data[topLeftBlock + WIDTH_OFFSET] = hw;\n        data[topLeftBlock + HEIGHT_OFFSET] = hh;\n        data[topRightBlock + X_OFFSET] = x + hw;\n        data[topRightBlock + Y_OFFSET] = y;\n        data[topRightBlock + WIDTH_OFFSET] = hw;\n        data[topRightBlock + HEIGHT_OFFSET] = hh;\n        data[bottomLeftBlock + X_OFFSET] = x;\n        data[bottomLeftBlock + Y_OFFSET] = y + hh;\n        data[bottomLeftBlock + WIDTH_OFFSET] = hw;\n        data[bottomLeftBlock + HEIGHT_OFFSET] = hh;\n        data[bottomRightBlock + X_OFFSET] = x + hw;\n        data[bottomRightBlock + Y_OFFSET] = y + hh;\n        data[bottomRightBlock + WIDTH_OFFSET] = hw;\n        data[bottomRightBlock + HEIGHT_OFFSET] = hh;\n        if (level < maxLevel - 1) {\n            stack.push(bottomRightBlock, level + 1);\n            stack.push(bottomLeftBlock, level + 1);\n            stack.push(topRightBlock, level + 1);\n            stack.push(topLeftBlock, level + 1);\n        }\n    }\n}\nfunction insertNode(maxLevel, data, containers, key, x, y, size) {\n    var x1 = x - size, y1 = y - size, w = size * 2;\n    var level = 0, block = 0;\n    while (true) {\n        // If we reached max level\n        if (level >= maxLevel) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = squareCollidesWithQuad(x1, y1, w, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = squareCollidesWithQuad(x1, y1, w, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = squareCollidesWithQuad(x1, y1, w, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = squareCollidesWithQuad(x1, y1, w, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        var collisions = [\n            collidingWithTopLeft,\n            collidingWithTopRight,\n            collidingWithBottomLeft,\n            collidingWithBottomRight,\n        ].reduce(function (acc, current) {\n            if (current)\n                return acc + 1;\n            else\n                return acc;\n        }, 0);\n        // If we have no collision at root level, inject node in the outside block\n        if (collisions === 0 && level === 0) {\n            containers[OUTSIDE_BLOCK].push(key);\n            if (!hasWarnedTooMuchOutside && containers[OUTSIDE_BLOCK].length >= 5) {\n                hasWarnedTooMuchOutside = true;\n                console.warn(\"sigma/quadtree.insertNode: At least 5 nodes are outside the global quadtree zone. \" +\n                    \"You might have a problem with the normalization function or the custom bounding box.\");\n            }\n            return;\n        }\n        // If we don't have at least a collision but deeper, there is an issue\n        if (collisions === 0)\n            throw new Error(\"sigma/quadtree.insertNode: no collision (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n        // If we have 3 collisions, we have a geometry problem obviously\n        if (collisions === 3)\n            throw new Error(\"sigma/quadtree.insertNode: 3 impossible collisions (level: \".concat(level, \", key: \").concat(key, \", x: \").concat(x, \", y: \").concat(y, \", size: \").concat(size, \").\"));\n        // If we have more that one collision, we stop here and store the node\n        // in the relevant containers\n        if (collisions > 1) {\n            containers[block] = containers[block] || [];\n            containers[block].push(key);\n            return;\n        }\n        else {\n            level++;\n        }\n        // Else we recurse into the correct quads\n        if (collidingWithTopLeft)\n            block = topLeftBlock;\n        if (collidingWithTopRight)\n            block = topRightBlock;\n        if (collidingWithBottomLeft)\n            block = bottomLeftBlock;\n        if (collidingWithBottomRight)\n            block = bottomRightBlock;\n    }\n}\nfunction getNodesInAxisAlignedRectangleArea(maxLevel, data, containers, x1, y1, w, h) {\n    // [block, level]\n    var stack = [0, 0];\n    var collectedNodes = [];\n    var container;\n    while (stack.length) {\n        var level = stack.pop(), block = stack.pop();\n        // Collecting nodes\n        container = containers[block];\n        if (container)\n            (0, extend_1.default)(collectedNodes, container);\n        // If we reached max level\n        if (level >= maxLevel)\n            continue;\n        var topLeftBlock = 4 * block + BLOCKS, topRightBlock = 4 * block + 2 * BLOCKS, bottomLeftBlock = 4 * block + 3 * BLOCKS, bottomRightBlock = 4 * block + 4 * BLOCKS;\n        var collidingWithTopLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[topLeftBlock + X_OFFSET], data[topLeftBlock + Y_OFFSET], data[topLeftBlock + WIDTH_OFFSET], data[topLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithTopRight = rectangleCollidesWithQuad(x1, y1, w, h, data[topRightBlock + X_OFFSET], data[topRightBlock + Y_OFFSET], data[topRightBlock + WIDTH_OFFSET], data[topRightBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomLeft = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomLeftBlock + X_OFFSET], data[bottomLeftBlock + Y_OFFSET], data[bottomLeftBlock + WIDTH_OFFSET], data[bottomLeftBlock + HEIGHT_OFFSET]);\n        var collidingWithBottomRight = rectangleCollidesWithQuad(x1, y1, w, h, data[bottomRightBlock + X_OFFSET], data[bottomRightBlock + Y_OFFSET], data[bottomRightBlock + WIDTH_OFFSET], data[bottomRightBlock + HEIGHT_OFFSET]);\n        if (collidingWithTopLeft)\n            stack.push(topLeftBlock, level + 1);\n        if (collidingWithTopRight)\n            stack.push(topRightBlock, level + 1);\n        if (collidingWithBottomLeft)\n            stack.push(bottomLeftBlock, level + 1);\n        if (collidingWithBottomRight)\n            stack.push(bottomRightBlock, level + 1);\n    }\n    return collectedNodes;\n}\n/**\n * QuadTree class.\n *\n * @constructor\n * @param {object} boundaries - The graph boundaries.\n */\nvar QuadTree = /** @class */ (function () {\n    function QuadTree(params) {\n        var _a;\n        if (params === void 0) { params = {}; }\n        this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n        this.cache = null;\n        this.lastRectangle = null;\n        // Allocating the underlying byte array\n        var L = Math.pow(4, MAX_LEVEL);\n        this.data = new Float32Array(BLOCKS * ((4 * L - 1) / 3));\n        if (params.boundaries)\n            this.resize(params.boundaries);\n        else\n            this.resize({\n                x: 0,\n                y: 0,\n                width: 1,\n                height: 1,\n            });\n    }\n    QuadTree.prototype.add = function (key, x, y, size) {\n        insertNode(MAX_LEVEL, this.data, this.containers, key, x, y, size);\n        return this;\n    };\n    QuadTree.prototype.resize = function (boundaries) {\n        this.clear();\n        // Building the quadrants\n        this.data[X_OFFSET] = boundaries.x;\n        this.data[Y_OFFSET] = boundaries.y;\n        this.data[WIDTH_OFFSET] = boundaries.width;\n        this.data[HEIGHT_OFFSET] = boundaries.height;\n        buildQuadrants(MAX_LEVEL, this.data);\n    };\n    QuadTree.prototype.clear = function () {\n        var _a;\n        this.containers = (_a = {}, _a[OUTSIDE_BLOCK] = [], _a);\n        return this;\n    };\n    QuadTree.prototype.point = function (x, y) {\n        var nodes = this.containers[OUTSIDE_BLOCK];\n        var block = 0, level = 0;\n        do {\n            if (this.containers[block])\n                nodes.push.apply(nodes, __spreadArray([], __read(this.containers[block]), false));\n            var quad = pointIsInQuad(x, y, this.data[block + X_OFFSET], this.data[block + Y_OFFSET], this.data[block + WIDTH_OFFSET], this.data[block + HEIGHT_OFFSET]);\n            block = 4 * block + quad * BLOCKS;\n            level++;\n        } while (level <= MAX_LEVEL);\n        return nodes;\n    };\n    QuadTree.prototype.rectangle = function (x1, y1, x2, y2, height) {\n        var _a;\n        var lr = this.lastRectangle;\n        if (lr && x1 === lr.x1 && x2 === lr.x2 && y1 === lr.y1 && y2 === lr.y2 && height === lr.height) {\n            return this.cache;\n        }\n        this.lastRectangle = {\n            x1: x1,\n            y1: y1,\n            x2: x2,\n            y2: y2,\n            height: height,\n        };\n        // If the rectangle is shifted, we use the smallest aligned rectangle that contains the shifted one:\n        if (!isRectangleAligned(this.lastRectangle))\n            this.lastRectangle = getCircumscribedAlignedRectangle(this.lastRectangle);\n        this.cache = getNodesInAxisAlignedRectangleArea(MAX_LEVEL, this.data, this.containers, x1, y1, Math.abs(x1 - x2) || Math.abs(y1 - y2), height);\n        // Add all the nodes in the outside block, since they might be relevant, and since they should be very few:\n        (_a = this.cache).push.apply(_a, __spreadArray([], __read(this.containers[OUTSIDE_BLOCK]), false));\n        return this.cache;\n    };\n    return QuadTree;\n}());\nexports.default = QuadTree;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Sigma = exports.MouseCaptor = exports.QuadTree = exports.Camera = void 0;\n/**\n * Sigma.js Library Endpoint\n * =========================\n *\n * The library endpoint.\n * @module\n */\nvar sigma_1 = __importDefault(require(\"./sigma\"));\nexports.Sigma = sigma_1.default;\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nexports.Camera = camera_1.default;\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nexports.QuadTree = quadtree_1.default;\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nexports.MouseCaptor = mouse_1.default;\nexports.default = sigma_1.default;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawEdgeLabel(context, edgeData, sourceData, targetData, settings) {\n    var size = settings.edgeLabelSize, font = settings.edgeLabelFont, weight = settings.edgeLabelWeight, color = settings.edgeLabelColor.attribute\n        ? edgeData[settings.edgeLabelColor.attribute] || settings.edgeLabelColor.color || \"#000\"\n        : settings.edgeLabelColor.color;\n    var label = edgeData.label;\n    if (!label)\n        return;\n    context.fillStyle = color;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    // Computing positions without considering nodes sizes:\n    var sSize = sourceData.size;\n    var tSize = targetData.size;\n    var sx = sourceData.x;\n    var sy = sourceData.y;\n    var tx = targetData.x;\n    var ty = targetData.y;\n    var cx = (sx + tx) / 2;\n    var cy = (sy + ty) / 2;\n    var dx = tx - sx;\n    var dy = ty - sy;\n    var d = Math.sqrt(dx * dx + dy * dy);\n    if (d < sSize + tSize)\n        return;\n    // Adding nodes sizes:\n    sx += (dx * sSize) / d;\n    sy += (dy * sSize) / d;\n    tx -= (dx * tSize) / d;\n    ty -= (dy * tSize) / d;\n    cx = (sx + tx) / 2;\n    cy = (sy + ty) / 2;\n    dx = tx - sx;\n    dy = ty - sy;\n    d = Math.sqrt(dx * dx + dy * dy);\n    // Handling ellipsis\n    var textLength = context.measureText(label).width;\n    if (textLength > d) {\n        var ellipsis = \"\";\n        label = label + ellipsis;\n        textLength = context.measureText(label).width;\n        while (textLength > d && label.length > 1) {\n            label = label.slice(0, -2) + ellipsis;\n            textLength = context.measureText(label).width;\n        }\n        if (label.length < 4)\n            return;\n    }\n    var angle;\n    if (dx > 0) {\n        if (dy > 0)\n            angle = Math.acos(dx / d);\n        else\n            angle = Math.asin(dy / d);\n    }\n    else {\n        if (dy > 0)\n            angle = Math.acos(dx / d) + Math.PI;\n        else\n            angle = Math.asin(dx / d) + Math.PI / 2;\n    }\n    context.save();\n    context.translate(cx, cy);\n    context.rotate(angle);\n    context.fillText(label, -textLength / 2, edgeData.size / 2 + size);\n    context.restore();\n}\nexports.default = drawEdgeLabel;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar label_1 = __importDefault(require(\"./label\"));\n/**\n * Draw an hovered node.\n * - if there is no label => display a shadow on the node\n * - if the label box is bigger than node size => display a label box that contains the node with a shadow\n * - else node with shadow and the label box\n */\nfunction drawHover(context, data, settings) {\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    // Then we draw the label background\n    context.fillStyle = \"#FFF\";\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 8;\n    context.shadowColor = \"#000\";\n    var PADDING = 2;\n    if (typeof data.label === \"string\") {\n        var textWidth = context.measureText(data.label).width, boxWidth = Math.round(textWidth + 5), boxHeight = Math.round(size + 2 * PADDING), radius = Math.max(data.size, size / 2) + PADDING;\n        var angleRadian = Math.asin(boxHeight / 2 / radius);\n        var xDeltaCoord = Math.sqrt(Math.abs(Math.pow(radius, 2) - Math.pow(boxHeight / 2, 2)));\n        context.beginPath();\n        context.moveTo(data.x + xDeltaCoord, data.y + boxHeight / 2);\n        context.lineTo(data.x + radius + boxWidth, data.y + boxHeight / 2);\n        context.lineTo(data.x + radius + boxWidth, data.y - boxHeight / 2);\n        context.lineTo(data.x + xDeltaCoord, data.y - boxHeight / 2);\n        context.arc(data.x, data.y, radius, angleRadian, -angleRadian);\n        context.closePath();\n        context.fill();\n    }\n    else {\n        context.beginPath();\n        context.arc(data.x, data.y, data.size + PADDING, 0, Math.PI * 2);\n        context.closePath();\n        context.fill();\n    }\n    context.shadowOffsetX = 0;\n    context.shadowOffsetY = 0;\n    context.shadowBlur = 0;\n    // And finally we draw the label\n    (0, label_1.default)(context, data, settings);\n}\nexports.default = drawHover;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nfunction drawLabel(context, data, settings) {\n    if (!data.label)\n        return;\n    var size = settings.labelSize, font = settings.labelFont, weight = settings.labelWeight, color = settings.labelColor.attribute\n        ? data[settings.labelColor.attribute] || settings.labelColor.color || \"#000\"\n        : settings.labelColor.color;\n    context.fillStyle = color;\n    context.font = \"\".concat(weight, \" \").concat(size, \"px \").concat(font);\n    context.fillText(data.label, data.x + data.size + 3, data.y + size / 3);\n}\nexports.default = drawLabel;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createEdgeCompoundProgram = exports.AbstractEdgeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Edge Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Edge Program class.\n *\n * @constructor\n */\nvar AbstractEdgeProgram = /** @class */ (function (_super) {\n    __extends(AbstractEdgeProgram, _super);\n    function AbstractEdgeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        return _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n    }\n    return AbstractEdgeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractEdgeProgram = AbstractEdgeProgram;\nfunction createEdgeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function EdgeCompoundProgram(gl, renderer) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl, renderer); });\n        }\n        EdgeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        EdgeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        EdgeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        EdgeCompoundProgram.prototype.computeIndices = function () {\n            this.programs.forEach(function (program) { return program.computeIndices(); });\n        };\n        EdgeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        EdgeCompoundProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(sourceData, targetData, data, hidden, offset); });\n        };\n        return EdgeCompoundProgram;\n    }());\n}\nexports.createEdgeCompoundProgram = createEdgeCompoundProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createNodeCompoundProgram = exports.AbstractNodeProgram = void 0;\n/**\n * Sigma.js WebGL Abstract Node Program\n * =====================================\n *\n * @module\n */\nvar program_1 = require(\"./program\");\n/**\n * Node Program class.\n *\n * @constructor\n */\nvar AbstractNodeProgram = /** @class */ (function (_super) {\n    __extends(AbstractNodeProgram, _super);\n    function AbstractNodeProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        var _this = _super.call(this, gl, vertexShaderSource, fragmentShaderSource, points, attributes) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.sizeLocation = gl.getAttribLocation(_this.program, \"a_size\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        // Uniform Location\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var ratioLocation = gl.getUniformLocation(_this.program, \"u_ratio\");\n        if (ratioLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting ratioLocation\");\n        _this.ratioLocation = ratioLocation;\n        var scaleLocation = gl.getUniformLocation(_this.program, \"u_scale\");\n        if (scaleLocation === null)\n            throw new Error(\"AbstractNodeProgram: error while getting scaleLocation\");\n        _this.scaleLocation = scaleLocation;\n        return _this;\n    }\n    AbstractNodeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.sizeLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.sizeLocation, 1, gl.FLOAT, false, this.attributes * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, this.attributes * Float32Array.BYTES_PER_ELEMENT, 12);\n    };\n    return AbstractNodeProgram;\n}(program_1.AbstractProgram));\nexports.AbstractNodeProgram = AbstractNodeProgram;\n/**\n * Helper function combining two or more programs into a single compound one.\n * Note that this is more a quick & easy way to combine program than a really\n * performant option. More performant programs can be written entirely.\n *\n * @param  {array}    programClasses - Program classes to combine.\n * @return {function}\n */\nfunction createNodeCompoundProgram(programClasses) {\n    return /** @class */ (function () {\n        function NodeCompoundProgram(gl, renderer) {\n            this.programs = programClasses.map(function (ProgramClass) { return new ProgramClass(gl, renderer); });\n        }\n        NodeCompoundProgram.prototype.bufferData = function () {\n            this.programs.forEach(function (program) { return program.bufferData(); });\n        };\n        NodeCompoundProgram.prototype.allocate = function (capacity) {\n            this.programs.forEach(function (program) { return program.allocate(capacity); });\n        };\n        NodeCompoundProgram.prototype.bind = function () {\n            // nothing todo, it's already done in each program constructor\n        };\n        NodeCompoundProgram.prototype.render = function (params) {\n            this.programs.forEach(function (program) {\n                program.bind();\n                program.bufferData();\n                program.render(params);\n            });\n        };\n        NodeCompoundProgram.prototype.process = function (data, hidden, offset) {\n            this.programs.forEach(function (program) { return program.process(data, hidden, offset); });\n        };\n        return NodeCompoundProgram;\n    }());\n}\nexports.createNodeCompoundProgram = createNodeCompoundProgram;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AbstractProgram = void 0;\n/**\n * Sigma.js WebGL Renderer Program\n * ================================\n *\n * Class representing a single WebGL program used by sigma's WebGL renderer.\n * @module\n */\nvar utils_1 = require(\"../../shaders/utils\");\n/**\n * Abstract Program class.\n *\n * @constructor\n */\nvar AbstractProgram = /** @class */ (function () {\n    function AbstractProgram(gl, vertexShaderSource, fragmentShaderSource, points, attributes) {\n        this.array = new Float32Array();\n        this.points = points;\n        this.attributes = attributes;\n        this.gl = gl;\n        this.vertexShaderSource = vertexShaderSource;\n        this.fragmentShaderSource = fragmentShaderSource;\n        var buffer = gl.createBuffer();\n        if (buffer === null)\n            throw new Error(\"AbstractProgram: error while creating the buffer\");\n        this.buffer = buffer;\n        gl.bindBuffer(gl.ARRAY_BUFFER, this.buffer);\n        this.vertexShader = (0, utils_1.loadVertexShader)(gl, this.vertexShaderSource);\n        this.fragmentShader = (0, utils_1.loadFragmentShader)(gl, this.fragmentShaderSource);\n        this.program = (0, utils_1.loadProgram)(gl, [this.vertexShader, this.fragmentShader]);\n    }\n    AbstractProgram.prototype.bufferData = function () {\n        var gl = this.gl;\n        gl.bufferData(gl.ARRAY_BUFFER, this.array, gl.DYNAMIC_DRAW);\n    };\n    AbstractProgram.prototype.allocate = function (capacity) {\n        this.array = new Float32Array(this.points * this.attributes * capacity);\n    };\n    AbstractProgram.prototype.hasNothingToRender = function () {\n        return this.array.length === 0;\n    };\n    return AbstractProgram;\n}());\nexports.AbstractProgram = AbstractProgram;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Arrow Program\n * ===========================================\n *\n * Compound program rendering edges as an arrow from the source to the target.\n * @module\n */\nvar edge_1 = require(\"./common/edge\");\nvar edge_arrowHead_1 = __importDefault(require(\"./edge.arrowHead\"));\nvar edge_clamped_1 = __importDefault(require(\"./edge.clamped\"));\nvar EdgeArrowProgram = (0, edge_1.createEdgeCompoundProgram)([edge_clamped_1.default, edge_arrowHead_1.default]);\nexports.default = EdgeArrowProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar edge_arrowHead_vert_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.vert.glsl.js\"));\nvar edge_arrowHead_frag_glsl_1 = __importDefault(require(\"../shaders/edge.arrowHead.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 3, ATTRIBUTES = 9, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeArrowHeadProgram = /** @class */ (function (_super) {\n    __extends(EdgeArrowHeadProgram, _super);\n    function EdgeArrowHeadProgram(gl) {\n        var _this = _super.call(this, gl, edge_arrowHead_vert_glsl_1.default, edge_arrowHead_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        _this.barycentricLocation = gl.getAttribLocation(_this.program, \"a_barycentric\");\n        // Uniform locations\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting sqrtZoomRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeArrowHeadProgram: error while getting correctionRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        _this.bind();\n        return _this;\n    }\n    EdgeArrowHeadProgram.prototype.bind = function () {\n        var gl = this.gl;\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.barycentricLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n        // TODO: maybe we can optimize here by packing this in a bit mask\n        gl.vertexAttribPointer(this.barycentricLocation, 3, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 24);\n    };\n    EdgeArrowHeadProgram.prototype.computeIndices = function () {\n        // nothing to do\n    };\n    EdgeArrowHeadProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, radius = targetData.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 1;\n        array[i++] = 0;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 1;\n        array[i++] = 0;\n        // Third point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = radius;\n        array[i++] = color;\n        array[i++] = 0;\n        array[i++] = 0;\n        array[i] = 1;\n    };\n    EdgeArrowHeadProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawArrays(gl.TRIANGLES, 0, this.array.length / ATTRIBUTES);\n    };\n    return EdgeArrowHeadProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeArrowHeadProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar edge_1 = require(\"./common/edge\");\nvar utils_1 = require(\"../../../utils\");\nvar edge_clamped_vert_glsl_1 = __importDefault(require(\"../shaders/edge.clamped.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar POINTS = 4, ATTRIBUTES = 6, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeClampedProgram = /** @class */ (function (_super) {\n    __extends(EdgeClampedProgram, _super);\n    function EdgeClampedProgram(gl) {\n        var _this = _super.call(this, gl, edge_clamped_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeClampedProgram: error while getting resolutionLocation\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations:\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        _this.radiusLocation = gl.getAttribLocation(_this.program, \"a_radius\");\n        // Uniform locations\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting cameraRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeClampedProgram: error while getting viewportRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeClampedProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.enableVertexAttribArray(this.radiusLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n        gl.vertexAttribPointer(this.radiusLocation, 1, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 20);\n    };\n    EdgeClampedProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, radius = targetData.size || 1, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        array[i++] = 0;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        array[i++] = 0;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        array[i++] = radius;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        array[i] = -radius;\n    };\n    EdgeClampedProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeClampedProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeClampedProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        // Binding uniforms\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeClampedProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeClampedProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\n/**\n * Sigma.js WebGL Renderer Edge Program\n * =====================================\n *\n * Program rendering edges as thick lines using four points translated\n * orthogonally from the source & target's centers by half thickness.\n *\n * Rendering two triangles by using only four points is made possible through\n * the use of indices.\n *\n * This method should be faster than the 6 points / 2 triangles approach and\n * should handle thickness better than with gl.LINES.\n *\n * This version of the shader balances geometry computation evenly between\n * the CPU & GPU (normals are computed on the CPU side).\n * @module\n */\nvar utils_1 = require(\"../../../utils\");\nvar edge_vert_glsl_1 = __importDefault(require(\"../shaders/edge.vert.glsl.js\"));\nvar edge_frag_glsl_1 = __importDefault(require(\"../shaders/edge.frag.glsl.js\"));\nvar edge_1 = require(\"./common/edge\");\nvar POINTS = 4, ATTRIBUTES = 5, STRIDE = POINTS * ATTRIBUTES;\nvar EdgeProgram = /** @class */ (function (_super) {\n    __extends(EdgeProgram, _super);\n    function EdgeProgram(gl) {\n        var _this = _super.call(this, gl, edge_vert_glsl_1.default, edge_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        // Initializing indices buffer\n        var indicesBuffer = gl.createBuffer();\n        if (indicesBuffer === null)\n            throw new Error(\"EdgeProgram: error while creating indicesBuffer\");\n        _this.indicesBuffer = indicesBuffer;\n        // Locations\n        _this.positionLocation = gl.getAttribLocation(_this.program, \"a_position\");\n        _this.colorLocation = gl.getAttribLocation(_this.program, \"a_color\");\n        _this.normalLocation = gl.getAttribLocation(_this.program, \"a_normal\");\n        var matrixLocation = gl.getUniformLocation(_this.program, \"u_matrix\");\n        if (matrixLocation === null)\n            throw new Error(\"EdgeProgram: error while getting matrixLocation\");\n        _this.matrixLocation = matrixLocation;\n        var correctionRatioLocation = gl.getUniformLocation(_this.program, \"u_correctionRatio\");\n        if (correctionRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting correctionRatioLocation\");\n        _this.correctionRatioLocation = correctionRatioLocation;\n        var sqrtZoomRatioLocation = gl.getUniformLocation(_this.program, \"u_sqrtZoomRatio\");\n        if (sqrtZoomRatioLocation === null)\n            throw new Error(\"EdgeProgram: error while getting sqrtZoomRatioLocation\");\n        _this.sqrtZoomRatioLocation = sqrtZoomRatioLocation;\n        // Enabling the OES_element_index_uint extension\n        // NOTE: on older GPUs, this means that really large graphs won't\n        // have all their edges rendered. But it seems that the\n        // `OES_element_index_uint` is quite everywhere so we'll handle\n        // the potential issue if it really arises.\n        // NOTE: when using webgl2, the extension is enabled by default\n        _this.canUse32BitsIndices = (0, utils_1.canUse32BitsIndices)(gl);\n        _this.IndicesArray = _this.canUse32BitsIndices ? Uint32Array : Uint16Array;\n        _this.indicesArray = new _this.IndicesArray();\n        _this.indicesType = _this.canUse32BitsIndices ? gl.UNSIGNED_INT : gl.UNSIGNED_SHORT;\n        _this.bind();\n        return _this;\n    }\n    EdgeProgram.prototype.bind = function () {\n        var gl = this.gl;\n        gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, this.indicesBuffer);\n        // Bindings\n        gl.enableVertexAttribArray(this.positionLocation);\n        gl.enableVertexAttribArray(this.normalLocation);\n        gl.enableVertexAttribArray(this.colorLocation);\n        gl.vertexAttribPointer(this.positionLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 0);\n        gl.vertexAttribPointer(this.normalLocation, 2, gl.FLOAT, false, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 8);\n        gl.vertexAttribPointer(this.colorLocation, 4, gl.UNSIGNED_BYTE, true, ATTRIBUTES * Float32Array.BYTES_PER_ELEMENT, 16);\n    };\n    EdgeProgram.prototype.computeIndices = function () {\n        var l = this.array.length / ATTRIBUTES;\n        var size = l + l / 2;\n        var indices = new this.IndicesArray(size);\n        for (var i = 0, c = 0; i < l; i += 4) {\n            indices[c++] = i;\n            indices[c++] = i + 1;\n            indices[c++] = i + 2;\n            indices[c++] = i + 2;\n            indices[c++] = i + 1;\n            indices[c++] = i + 3;\n        }\n        this.indicesArray = indices;\n    };\n    EdgeProgram.prototype.bufferData = function () {\n        _super.prototype.bufferData.call(this);\n        // Indices data\n        var gl = this.gl;\n        gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, this.indicesArray, gl.STATIC_DRAW);\n    };\n    EdgeProgram.prototype.process = function (sourceData, targetData, data, hidden, offset) {\n        if (hidden) {\n            for (var i_1 = offset * STRIDE, l = i_1 + STRIDE; i_1 < l; i_1++)\n                this.array[i_1] = 0;\n            return;\n        }\n        var thickness = data.size || 1, x1 = sourceData.x, y1 = sourceData.y, x2 = targetData.x, y2 = targetData.y, color = (0, utils_1.floatColor)(data.color);\n        // Computing normals\n        var dx = x2 - x1, dy = y2 - y1;\n        var len = dx * dx + dy * dy, n1 = 0, n2 = 0;\n        if (len) {\n            len = 1 / Math.sqrt(len);\n            n1 = -dy * len * thickness;\n            n2 = dx * len * thickness;\n        }\n        var i = POINTS * ATTRIBUTES * offset;\n        var array = this.array;\n        // First point\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        // First point flipped\n        array[i++] = x1;\n        array[i++] = y1;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i++] = color;\n        // Second point\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = n1;\n        array[i++] = n2;\n        array[i++] = color;\n        // Second point flipped\n        array[i++] = x2;\n        array[i++] = y2;\n        array[i++] = -n1;\n        array[i++] = -n2;\n        array[i] = color;\n    };\n    EdgeProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.uniform1f(this.sqrtZoomRatioLocation, Math.sqrt(params.ratio));\n        gl.uniform1f(this.correctionRatioLocation, params.correctionRatio);\n        // Drawing:\n        gl.drawElements(gl.TRIANGLES, this.indicesArray.length, this.indicesType, 0);\n    };\n    return EdgeProgram;\n}(edge_1.AbstractEdgeProgram));\nexports.default = EdgeProgram;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar utils_1 = require(\"../../../utils\");\nvar node_fast_vert_glsl_1 = __importDefault(require(\"../shaders/node.fast.vert.glsl.js\"));\nvar node_fast_frag_glsl_1 = __importDefault(require(\"../shaders/node.fast.frag.glsl.js\"));\nvar node_1 = require(\"./common/node\");\nvar POINTS = 1, ATTRIBUTES = 4;\nvar NodeFastProgram = /** @class */ (function (_super) {\n    __extends(NodeFastProgram, _super);\n    function NodeFastProgram(gl) {\n        var _this = _super.call(this, gl, node_fast_vert_glsl_1.default, node_fast_frag_glsl_1.default, POINTS, ATTRIBUTES) || this;\n        _this.bind();\n        return _this;\n    }\n    NodeFastProgram.prototype.process = function (data, hidden, offset) {\n        var array = this.array;\n        var i = offset * POINTS * ATTRIBUTES;\n        if (hidden) {\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            array[i++] = 0;\n            return;\n        }\n        var color = (0, utils_1.floatColor)(data.color);\n        array[i++] = data.x;\n        array[i++] = data.y;\n        array[i++] = data.size;\n        array[i] = color;\n    };\n    NodeFastProgram.prototype.render = function (params) {\n        if (this.hasNothingToRender())\n            return;\n        var gl = this.gl;\n        var program = this.program;\n        gl.useProgram(program);\n        gl.uniform1f(this.ratioLocation, 1 / Math.sqrt(params.ratio));\n        gl.uniform1f(this.scaleLocation, params.scalingRatio);\n        gl.uniformMatrix3fv(this.matrixLocation, false, params.matrix);\n        gl.drawArrays(gl.POINTS, 0, this.array.length / ATTRIBUTES);\n    };\n    return NodeFastProgram;\n}(node_1.AbstractNodeProgram));\nexports.default = NodeFastProgram;\n","(()=>{\"use strict\";var e={d:(o,r)=>{for(var t in r)e.o(r,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:r[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>r});const r=\"precision mediump float;\\n\\nvarying vec4 v_color;\\n\\nvoid main(void) {\\n  gl_FragColor = v_color;\\n}\\n\";module.exports=o})();","(()=>{\"use strict\";var a={d:(e,t)=>{for(var o in t)a.o(t,o)&&!a.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},o:(a,e)=>Object.prototype.hasOwnProperty.call(a,e),r:a=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(a,\"__esModule\",{value:!0})}},e={};a.r(e),a.d(e,{default:()=>t});const t=\"attribute vec2 a_position;\\nattribute vec2 a_normal;\\nattribute float a_radius;\\nattribute vec4 a_color;\\nattribute vec3 a_barycentric;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadWidthLengthRatio = 0.66;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl and\\n  // edge.clamped.vert.glsl. Please read it to get better comments on what's\\n  // happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n  float adaptedWebGLNodeRadius = a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n  float adaptedWebGLArrowHeadHalfWidth = adaptedWebGLArrowHeadLength * arrowHeadWidthLengthRatio / 2.0;\\n\\n  float da = a_barycentric.x;\\n  float db = a_barycentric.y;\\n  float dc = a_barycentric.z;\\n\\n  vec2 delta = vec2(\\n      da * (adaptedWebGLNodeRadius * unitNormal.y)\\n    + db * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y + adaptedWebGLArrowHeadHalfWidth * unitNormal.x)\\n    + dc * ((adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.y - adaptedWebGLArrowHeadHalfWidth * unitNormal.x),\\n\\n      da * (-adaptedWebGLNodeRadius * unitNormal.x)\\n    + db * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x + adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n    + dc * (-(adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength) * unitNormal.x - adaptedWebGLArrowHeadHalfWidth * unitNormal.y)\\n  );\\n\\n  vec2 position = (u_matrix * vec3(a_position + delta, 1)).xy;\\n\\n  gl_Position = vec4(position, 0, 1);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=e})();","(()=>{\"use strict\";var e={d:(o,n)=>{for(var t in n)e.o(n,t)&&!e.o(o,t)&&Object.defineProperty(o,t,{enumerable:!0,get:n[t]})},o:(e,o)=>Object.prototype.hasOwnProperty.call(e,o),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},o={};e.r(o),e.d(o,{default:()=>n});const n=\"attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\nattribute float a_radius;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\nconst float arrowHeadLengthThicknessRatio = 2.5;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // These first computations are taken from edge.vert.glsl. Please read it to\\n  // get better comments on what's happening:\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here, we move the point to leave space for the arrow head:\\n  float direction = sign(a_radius);\\n  float adaptedWebGLNodeRadius = direction * a_radius * 2.0 * u_correctionRatio * u_sqrtZoomRatio;\\n  float adaptedWebGLArrowHeadLength = adaptedWebGLThickness * 2.0 * arrowHeadLengthThicknessRatio;\\n\\n  vec2 compensationVector = vec2(-direction * unitNormal.y, direction * unitNormal.x) * (adaptedWebGLNodeRadius + adaptedWebGLArrowHeadLength);\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness + compensationVector, 1)).xy, 0, 1);\\n\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=o})();","(()=>{\"use strict\";var e={d:(n,t)=>{for(var o in t)e.o(t,o)&&!e.o(n,o)&&Object.defineProperty(n,o,{enumerable:!0,get:t[o]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>t});const t=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float feather = 0.001;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  float dist = length(v_normal) * v_thickness;\\n\\n  float t = smoothstep(\\n    v_thickness - feather,\\n    v_thickness,\\n    dist\\n  );\\n\\n  gl_FragColor = mix(v_color, transparent, t);\\n}\\n\";module.exports=n})();","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o='attribute vec4 a_color;\\nattribute vec2 a_normal;\\nattribute vec2 a_position;\\n\\nuniform mat3 u_matrix;\\nuniform float u_sqrtZoomRatio;\\nuniform float u_correctionRatio;\\n\\nvarying vec4 v_color;\\nvarying vec2 v_normal;\\nvarying float v_thickness;\\n\\nconst float minThickness = 1.7;\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  float normalLength = length(a_normal);\\n  vec2 unitNormal = a_normal / normalLength;\\n\\n  // We require edges to be at least `minThickness` pixels thick *on screen*\\n  // (so we need to compensate the SQRT zoom ratio):\\n  float pixelsThickness = max(normalLength, minThickness * u_sqrtZoomRatio);\\n\\n  // Then, we need to retrieve the normalized thickness of the edge in the WebGL\\n  // referential (in a ([0, 1], [0, 1]) space), using our \"magic\" correction\\n  // ratio:\\n  float webGLThickness = pixelsThickness * u_correctionRatio;\\n\\n  // Finally, we adapt the edge thickness to the \"SQRT rule\" in sigma (so that\\n  // items are not too big when zoomed in, and not too small when zoomed out).\\n  // The exact computation should be `adapted = value * zoom / sqrt(zoom)`, but\\n  // it\\'s simpler like this:\\n  float adaptedWebGLThickness = webGLThickness * u_sqrtZoomRatio;\\n\\n  // Here is the proper position of the vertex\\n  gl_Position = vec4((u_matrix * vec3(a_position + unitNormal * adaptedWebGLThickness, 1)).xy, 0, 1);\\n\\n  // For the fragment shader though, we need a thickness that takes the \"magic\"\\n  // correction ratio into account (as in webGLThickness), but so that the\\n  // antialiasint effect does not depend on the zoom level. So here\\'s yet\\n  // another thickness version:\\n  v_thickness = webGLThickness / u_sqrtZoomRatio;\\n\\n  v_normal = unitNormal;\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n';module.exports=n})();","(()=>{\"use strict\";var e={d:(n,o)=>{for(var t in o)e.o(o,t)&&!e.o(n,t)&&Object.defineProperty(n,t,{enumerable:!0,get:o[t]})},o:(e,n)=>Object.prototype.hasOwnProperty.call(e,n),r:e=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(e,\"__esModule\",{value:!0})}},n={};e.r(n),e.d(n,{default:()=>o});const o=\"precision mediump float;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float radius = 0.5;\\nconst vec4 transparent = vec4(0.0, 0.0, 0.0, 0.0);\\n\\nvoid main(void) {\\n  vec2 m = gl_PointCoord - vec2(0.5, 0.5);\\n  float dist = radius - length(m);\\n\\n  float t = 0.0;\\n  if (dist > v_border)\\n    t = 1.0;\\n  else if (dist > 0.0)\\n    t = dist / v_border;\\n\\n  gl_FragColor = mix(transparent, v_color, t);\\n}\\n\";module.exports=n})();","(()=>{\"use strict\";var o={d:(t,e)=>{for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o:(o,t)=>Object.prototype.hasOwnProperty.call(o,t),r:o=>{\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(o,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(o,\"__esModule\",{value:!0})}},t={};o.r(t),o.d(t,{default:()=>e});const e=\"attribute vec2 a_position;\\nattribute float a_size;\\nattribute vec4 a_color;\\n\\nuniform float u_ratio;\\nuniform float u_scale;\\nuniform mat3 u_matrix;\\n\\nvarying vec4 v_color;\\nvarying float v_border;\\n\\nconst float bias = 255.0 / 254.0;\\n\\nvoid main() {\\n  gl_Position = vec4(\\n    (u_matrix * vec3(a_position, 1)).xy,\\n    0,\\n    1\\n  );\\n\\n  // Multiply the point size twice:\\n  //  - x SCALING_RATIO to correct the canvas scaling\\n  //  - x 2 to correct the formulae\\n  gl_PointSize = a_size * u_ratio * u_scale * 2.0;\\n\\n  v_border = (1.0 / u_ratio) * (0.5 / a_size);\\n\\n  // Extract the color:\\n  v_color = a_color;\\n  v_color.a *= bias;\\n}\\n\";module.exports=t})();","\"use strict\";\n/**\n * Sigma.js Shader Utils\n * ======================\n *\n * Code used to load sigma's shaders.\n * @module\n */\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.loadProgram = exports.loadFragmentShader = exports.loadVertexShader = void 0;\n/**\n * Function used to load a shader.\n */\nfunction loadShader(type, gl, source) {\n    var glType = type === \"VERTEX\" ? gl.VERTEX_SHADER : gl.FRAGMENT_SHADER;\n    // Creating the shader\n    var shader = gl.createShader(glType);\n    if (shader === null) {\n        throw new Error(\"loadShader: error while creating the shader\");\n    }\n    // Loading source\n    gl.shaderSource(shader, source);\n    // Compiling the shader\n    gl.compileShader(shader);\n    // Retrieving compilation status\n    var successfullyCompiled = gl.getShaderParameter(shader, gl.COMPILE_STATUS);\n    // Throwing if something went awry\n    if (!successfullyCompiled) {\n        var infoLog = gl.getShaderInfoLog(shader);\n        gl.deleteShader(shader);\n        throw new Error(\"loadShader: error while compiling the shader:\\n\".concat(infoLog, \"\\n\").concat(source));\n    }\n    return shader;\n}\nfunction loadVertexShader(gl, source) {\n    return loadShader(\"VERTEX\", gl, source);\n}\nexports.loadVertexShader = loadVertexShader;\nfunction loadFragmentShader(gl, source) {\n    return loadShader(\"FRAGMENT\", gl, source);\n}\nexports.loadFragmentShader = loadFragmentShader;\n/**\n * Function used to load a program.\n */\nfunction loadProgram(gl, shaders) {\n    var program = gl.createProgram();\n    if (program === null) {\n        throw new Error(\"loadProgram: error while creating the program.\");\n    }\n    var i, l;\n    // Attaching the shaders\n    for (i = 0, l = shaders.length; i < l; i++)\n        gl.attachShader(program, shaders[i]);\n    gl.linkProgram(program);\n    // Checking status\n    var successfullyLinked = gl.getProgramParameter(program, gl.LINK_STATUS);\n    if (!successfullyLinked) {\n        gl.deleteProgram(program);\n        throw new Error(\"loadProgram: error while linking the program.\");\n    }\n    return program;\n}\nexports.loadProgram = loadProgram;\n","\"use strict\";\n/**\n * Sigma.js Settings\n * =================================\n *\n * The list of settings and some handy functions.\n * @module\n */\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_SETTINGS = exports.validateSettings = void 0;\nvar label_1 = __importDefault(require(\"./rendering/canvas/label\"));\nvar hover_1 = __importDefault(require(\"./rendering/canvas/hover\"));\nvar edge_label_1 = __importDefault(require(\"./rendering/canvas/edge-label\"));\nvar node_fast_1 = __importDefault(require(\"./rendering/webgl/programs/node.fast\"));\nvar edge_1 = __importDefault(require(\"./rendering/webgl/programs/edge\"));\nvar edge_arrow_1 = __importDefault(require(\"./rendering/webgl/programs/edge.arrow\"));\nfunction validateSettings(settings) {\n    if (typeof settings.labelDensity !== \"number\" || settings.labelDensity < 0) {\n        throw new Error(\"Settings: invalid `labelDensity`. Expecting a positive number.\");\n    }\n    var minCameraRatio = settings.minCameraRatio, maxCameraRatio = settings.maxCameraRatio;\n    if (typeof minCameraRatio === \"number\" && typeof maxCameraRatio === \"number\" && maxCameraRatio < minCameraRatio) {\n        throw new Error(\"Settings: invalid camera ratio boundaries. Expecting `maxCameraRatio` to be greater than `minCameraRatio`.\");\n    }\n}\nexports.validateSettings = validateSettings;\nexports.DEFAULT_SETTINGS = {\n    // Performance\n    hideEdgesOnMove: false,\n    hideLabelsOnMove: false,\n    renderLabels: true,\n    renderEdgeLabels: false,\n    enableEdgeClickEvents: false,\n    enableEdgeWheelEvents: false,\n    enableEdgeHoverEvents: false,\n    // Component rendering\n    defaultNodeColor: \"#999\",\n    defaultNodeType: \"circle\",\n    defaultEdgeColor: \"#ccc\",\n    defaultEdgeType: \"line\",\n    labelFont: \"Arial\",\n    labelSize: 14,\n    labelWeight: \"normal\",\n    labelColor: { color: \"#000\" },\n    edgeLabelFont: \"Arial\",\n    edgeLabelSize: 14,\n    edgeLabelWeight: \"normal\",\n    edgeLabelColor: { attribute: \"color\" },\n    stagePadding: 30,\n    // Labels\n    labelDensity: 1,\n    labelGridCellSize: 100,\n    labelRenderedSizeThreshold: 6,\n    // Reducers\n    nodeReducer: null,\n    edgeReducer: null,\n    // Features\n    zIndex: false,\n    minCameraRatio: null,\n    maxCameraRatio: null,\n    // Renderers\n    labelRenderer: label_1.default,\n    hoverRenderer: hover_1.default,\n    edgeLabelRenderer: edge_label_1.default,\n    // Lifecycle\n    allowInvalidContainer: false,\n    // Program classes\n    nodeProgramClasses: {\n        circle: node_fast_1.default,\n    },\n    edgeProgramClasses: {\n        arrow: edge_arrow_1.default,\n        line: edge_1.default,\n    },\n};\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __values = (this && this.__values) || function(o) {\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n    if (m) return m.call(o);\n    if (o && typeof o.length === \"number\") return {\n        next: function () {\n            if (o && i >= o.length) o = void 0;\n            return { value: o && o[i++], done: !o };\n        }\n    };\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar camera_1 = __importDefault(require(\"./core/camera\"));\nvar mouse_1 = __importDefault(require(\"./core/captors/mouse\"));\nvar quadtree_1 = __importDefault(require(\"./core/quadtree\"));\nvar types_1 = require(\"./types\");\nvar utils_1 = require(\"./utils\");\nvar labels_1 = require(\"./core/labels\");\nvar settings_1 = require(\"./settings\");\nvar touch_1 = __importDefault(require(\"./core/captors/touch\"));\nvar matrices_1 = require(\"./utils/matrices\");\nvar edge_collisions_1 = require(\"./utils/edge-collisions\");\n/**\n * Important functions.\n */\nfunction applyNodeDefaults(settings, key, data) {\n    if (!data.hasOwnProperty(\"x\") || !data.hasOwnProperty(\"y\"))\n        throw new Error(\"Sigma: could not find a valid position (x, y) for node \\\"\".concat(key, \"\\\". All your nodes must have a number \\\"x\\\" and \\\"y\\\". Maybe your forgot to apply a layout or your \\\"nodeReducer\\\" is not returning the correct data?\"));\n    if (!data.color)\n        data.color = settings.defaultNodeColor;\n    if (!data.label && data.label !== \"\")\n        data.label = null;\n    if (data.label !== undefined && data.label !== null)\n        data.label = \"\" + data.label;\n    else\n        data.label = null;\n    if (!data.size)\n        data.size = 2;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"highlighted\"))\n        data.highlighted = false;\n    if (!data.hasOwnProperty(\"forceLabel\"))\n        data.forceLabel = false;\n    if (!data.type || data.type === \"\")\n        data.type = settings.defaultNodeType;\n    if (!data.zIndex)\n        data.zIndex = 0;\n    return data;\n}\nfunction applyEdgeDefaults(settings, key, data) {\n    if (!data.color)\n        data.color = settings.defaultEdgeColor;\n    if (!data.label)\n        data.label = \"\";\n    if (!data.size)\n        data.size = 0.5;\n    if (!data.hasOwnProperty(\"hidden\"))\n        data.hidden = false;\n    if (!data.hasOwnProperty(\"forceLabel\"))\n        data.forceLabel = false;\n    if (!data.type || data.type === \"\")\n        data.type = settings.defaultEdgeType;\n    if (!data.zIndex)\n        data.zIndex = 0;\n    return data;\n}\n/**\n * Main class.\n *\n * @constructor\n * @param {Graph}       graph     - Graph to render.\n * @param {HTMLElement} container - DOM container in which to render.\n * @param {object}      settings  - Optional settings.\n */\nvar Sigma = /** @class */ (function (_super) {\n    __extends(Sigma, _super);\n    function Sigma(graph, container, settings) {\n        if (settings === void 0) { settings = {}; }\n        var _this = _super.call(this) || this;\n        _this.elements = {};\n        _this.canvasContexts = {};\n        _this.webGLContexts = {};\n        _this.activeListeners = {};\n        _this.quadtree = new quadtree_1.default();\n        _this.labelGrid = new labels_1.LabelGrid();\n        _this.nodeDataCache = {};\n        _this.edgeDataCache = {};\n        _this.nodesWithForcedLabels = [];\n        _this.edgesWithForcedLabels = [];\n        _this.nodeExtent = { x: [0, 1], y: [0, 1] };\n        _this.matrix = (0, matrices_1.identity)();\n        _this.invMatrix = (0, matrices_1.identity)();\n        _this.correctionRatio = 1;\n        _this.customBBox = null;\n        _this.normalizationFunction = (0, utils_1.createNormalizationFunction)({\n            x: [0, 1],\n            y: [0, 1],\n        });\n        // Cache:\n        _this.cameraSizeRatio = 1;\n        // Starting dimensions and pixel ratio\n        _this.width = 0;\n        _this.height = 0;\n        _this.pixelRatio = (0, utils_1.getPixelRatio)();\n        // State\n        _this.displayedLabels = new Set();\n        _this.highlightedNodes = new Set();\n        _this.hoveredNode = null;\n        _this.hoveredEdge = null;\n        _this.renderFrame = null;\n        _this.renderHighlightedNodesFrame = null;\n        _this.needToProcess = false;\n        _this.needToSoftProcess = false;\n        _this.checkEdgesEventsFrame = null;\n        // Programs\n        _this.nodePrograms = {};\n        _this.hoverNodePrograms = {};\n        _this.edgePrograms = {};\n        _this.settings = (0, utils_1.assign)({}, settings_1.DEFAULT_SETTINGS, settings);\n        // Validating\n        (0, settings_1.validateSettings)(_this.settings);\n        (0, utils_1.validateGraph)(graph);\n        if (!(container instanceof HTMLElement))\n            throw new Error(\"Sigma: container should be an html element.\");\n        // Properties\n        _this.graph = graph;\n        _this.container = container;\n        // Initializing contexts\n        _this.createWebGLContext(\"edges\", { preserveDrawingBuffer: true });\n        _this.createCanvasContext(\"edgeLabels\");\n        _this.createWebGLContext(\"nodes\");\n        _this.createCanvasContext(\"labels\");\n        _this.createCanvasContext(\"hovers\");\n        _this.createWebGLContext(\"hoverNodes\");\n        _this.createCanvasContext(\"mouse\");\n        // Blending\n        for (var key in _this.webGLContexts) {\n            var gl = _this.webGLContexts[key];\n            gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n            gl.enable(gl.BLEND);\n        }\n        // Loading programs\n        for (var type in _this.settings.nodeProgramClasses) {\n            var NodeProgramClass = _this.settings.nodeProgramClasses[type];\n            _this.nodePrograms[type] = new NodeProgramClass(_this.webGLContexts.nodes, _this);\n            _this.hoverNodePrograms[type] = new NodeProgramClass(_this.webGLContexts.hoverNodes, _this);\n        }\n        for (var type in _this.settings.edgeProgramClasses) {\n            var EdgeProgramClass = _this.settings.edgeProgramClasses[type];\n            _this.edgePrograms[type] = new EdgeProgramClass(_this.webGLContexts.edges, _this);\n        }\n        // Initial resize\n        _this.resize();\n        // Initializing the camera\n        _this.camera = new camera_1.default();\n        // Binding camera events\n        _this.bindCameraHandlers();\n        // Initializing captors\n        _this.mouseCaptor = new mouse_1.default(_this.elements.mouse, _this);\n        _this.touchCaptor = new touch_1.default(_this.elements.mouse, _this);\n        // Binding event handlers\n        _this.bindEventHandlers();\n        // Binding graph handlers\n        _this.bindGraphHandlers();\n        // Trigger eventual settings-related things\n        _this.handleSettingsUpdate();\n        // Processing data for the first time & render\n        _this.process();\n        _this.render();\n        return _this;\n    }\n    /**---------------------------------------------------------------------------\n     * Internal methods.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Internal function used to create a canvas element.\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvas = function (id) {\n        var canvas = (0, utils_1.createElement)(\"canvas\", {\n            position: \"absolute\",\n        }, {\n            class: \"sigma-\".concat(id),\n        });\n        this.elements[id] = canvas;\n        this.container.appendChild(canvas);\n        return canvas;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string} id - Context's id.\n     * @return {Sigma}\n     */\n    Sigma.prototype.createCanvasContext = function (id) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = {\n            preserveDrawingBuffer: false,\n            antialias: false,\n        };\n        this.canvasContexts[id] = canvas.getContext(\"2d\", contextOptions);\n        return this;\n    };\n    /**\n     * Internal function used to create a canvas context and add the relevant\n     * DOM elements.\n     *\n     * @param  {string}  id      - Context's id.\n     * @param  {object?} options - #getContext params to override (optional)\n     * @return {Sigma}\n     */\n    Sigma.prototype.createWebGLContext = function (id, options) {\n        var canvas = this.createCanvas(id);\n        var contextOptions = __assign({ preserveDrawingBuffer: false, antialias: false }, (options || {}));\n        var context;\n        // First we try webgl2 for an easy performance boost\n        context = canvas.getContext(\"webgl2\", contextOptions);\n        // Else we fall back to webgl\n        if (!context)\n            context = canvas.getContext(\"webgl\", contextOptions);\n        // Edge, I am looking right at you...\n        if (!context)\n            context = canvas.getContext(\"experimental-webgl\", contextOptions);\n        this.webGLContexts[id] = context;\n        return this;\n    };\n    /**\n     * Method binding camera handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindCameraHandlers = function () {\n        var _this = this;\n        this.activeListeners.camera = function () {\n            _this._scheduleRefresh();\n        };\n        this.camera.on(\"updated\", this.activeListeners.camera);\n        return this;\n    };\n    /**\n     * Method that checks whether or not a node collides with a given position.\n     */\n    Sigma.prototype.mouseIsOnNode = function (_a, _b, size) {\n        var x = _a.x, y = _a.y;\n        var nodeX = _b.x, nodeY = _b.y;\n        return (x > nodeX - size &&\n            x < nodeX + size &&\n            y > nodeY - size &&\n            y < nodeY + size &&\n            Math.sqrt(Math.pow(x - nodeX, 2) + Math.pow(y - nodeY, 2)) < size);\n    };\n    /**\n     * Method that returns all nodes in quad at a given position.\n     */\n    Sigma.prototype.getQuadNodes = function (position) {\n        var mouseGraphPosition = this.viewportToFramedGraph(position);\n        return this.quadtree.point(mouseGraphPosition.x, 1 - mouseGraphPosition.y);\n    };\n    /**\n     * Method that returns the closest node to a given position.\n     */\n    Sigma.prototype.getNodeAtPosition = function (position) {\n        var x = position.x, y = position.y;\n        var quadNodes = this.getQuadNodes(position);\n        // We will hover the node whose center is closest to mouse\n        var minDistance = Infinity, nodeAtPosition = null;\n        for (var i = 0, l = quadNodes.length; i < l; i++) {\n            var node = quadNodes[i];\n            var data = this.nodeDataCache[node];\n            var nodePosition = this.framedGraphToViewport(data);\n            var size = this.scaleSize(data.size);\n            if (!data.hidden && this.mouseIsOnNode(position, nodePosition, size)) {\n                var distance = Math.sqrt(Math.pow(x - nodePosition.x, 2) + Math.pow(y - nodePosition.y, 2));\n                // TODO: sort by min size also for cases where center is the same\n                if (distance < minDistance) {\n                    minDistance = distance;\n                    nodeAtPosition = node;\n                }\n            }\n        }\n        return nodeAtPosition;\n    };\n    /**\n     * Method binding event handlers.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindEventHandlers = function () {\n        var _this = this;\n        // Handling window resize\n        this.activeListeners.handleResize = function () {\n            _this.needToSoftProcess = true;\n            _this._scheduleRefresh();\n        };\n        window.addEventListener(\"resize\", this.activeListeners.handleResize);\n        // Handling mouse move\n        this.activeListeners.handleMove = function (e) {\n            var baseEvent = {\n                event: e,\n                preventSigmaDefault: function () {\n                    e.preventSigmaDefault();\n                },\n            };\n            var nodeToHover = _this.getNodeAtPosition(e);\n            if (nodeToHover && _this.hoveredNode !== nodeToHover && !_this.nodeDataCache[nodeToHover].hidden) {\n                // Handling passing from one node to the other directly\n                if (_this.hoveredNode)\n                    _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), { node: _this.hoveredNode }));\n                _this.hoveredNode = nodeToHover;\n                _this.emit(\"enterNode\", __assign(__assign({}, baseEvent), { node: nodeToHover }));\n                _this.scheduleHighlightedNodesRender();\n                return;\n            }\n            // Checking if the hovered node is still hovered\n            if (_this.hoveredNode) {\n                var data = _this.nodeDataCache[_this.hoveredNode];\n                var pos = _this.framedGraphToViewport(data);\n                var size = _this.scaleSize(data.size);\n                if (!_this.mouseIsOnNode(e, pos, size)) {\n                    var node = _this.hoveredNode;\n                    _this.hoveredNode = null;\n                    _this.emit(\"leaveNode\", __assign(__assign({}, baseEvent), { node: node }));\n                    _this.scheduleHighlightedNodesRender();\n                    return;\n                }\n            }\n            if (_this.settings.enableEdgeHoverEvents === true) {\n                _this.checkEdgeHoverEvents(baseEvent);\n            }\n            else if (_this.settings.enableEdgeHoverEvents === \"debounce\") {\n                if (!_this.checkEdgesEventsFrame)\n                    _this.checkEdgesEventsFrame = (0, utils_1.requestFrame)(function () {\n                        _this.checkEdgeHoverEvents(baseEvent);\n                        _this.checkEdgesEventsFrame = null;\n                    });\n            }\n        };\n        // Handling click\n        var createMouseListener = function (eventType) {\n            return function (e) {\n                var baseEvent = {\n                    event: e,\n                    preventSigmaDefault: function () {\n                        e.preventSigmaDefault();\n                    },\n                };\n                var isFakeSigmaMouseEvent = e.original.isFakeSigmaMouseEvent;\n                var nodeAtPosition = isFakeSigmaMouseEvent ? _this.getNodeAtPosition(e) : _this.hoveredNode;\n                if (nodeAtPosition)\n                    return _this.emit(\"\".concat(eventType, \"Node\"), __assign(__assign({}, baseEvent), { node: nodeAtPosition }));\n                if (eventType === \"wheel\" ? _this.settings.enableEdgeWheelEvents : _this.settings.enableEdgeClickEvents) {\n                    var edge = _this.getEdgeAtPoint(e.x, e.y);\n                    if (edge)\n                        return _this.emit(\"\".concat(eventType, \"Edge\"), __assign(__assign({}, baseEvent), { edge: edge }));\n                }\n                return _this.emit(\"\".concat(eventType, \"Stage\"), baseEvent);\n            };\n        };\n        this.activeListeners.handleClick = createMouseListener(\"click\");\n        this.activeListeners.handleRightClick = createMouseListener(\"rightClick\");\n        this.activeListeners.handleDoubleClick = createMouseListener(\"doubleClick\");\n        this.activeListeners.handleWheel = createMouseListener(\"wheel\");\n        this.activeListeners.handleDown = createMouseListener(\"down\");\n        this.mouseCaptor.on(\"mousemove\", this.activeListeners.handleMove);\n        this.mouseCaptor.on(\"click\", this.activeListeners.handleClick);\n        this.mouseCaptor.on(\"rightClick\", this.activeListeners.handleRightClick);\n        this.mouseCaptor.on(\"doubleClick\", this.activeListeners.handleDoubleClick);\n        this.mouseCaptor.on(\"wheel\", this.activeListeners.handleWheel);\n        this.mouseCaptor.on(\"mousedown\", this.activeListeners.handleDown);\n        // TODO\n        // Deal with Touch captor events\n        return this;\n    };\n    /**\n     * Method binding graph handlers\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.bindGraphHandlers = function () {\n        var _this = this;\n        var graph = this.graph;\n        this.activeListeners.graphUpdate = function () {\n            _this.needToProcess = true;\n            _this._scheduleRefresh();\n        };\n        this.activeListeners.softGraphUpdate = function () {\n            _this.needToSoftProcess = true;\n            _this._scheduleRefresh();\n        };\n        this.activeListeners.dropNodeGraphUpdate = function (e) {\n            delete _this.nodeDataCache[e.key];\n            if (_this.hoveredNode === e.key)\n                _this.hoveredNode = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.dropEdgeGraphUpdate = function (e) {\n            delete _this.edgeDataCache[e.key];\n            if (_this.hoveredEdge === e.key)\n                _this.hoveredEdge = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.clearEdgesGraphUpdate = function () {\n            _this.edgeDataCache = {};\n            _this.hoveredEdge = null;\n            _this.activeListeners.graphUpdate();\n        };\n        this.activeListeners.clearGraphUpdate = function () {\n            _this.nodeDataCache = {};\n            _this.hoveredNode = null;\n            _this.activeListeners.clearEdgesGraphUpdate();\n        };\n        graph.on(\"nodeAdded\", this.activeListeners.graphUpdate);\n        graph.on(\"nodeDropped\", this.activeListeners.dropNodeGraphUpdate);\n        graph.on(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeAdded\", this.activeListeners.graphUpdate);\n        graph.on(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n        graph.on(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.on(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.on(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n        graph.on(\"cleared\", this.activeListeners.clearGraphUpdate);\n        return this;\n    };\n    /**\n     * Method dealing with \"leaveEdge\" and \"enterEdge\" events.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.checkEdgeHoverEvents = function (payload) {\n        var edgeToHover = this.hoveredNode ? null : this.getEdgeAtPoint(payload.event.x, payload.event.y);\n        if (edgeToHover !== this.hoveredEdge) {\n            if (this.hoveredEdge)\n                this.emit(\"leaveEdge\", __assign(__assign({}, payload), { edge: this.hoveredEdge }));\n            if (edgeToHover)\n                this.emit(\"enterEdge\", __assign(__assign({}, payload), { edge: edgeToHover }));\n            this.hoveredEdge = edgeToHover;\n        }\n        return this;\n    };\n    /**\n     * Method looking for an edge colliding with a given point at (x, y). Returns\n     * the key of the edge if any, or null else.\n     */\n    Sigma.prototype.getEdgeAtPoint = function (x, y) {\n        var e_1, _a;\n        var _this = this;\n        var _b = this, edgeDataCache = _b.edgeDataCache, nodeDataCache = _b.nodeDataCache;\n        // Check first that pixel is colored:\n        // Note that mouse positions must be corrected by pixel ratio to correctly\n        // index the drawing buffer.\n        if (!(0, edge_collisions_1.isPixelColored)(this.webGLContexts.edges, x * this.pixelRatio, y * this.pixelRatio))\n            return null;\n        // Check for each edge if it collides with the point:\n        var _c = this.viewportToGraph({ x: x, y: y }), graphX = _c.x, graphY = _c.y;\n        // To translate edge thicknesses to the graph system, we observe by how much\n        // the length of a non-null edge is transformed to between the graph system\n        // and the viewport system:\n        var transformationRatio = 0;\n        this.graph.someEdge(function (key, _, sourceId, targetId, _a, _b) {\n            var xs = _a.x, ys = _a.y;\n            var xt = _b.x, yt = _b.y;\n            if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden)\n                return false;\n            if (xs !== xt || ys !== yt) {\n                var graphLength = Math.sqrt(Math.pow(xt - xs, 2) + Math.pow(yt - ys, 2));\n                var _c = _this.graphToViewport({ x: xs, y: ys }), vp_xs = _c.x, vp_ys = _c.y;\n                var _d = _this.graphToViewport({ x: xt, y: yt }), vp_xt = _d.x, vp_yt = _d.y;\n                var viewportLength = Math.sqrt(Math.pow(vp_xt - vp_xs, 2) + Math.pow(vp_yt - vp_ys, 2));\n                transformationRatio = graphLength / viewportLength;\n                return true;\n            }\n        });\n        // If no non-null edge has been found, return null:\n        if (!transformationRatio)\n            return null;\n        // Now we can look for matching edges:\n        var edges = this.graph.filterEdges(function (key, edgeAttributes, sourceId, targetId, sourcePosition, targetPosition) {\n            if (edgeDataCache[key].hidden || nodeDataCache[sourceId].hidden || nodeDataCache[targetId].hidden)\n                return false;\n            if ((0, edge_collisions_1.doEdgeCollideWithPoint)(graphX, graphY, sourcePosition.x, sourcePosition.y, targetPosition.x, targetPosition.y, \n            // Adapt the edge size to the zoom ratio:\n            (edgeDataCache[key].size * transformationRatio) / _this.cameraSizeRatio)) {\n                return true;\n            }\n        });\n        if (edges.length === 0)\n            return null; // no edges found\n        // if none of the edges have a zIndex, selected the most recently created one to match the rendering order\n        var selectedEdge = edges[edges.length - 1];\n        // otherwise select edge with highest zIndex\n        var highestZIndex = -Infinity;\n        try {\n            for (var edges_1 = __values(edges), edges_1_1 = edges_1.next(); !edges_1_1.done; edges_1_1 = edges_1.next()) {\n                var edge = edges_1_1.value;\n                var zIndex = this.graph.getEdgeAttribute(edge, \"zIndex\");\n                if (zIndex >= highestZIndex) {\n                    selectedEdge = edge;\n                    highestZIndex = zIndex;\n                }\n            }\n        }\n        catch (e_1_1) { e_1 = { error: e_1_1 }; }\n        finally {\n            try {\n                if (edges_1_1 && !edges_1_1.done && (_a = edges_1.return)) _a.call(edges_1);\n            }\n            finally { if (e_1) throw e_1.error; }\n        }\n        return selectedEdge;\n    };\n    /**\n     * Method used to process the whole graph's data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.process = function (keepArrays) {\n        var _this = this;\n        if (keepArrays === void 0) { keepArrays = false; }\n        var graph = this.graph;\n        var settings = this.settings;\n        var dimensions = this.getDimensions();\n        var nodeZExtent = [Infinity, -Infinity];\n        var edgeZExtent = [Infinity, -Infinity];\n        // Clearing the quad\n        this.quadtree.clear();\n        // Resetting the label grid\n        // TODO: it's probably better to do this explicitly or on resizes for layout and anims\n        this.labelGrid.resizeAndClear(dimensions, settings.labelGridCellSize);\n        // Clear the highlightedNodes\n        this.highlightedNodes = new Set();\n        // Computing extents\n        this.nodeExtent = (0, utils_1.graphExtent)(graph);\n        // Resetting `forceLabel` indices\n        this.nodesWithForcedLabels = [];\n        this.edgesWithForcedLabels = [];\n        // NOTE: it is important to compute this matrix after computing the node's extent\n        // because #.getGraphDimensions relies on it\n        var nullCamera = new camera_1.default();\n        var nullCameraMatrix = (0, utils_1.matrixFromCamera)(nullCamera.getState(), this.getDimensions(), this.getGraphDimensions(), this.getSetting(\"stagePadding\") || 0);\n        // Rescaling function\n        this.normalizationFunction = (0, utils_1.createNormalizationFunction)(this.customBBox || this.nodeExtent);\n        var nodesPerPrograms = {};\n        var nodes = graph.nodes();\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            // Node display data resolution:\n            //   1. First we get the node's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            //   4. We apply the normalization function\n            // We shallow copy node data to avoid dangerous behaviors from reducers\n            var attr = Object.assign({}, graph.getNodeAttributes(node));\n            if (settings.nodeReducer)\n                attr = settings.nodeReducer(node, attr);\n            var data = applyNodeDefaults(this.settings, node, attr);\n            nodesPerPrograms[data.type] = (nodesPerPrograms[data.type] || 0) + 1;\n            this.nodeDataCache[node] = data;\n            this.normalizationFunction.applyTo(data);\n            if (data.forceLabel)\n                this.nodesWithForcedLabels.push(node);\n            if (this.settings.zIndex) {\n                if (data.zIndex < nodeZExtent[0])\n                    nodeZExtent[0] = data.zIndex;\n                if (data.zIndex > nodeZExtent[1])\n                    nodeZExtent[1] = data.zIndex;\n            }\n        }\n        for (var type in this.nodePrograms) {\n            if (!this.nodePrograms.hasOwnProperty(type)) {\n                throw new Error(\"Sigma: could not find a suitable program for node type \\\"\".concat(type, \"\\\"!\"));\n            }\n            if (!keepArrays)\n                this.nodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n            // We reset that count here, so that we can reuse it while calling the Program#process methods:\n            nodesPerPrograms[type] = 0;\n        }\n        // Handling node z-index\n        // TODO: z-index needs us to compute display data before hand\n        if (this.settings.zIndex && nodeZExtent[0] !== nodeZExtent[1])\n            nodes = (0, utils_1.zIndexOrdering)(nodeZExtent, function (node) { return _this.nodeDataCache[node].zIndex; }, nodes);\n        for (var i = 0, l = nodes.length; i < l; i++) {\n            var node = nodes[i];\n            var data = this.nodeDataCache[node];\n            this.quadtree.add(node, data.x, 1 - data.y, data.size / this.width);\n            if (typeof data.label === \"string\" && !data.hidden)\n                this.labelGrid.add(node, data.size, this.framedGraphToViewport(data, { matrix: nullCameraMatrix }));\n            this.nodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n            // Save the node in the highlighted set if needed\n            if (data.highlighted && !data.hidden)\n                this.highlightedNodes.add(node);\n        }\n        this.labelGrid.organize();\n        var edgesPerPrograms = {};\n        var edges = graph.edges();\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            // Edge display data resolution:\n            //   1. First we get the edge's attributes\n            //   2. We optionally reduce them using the function provided by the user\n            //      Note that this function must return a total object and won't be merged\n            //   3. We apply our defaults, while running some vital checks\n            // We shallow copy edge data to avoid dangerous behaviors from reducers\n            var attr = Object.assign({}, graph.getEdgeAttributes(edge));\n            if (settings.edgeReducer)\n                attr = settings.edgeReducer(edge, attr);\n            var data = applyEdgeDefaults(this.settings, edge, attr);\n            edgesPerPrograms[data.type] = (edgesPerPrograms[data.type] || 0) + 1;\n            this.edgeDataCache[edge] = data;\n            if (data.forceLabel && !data.hidden)\n                this.edgesWithForcedLabels.push(edge);\n            if (this.settings.zIndex) {\n                if (data.zIndex < edgeZExtent[0])\n                    edgeZExtent[0] = data.zIndex;\n                if (data.zIndex > edgeZExtent[1])\n                    edgeZExtent[1] = data.zIndex;\n            }\n        }\n        for (var type in this.edgePrograms) {\n            if (!this.edgePrograms.hasOwnProperty(type)) {\n                throw new Error(\"Sigma: could not find a suitable program for edge type \\\"\".concat(type, \"\\\"!\"));\n            }\n            if (!keepArrays)\n                this.edgePrograms[type].allocate(edgesPerPrograms[type] || 0);\n            // We reset that count here, so that we can reuse it while calling the Program#process methods:\n            edgesPerPrograms[type] = 0;\n        }\n        // Handling edge z-index\n        if (this.settings.zIndex && edgeZExtent[0] !== edgeZExtent[1])\n            edges = (0, utils_1.zIndexOrdering)(edgeZExtent, function (edge) { return _this.edgeDataCache[edge].zIndex; }, edges);\n        for (var i = 0, l = edges.length; i < l; i++) {\n            var edge = edges[i];\n            var data = this.edgeDataCache[edge];\n            var extremities = graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]];\n            var hidden = data.hidden || sourceData.hidden || targetData.hidden;\n            this.edgePrograms[data.type].process(sourceData, targetData, data, hidden, edgesPerPrograms[data.type]++);\n        }\n        for (var type in this.edgePrograms) {\n            var program = this.edgePrograms[type];\n            if (!keepArrays && typeof program.computeIndices === \"function\")\n                program.computeIndices();\n        }\n        return this;\n    };\n    /**\n     * Method that backports potential settings updates where it's needed.\n     * @private\n     */\n    Sigma.prototype.handleSettingsUpdate = function () {\n        this.camera.minRatio = this.settings.minCameraRatio;\n        this.camera.maxRatio = this.settings.maxCameraRatio;\n        this.camera.setState(this.camera.validateState(this.camera.getState()));\n        return this;\n    };\n    /**\n     * Method that decides whether to reprocess graph or not, and then render the\n     * graph.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype._refresh = function () {\n        // Do we need to process data?\n        if (this.needToProcess) {\n            this.process();\n        }\n        else if (this.needToSoftProcess) {\n            this.process(true);\n        }\n        // Resetting state\n        this.needToProcess = false;\n        this.needToSoftProcess = false;\n        // Rendering\n        this.render();\n        return this;\n    };\n    /**\n     * Method that schedules a `_refresh` call if none has been scheduled yet. It\n     * will then be processed next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype._scheduleRefresh = function () {\n        var _this = this;\n        if (!this.renderFrame) {\n            this.renderFrame = (0, utils_1.requestFrame)(function () {\n                _this._refresh();\n                _this.renderFrame = null;\n            });\n        }\n        return this;\n    };\n    /**\n     * Method used to render labels.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderLabels = function () {\n        if (!this.settings.renderLabels)\n            return this;\n        var cameraState = this.camera.getState();\n        // Finding visible nodes to display their labels\n        var visibleNodes;\n        if (cameraState.ratio >= 1) {\n            // Camera is unzoomed so no need to ask the quadtree for visible nodes\n            visibleNodes = new Set(this.graph.nodes());\n        }\n        else {\n            // Let's ask the quadtree\n            var viewRectangle = this.viewRectangle();\n            visibleNodes = new Set(this.quadtree.rectangle(viewRectangle.x1, 1 - viewRectangle.y1, viewRectangle.x2, 1 - viewRectangle.y2, viewRectangle.height));\n        }\n        // Selecting labels to draw\n        // TODO: drop gridsettings likewise\n        // TODO: optimize through visible nodes\n        var labelsToDisplay = this.labelGrid\n            .getLabelsToDisplay(cameraState.ratio, this.settings.labelDensity)\n            .concat(this.nodesWithForcedLabels);\n        this.displayedLabels = new Set();\n        // Drawing labels\n        var context = this.canvasContexts.labels;\n        for (var i = 0, l = labelsToDisplay.length; i < l; i++) {\n            var node = labelsToDisplay[i];\n            var data = this.nodeDataCache[node];\n            // If the node was already drawn (like if it is eligible AND has\n            // `forceLabel`), we don't want to draw it again\n            if (this.displayedLabels.has(node))\n                continue;\n            // If the node is hidden, we don't need to display its label obviously\n            if (data.hidden)\n                continue;\n            var _a = this.framedGraphToViewport(data), x = _a.x, y = _a.y;\n            // TODO: we can cache the labels we need to render until the camera's ratio changes\n            // TODO: this should be computed in the canvas components?\n            var size = this.scaleSize(data.size);\n            if (!data.forceLabel && size < this.settings.labelRenderedSizeThreshold)\n                continue;\n            if (!visibleNodes.has(node))\n                continue;\n            // TODO:\n            // Because displayed edge labels depend directly on actually rendered node\n            // labels, we need to only add to this.displayedLabels nodes whose label\n            // is rendered.\n            // This makes this.displayedLabels depend on viewport, which might become\n            // an issue once we start memoizing getLabelsToDisplay.\n            this.displayedLabels.add(node);\n            this.settings.labelRenderer(context, __assign(__assign({ key: node }, data), { size: size, x: x, y: y }), this.settings);\n        }\n        return this;\n    };\n    /**\n     * Method used to render edge labels, based on which node labels were\n     * rendered.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderEdgeLabels = function () {\n        if (!this.settings.renderEdgeLabels)\n            return this;\n        var context = this.canvasContexts.edgeLabels;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        var edgeLabelsToDisplay = (0, labels_1.edgeLabelsToDisplayFromNodes)({\n            graph: this.graph,\n            hoveredNode: this.hoveredNode,\n            displayedNodeLabels: this.displayedLabels,\n            highlightedNodes: this.highlightedNodes,\n        }).concat(this.edgesWithForcedLabels);\n        var displayedLabels = new Set();\n        for (var i = 0, l = edgeLabelsToDisplay.length; i < l; i++) {\n            var edge = edgeLabelsToDisplay[i], extremities = this.graph.extremities(edge), sourceData = this.nodeDataCache[extremities[0]], targetData = this.nodeDataCache[extremities[1]], edgeData = this.edgeDataCache[edge];\n            // If the edge was already drawn (like if it is eligible AND has\n            // `forceLabel`), we don't want to draw it again\n            if (displayedLabels.has(edge))\n                continue;\n            // If the edge is hidden we don't need to display its label\n            // NOTE: the test on sourceData & targetData is probably paranoid at this point?\n            if (edgeData.hidden || sourceData.hidden || targetData.hidden) {\n                continue;\n            }\n            this.settings.edgeLabelRenderer(context, __assign(__assign({ key: edge }, edgeData), { size: this.scaleSize(edgeData.size) }), __assign(__assign(__assign({ key: extremities[0] }, sourceData), this.framedGraphToViewport(sourceData)), { size: this.scaleSize(sourceData.size) }), __assign(__assign(__assign({ key: extremities[1] }, targetData), this.framedGraphToViewport(targetData)), { size: this.scaleSize(targetData.size) }), this.settings);\n            displayedLabels.add(edge);\n        }\n        return this;\n    };\n    /**\n     * Method used to render the highlighted nodes.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.renderHighlightedNodes = function () {\n        var _this = this;\n        var context = this.canvasContexts.hovers;\n        // Clearing\n        context.clearRect(0, 0, this.width, this.height);\n        // Rendering\n        var render = function (node) {\n            var data = _this.nodeDataCache[node];\n            var _a = _this.framedGraphToViewport(data), x = _a.x, y = _a.y;\n            var size = _this.scaleSize(data.size);\n            _this.settings.hoverRenderer(context, __assign(__assign({ key: node }, data), { size: size, x: x, y: y }), _this.settings);\n        };\n        var nodesToRender = [];\n        if (this.hoveredNode && !this.nodeDataCache[this.hoveredNode].hidden) {\n            nodesToRender.push(this.hoveredNode);\n        }\n        this.highlightedNodes.forEach(function (node) {\n            // The hovered node has already been highlighted\n            if (node !== _this.hoveredNode)\n                nodesToRender.push(node);\n        });\n        // Draw labels:\n        nodesToRender.forEach(function (node) { return render(node); });\n        // Draw WebGL nodes on top of the labels:\n        var nodesPerPrograms = {};\n        // 1. Count nodes per type:\n        nodesToRender.forEach(function (node) {\n            var type = _this.nodeDataCache[node].type;\n            nodesPerPrograms[type] = (nodesPerPrograms[type] || 0) + 1;\n        });\n        // 2. Allocate for each type for the proper number of nodes\n        for (var type in this.hoverNodePrograms) {\n            this.hoverNodePrograms[type].allocate(nodesPerPrograms[type] || 0);\n            // Also reset count, to use when rendering:\n            nodesPerPrograms[type] = 0;\n        }\n        // 3. Process all nodes to render:\n        nodesToRender.forEach(function (node) {\n            var data = _this.nodeDataCache[node];\n            _this.hoverNodePrograms[data.type].process(data, data.hidden, nodesPerPrograms[data.type]++);\n        });\n        // 4. Clear hovered nodes layer:\n        this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n        // 5. Render:\n        for (var type in this.hoverNodePrograms) {\n            var program = this.hoverNodePrograms[type];\n            program.bind();\n            program.bufferData();\n            program.render({\n                matrix: this.matrix,\n                width: this.width,\n                height: this.height,\n                ratio: this.camera.ratio,\n                correctionRatio: this.correctionRatio / this.camera.ratio,\n                scalingRatio: this.pixelRatio,\n            });\n        }\n    };\n    /**\n     * Method used to schedule a hover render.\n     *\n     */\n    Sigma.prototype.scheduleHighlightedNodesRender = function () {\n        var _this = this;\n        if (this.renderHighlightedNodesFrame || this.renderFrame)\n            return;\n        this.renderHighlightedNodesFrame = (0, utils_1.requestFrame)(function () {\n            // Resetting state\n            _this.renderHighlightedNodesFrame = null;\n            // Rendering\n            _this.renderHighlightedNodes();\n            _this.renderEdgeLabels();\n        });\n    };\n    /**\n     * Method used to render.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.render = function () {\n        var _this = this;\n        this.emit(\"beforeRender\");\n        var handleEscape = function () {\n            _this.emit(\"afterRender\");\n            return _this;\n        };\n        // If a render was scheduled, we cancel it\n        if (this.renderFrame) {\n            (0, utils_1.cancelFrame)(this.renderFrame);\n            this.renderFrame = null;\n            this.needToProcess = false;\n            this.needToSoftProcess = false;\n        }\n        // First we need to resize\n        this.resize();\n        // Clearing the canvases\n        this.clear();\n        // Recomputing useful camera-related values:\n        this.updateCachedValues();\n        // If we have no nodes we can stop right there\n        if (!this.graph.order)\n            return handleEscape();\n        // TODO: improve this heuristic or move to the captor itself?\n        // TODO: deal with the touch captor here as well\n        var mouseCaptor = this.mouseCaptor;\n        var moving = this.camera.isAnimated() ||\n            mouseCaptor.isMoving ||\n            mouseCaptor.draggedEvents ||\n            mouseCaptor.currentWheelDirection;\n        // Then we need to extract a matrix from the camera\n        var cameraState = this.camera.getState();\n        var viewportDimensions = this.getDimensions();\n        var graphDimensions = this.getGraphDimensions();\n        var padding = this.getSetting(\"stagePadding\") || 0;\n        this.matrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding);\n        this.invMatrix = (0, utils_1.matrixFromCamera)(cameraState, viewportDimensions, graphDimensions, padding, true);\n        this.correctionRatio = (0, utils_1.getMatrixImpact)(this.matrix, cameraState, viewportDimensions);\n        // Drawing nodes\n        for (var type in this.nodePrograms) {\n            var program = this.nodePrograms[type];\n            program.bind();\n            program.bufferData();\n            program.render({\n                matrix: this.matrix,\n                width: this.width,\n                height: this.height,\n                ratio: cameraState.ratio,\n                correctionRatio: this.correctionRatio / cameraState.ratio,\n                scalingRatio: this.pixelRatio,\n            });\n        }\n        // Drawing edges\n        if (!this.settings.hideEdgesOnMove || !moving) {\n            for (var type in this.edgePrograms) {\n                var program = this.edgePrograms[type];\n                program.bind();\n                program.bufferData();\n                program.render({\n                    matrix: this.matrix,\n                    width: this.width,\n                    height: this.height,\n                    ratio: cameraState.ratio,\n                    correctionRatio: this.correctionRatio / cameraState.ratio,\n                    scalingRatio: this.pixelRatio,\n                });\n            }\n        }\n        // Do not display labels on move per setting\n        if (this.settings.hideLabelsOnMove && moving)\n            return handleEscape();\n        this.renderLabels();\n        this.renderEdgeLabels();\n        this.renderHighlightedNodes();\n        return handleEscape();\n    };\n    /**\n     * Internal method used to update expensive and therefore cached values\n     * each time the camera state is updated.\n     */\n    Sigma.prototype.updateCachedValues = function () {\n        var ratio = this.camera.getState().ratio;\n        this.cameraSizeRatio = Math.sqrt(ratio);\n    };\n    /**---------------------------------------------------------------------------\n     * Public API.\n     **---------------------------------------------------------------------------\n     */\n    /**\n     * Method returning the renderer's camera.\n     *\n     * @return {Camera}\n     */\n    Sigma.prototype.getCamera = function () {\n        return this.camera;\n    };\n    /**\n     * Method returning the container DOM element.\n     *\n     * @return {HTMLElement}\n     */\n    Sigma.prototype.getContainer = function () {\n        return this.container;\n    };\n    /**\n     * Method returning the renderer's graph.\n     *\n     * @return {Graph}\n     */\n    Sigma.prototype.getGraph = function () {\n        return this.graph;\n    };\n    /**\n     * Method returning the mouse captor.\n     *\n     * @return {MouseCaptor}\n     */\n    Sigma.prototype.getMouseCaptor = function () {\n        return this.mouseCaptor;\n    };\n    /**\n     * Method returning the touch captor.\n     *\n     * @return {TouchCaptor}\n     */\n    Sigma.prototype.getTouchCaptor = function () {\n        return this.touchCaptor;\n    };\n    /**\n     * Method returning the current renderer's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getDimensions = function () {\n        return { width: this.width, height: this.height };\n    };\n    /**\n     * Method returning the current graph's dimensions.\n     *\n     * @return {Dimensions}\n     */\n    Sigma.prototype.getGraphDimensions = function () {\n        var extent = this.customBBox || this.nodeExtent;\n        return {\n            width: extent.x[1] - extent.x[0] || 1,\n            height: extent.y[1] - extent.y[0] || 1,\n        };\n    };\n    /**\n     * Method used to get all the sigma node attributes.\n     * It's usefull for example to get the position of a node\n     * and to get values that are set by the nodeReducer\n     *\n     * @param  {string} key - The node's key.\n     * @return {NodeDisplayData | undefined} A copy of the desired node's attribute or undefined if not found\n     */\n    Sigma.prototype.getNodeDisplayData = function (key) {\n        var node = this.nodeDataCache[key];\n        return node ? Object.assign({}, node) : undefined;\n    };\n    /**\n     * Method used to get all the sigma edge attributes.\n     * It's usefull for example to get values that are set by the edgeReducer.\n     *\n     * @param  {string} key - The edge's key.\n     * @return {EdgeDisplayData | undefined} A copy of the desired edge's attribute or undefined if not found\n     */\n    Sigma.prototype.getEdgeDisplayData = function (key) {\n        var edge = this.edgeDataCache[key];\n        return edge ? Object.assign({}, edge) : undefined;\n    };\n    /**\n     * Method returning a copy of the settings collection.\n     *\n     * @return {Settings} A copy of the settings collection.\n     */\n    Sigma.prototype.getSettings = function () {\n        return __assign({}, this.settings);\n    };\n    /**\n     * Method returning the current value for a given setting key.\n     *\n     * @param  {string} key - The setting key to get.\n     * @return {any} The value attached to this setting key or undefined if not found\n     */\n    Sigma.prototype.getSetting = function (key) {\n        return this.settings[key];\n    };\n    /**\n     * Method setting the value of a given setting key. Note that this will schedule\n     * a new render next frame.\n     *\n     * @param  {string} key - The setting key to set.\n     * @param  {any}    value - The value to set.\n     * @return {Sigma}\n     */\n    Sigma.prototype.setSetting = function (key, value) {\n        this.settings[key] = value;\n        (0, settings_1.validateSettings)(this.settings);\n        this.handleSettingsUpdate();\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method updating the value of a given setting key using the provided function.\n     * Note that this will schedule a new render next frame.\n     *\n     * @param  {string}   key     - The setting key to set.\n     * @param  {function} updater - The update function.\n     * @return {Sigma}\n     */\n    Sigma.prototype.updateSetting = function (key, updater) {\n        this.settings[key] = updater(this.settings[key]);\n        (0, settings_1.validateSettings)(this.settings);\n        this.handleSettingsUpdate();\n        this.needToProcess = true; // TODO: some keys may work with only needToSoftProcess or even nothing\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to resize the renderer.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.resize = function () {\n        var previousWidth = this.width, previousHeight = this.height;\n        this.width = this.container.offsetWidth;\n        this.height = this.container.offsetHeight;\n        this.pixelRatio = (0, utils_1.getPixelRatio)();\n        if (this.width === 0) {\n            if (this.settings.allowInvalidContainer)\n                this.width = 1;\n            else\n                throw new Error(\"Sigma: Container has no width. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n        }\n        if (this.height === 0) {\n            if (this.settings.allowInvalidContainer)\n                this.height = 1;\n            else\n                throw new Error(\"Sigma: Container has no height. You can set the allowInvalidContainer setting to true to stop seing this error.\");\n        }\n        // If nothing has changed, we can stop right here\n        if (previousWidth === this.width && previousHeight === this.height)\n            return this;\n        this.emit(\"resize\");\n        // Sizing dom elements\n        for (var id in this.elements) {\n            var element = this.elements[id];\n            element.style.width = this.width + \"px\";\n            element.style.height = this.height + \"px\";\n        }\n        // Sizing canvas contexts\n        for (var id in this.canvasContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n            if (this.pixelRatio !== 1)\n                this.canvasContexts[id].scale(this.pixelRatio, this.pixelRatio);\n        }\n        // Sizing WebGL contexts\n        for (var id in this.webGLContexts) {\n            this.elements[id].setAttribute(\"width\", this.width * this.pixelRatio + \"px\");\n            this.elements[id].setAttribute(\"height\", this.height * this.pixelRatio + \"px\");\n            this.webGLContexts[id].viewport(0, 0, this.width * this.pixelRatio, this.height * this.pixelRatio);\n        }\n        return this;\n    };\n    /**\n     * Method used to clear all the canvases.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.clear = function () {\n        this.webGLContexts.nodes.clear(this.webGLContexts.nodes.COLOR_BUFFER_BIT);\n        this.webGLContexts.edges.clear(this.webGLContexts.edges.COLOR_BUFFER_BIT);\n        this.webGLContexts.hoverNodes.clear(this.webGLContexts.hoverNodes.COLOR_BUFFER_BIT);\n        this.canvasContexts.labels.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.hovers.clearRect(0, 0, this.width, this.height);\n        this.canvasContexts.edgeLabels.clearRect(0, 0, this.width, this.height);\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.refresh = function () {\n        this.needToProcess = true;\n        this._refresh();\n        return this;\n    };\n    /**\n     * Method used to refresh all computed data, at the next available frame.\n     * If this method has already been called this frame, then it will only render once at the next available frame.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.scheduleRefresh = function () {\n        this.needToProcess = true;\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to (un)zoom, while preserving the position of a viewport point.\n     * Used for instance to zoom \"on the mouse cursor\".\n     *\n     * @param viewportTarget\n     * @param newRatio\n     * @return {CameraState}\n     */\n    Sigma.prototype.getViewportZoomedState = function (viewportTarget, newRatio) {\n        var _a = this.camera.getState(), ratio = _a.ratio, angle = _a.angle, x = _a.x, y = _a.y;\n        // TODO: handle max zoom\n        var ratioDiff = newRatio / ratio;\n        var center = {\n            x: this.width / 2,\n            y: this.height / 2,\n        };\n        var graphMousePosition = this.viewportToFramedGraph(viewportTarget);\n        var graphCenterPosition = this.viewportToFramedGraph(center);\n        return {\n            angle: angle,\n            x: (graphMousePosition.x - graphCenterPosition.x) * (1 - ratioDiff) + x,\n            y: (graphMousePosition.y - graphCenterPosition.y) * (1 - ratioDiff) + y,\n            ratio: newRatio,\n        };\n    };\n    /**\n     * Method returning the abstract rectangle containing the graph according\n     * to the camera's state.\n     *\n     * @return {object} - The view's rectangle.\n     */\n    Sigma.prototype.viewRectangle = function () {\n        // TODO: reduce relative margin?\n        var marginX = (0 * this.width) / 8, marginY = (0 * this.height) / 8;\n        var p1 = this.viewportToFramedGraph({ x: 0 - marginX, y: 0 - marginY }), p2 = this.viewportToFramedGraph({ x: this.width + marginX, y: 0 - marginY }), h = this.viewportToFramedGraph({ x: 0, y: this.height + marginY });\n        return {\n            x1: p1.x,\n            y1: p1.y,\n            x2: p2.x,\n            y2: p2.y,\n            height: p2.y - h.y,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the framed graph system to the viewport system. It allows\n     * overriding anything that is used to get the translation matrix, or even the matrix itself.\n     *\n     * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n     * of computations.\n     */\n    Sigma.prototype.framedGraphToViewport = function (coordinates, override) {\n        if (override === void 0) { override = {}; }\n        var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !!override.graphDimensions;\n        var matrix = override.matrix\n            ? override.matrix\n            : recomputeMatrix\n                ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0)\n                : this.matrix;\n        var viewportPos = (0, matrices_1.multiplyVec2)(matrix, coordinates);\n        return {\n            x: ((1 + viewportPos.x) * this.width) / 2,\n            y: ((1 - viewportPos.y) * this.height) / 2,\n        };\n    };\n    /**\n     * Method returning the coordinates of a point from the viewport system to the framed graph system. It allows\n     * overriding anything that is used to get the translation matrix, or even the matrix itself.\n     *\n     * Be careful if overriding dimensions, padding or cameraState, as the computation of the matrix is not the lightest\n     * of computations.\n     */\n    Sigma.prototype.viewportToFramedGraph = function (coordinates, override) {\n        if (override === void 0) { override = {}; }\n        var recomputeMatrix = !!override.cameraState || !!override.viewportDimensions || !override.graphDimensions;\n        var invMatrix = override.matrix\n            ? override.matrix\n            : recomputeMatrix\n                ? (0, utils_1.matrixFromCamera)(override.cameraState || this.camera.getState(), override.viewportDimensions || this.getDimensions(), override.graphDimensions || this.getGraphDimensions(), override.padding || this.getSetting(\"stagePadding\") || 0, true)\n                : this.invMatrix;\n        var res = (0, matrices_1.multiplyVec2)(invMatrix, {\n            x: (coordinates.x / this.width) * 2 - 1,\n            y: 1 - (coordinates.y / this.height) * 2,\n        });\n        if (isNaN(res.x))\n            res.x = 0;\n        if (isNaN(res.y))\n            res.y = 0;\n        return res;\n    };\n    /**\n     * Method used to translate a point's coordinates from the viewport system (pixel distance from the top-left of the\n     * stage) to the graph system (the reference system of data as they are in the given graph instance).\n     *\n     * This method accepts an optional camera which can be useful if you need to translate coordinates\n     * based on a different view than the one being currently being displayed on screen.\n     *\n     * @param {Coordinates}                  viewportPoint\n     * @param {CoordinateConversionOverride} override\n     */\n    Sigma.prototype.viewportToGraph = function (viewportPoint, override) {\n        if (override === void 0) { override = {}; }\n        return this.normalizationFunction.inverse(this.viewportToFramedGraph(viewportPoint, override));\n    };\n    /**\n     * Method used to translate a point's coordinates from the graph system (the reference system of data as they are in\n     * the given graph instance) to the viewport system (pixel distance from the top-left of the stage).\n     *\n     * This method accepts an optional camera which can be useful if you need to translate coordinates\n     * based on a different view than the one being currently being displayed on screen.\n     *\n     * @param {Coordinates}                  graphPoint\n     * @param {CoordinateConversionOverride} override\n     */\n    Sigma.prototype.graphToViewport = function (graphPoint, override) {\n        if (override === void 0) { override = {}; }\n        return this.framedGraphToViewport(this.normalizationFunction(graphPoint), override);\n    };\n    /**\n     * Method returning the graph's bounding box.\n     *\n     * @return {{ x: Extent, y: Extent }}\n     */\n    Sigma.prototype.getBBox = function () {\n        return (0, utils_1.graphExtent)(this.graph);\n    };\n    /**\n     * Method returning the graph's custom bounding box, if any.\n     *\n     * @return {{ x: Extent, y: Extent } | null}\n     */\n    Sigma.prototype.getCustomBBox = function () {\n        return this.customBBox;\n    };\n    /**\n     * Method used to override the graph's bounding box with a custom one. Give `null` as the argument to stop overriding.\n     *\n     * @return {Sigma}\n     */\n    Sigma.prototype.setCustomBBox = function (customBBox) {\n        this.customBBox = customBBox;\n        this._scheduleRefresh();\n        return this;\n    };\n    /**\n     * Method used to shut the container & release event listeners.\n     *\n     * @return {undefined}\n     */\n    Sigma.prototype.kill = function () {\n        var graph = this.graph;\n        // Emitting \"kill\" events so that plugins and such can cleanup\n        this.emit(\"kill\");\n        // Releasing events\n        this.removeAllListeners();\n        // Releasing camera handlers\n        this.camera.removeListener(\"updated\", this.activeListeners.camera);\n        // Releasing DOM events & captors\n        window.removeEventListener(\"resize\", this.activeListeners.handleResize);\n        this.mouseCaptor.kill();\n        this.touchCaptor.kill();\n        // Releasing graph handlers\n        graph.removeListener(\"nodeAdded\", this.activeListeners.dropNodeGraphUpdate);\n        graph.removeListener(\"nodeDropped\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"nodeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachNodeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeAdded\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgeDropped\", this.activeListeners.dropEdgeGraphUpdate);\n        graph.removeListener(\"edgeAttributesUpdated\", this.activeListeners.softGraphUpdate);\n        graph.removeListener(\"eachEdgeAttributesUpdated\", this.activeListeners.graphUpdate);\n        graph.removeListener(\"edgesCleared\", this.activeListeners.clearEdgesGraphUpdate);\n        graph.removeListener(\"cleared\", this.activeListeners.clearGraphUpdate);\n        // Releasing cache & state\n        this.quadtree = new quadtree_1.default();\n        this.nodeDataCache = {};\n        this.edgeDataCache = {};\n        this.nodesWithForcedLabels = [];\n        this.edgesWithForcedLabels = [];\n        this.highlightedNodes.clear();\n        // Clearing frames\n        if (this.renderFrame) {\n            (0, utils_1.cancelFrame)(this.renderFrame);\n            this.renderFrame = null;\n        }\n        if (this.renderHighlightedNodesFrame) {\n            (0, utils_1.cancelFrame)(this.renderHighlightedNodesFrame);\n            this.renderHighlightedNodesFrame = null;\n        }\n        // Destroying canvases\n        var container = this.container;\n        while (container.firstChild)\n            container.removeChild(container.firstChild);\n    };\n    /**\n     * Method used to scale the given size according to the camera's ratio, i.e.\n     * zooming state.\n     *\n     * @param  {number} size - The size to scale (node size, edge thickness etc.).\n     * @return {number}      - The scaled size.\n     */\n    Sigma.prototype.scaleSize = function (size) {\n        return size / this.cameraSizeRatio;\n    };\n    /**\n     * Method that returns the collection of all used canvases.\n     * At the moment, the instantiated canvases are the following, and in the\n     * following order in the DOM:\n     * - `edges`\n     * - `nodes`\n     * - `edgeLabels`\n     * - `labels`\n     * - `hovers`\n     * - `hoverNodes`\n     * - `mouse`\n     *\n     * @return {PlainObject<HTMLCanvasElement>} - The collection of canvases.\n     */\n    Sigma.prototype.getCanvases = function () {\n        return __assign({}, this.elements);\n    };\n    return Sigma;\n}(types_1.TypedEventEmitter));\nexports.default = Sigma;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.TypedEventEmitter = void 0;\n/**\n * Sigma.js Types\n * ===============\n *\n * Various type declarations used throughout the library.\n * @module\n */\nvar events_1 = require(\"events\");\nvar TypedEventEmitter = /** @class */ (function (_super) {\n    __extends(TypedEventEmitter, _super);\n    function TypedEventEmitter() {\n        var _this = _super.call(this) || this;\n        _this.rawEmitter = _this;\n        return _this;\n    }\n    return TypedEventEmitter;\n}(events_1.EventEmitter));\nexports.TypedEventEmitter = TypedEventEmitter;\n","\"use strict\";\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.animateNodes = exports.ANIMATE_DEFAULTS = void 0;\nvar index_1 = require(\"./index\");\nvar easings_1 = __importDefault(require(\"./easings\"));\nexports.ANIMATE_DEFAULTS = {\n    easing: \"quadraticInOut\",\n    duration: 150,\n};\n/**\n * Function used to animate the nodes.\n */\nfunction animateNodes(graph, targets, opts, callback) {\n    var options = Object.assign({}, exports.ANIMATE_DEFAULTS, opts);\n    var easing = typeof options.easing === \"function\" ? options.easing : easings_1.default[options.easing];\n    var start = Date.now();\n    var startPositions = {};\n    for (var node in targets) {\n        var attrs = targets[node];\n        startPositions[node] = {};\n        for (var k in attrs)\n            startPositions[node][k] = graph.getNodeAttribute(node, k);\n    }\n    var frame = null;\n    var step = function () {\n        frame = null;\n        var p = (Date.now() - start) / options.duration;\n        if (p >= 1) {\n            // Animation is done\n            for (var node in targets) {\n                var attrs = targets[node];\n                // We use given values to avoid precision issues and for convenience\n                for (var k in attrs)\n                    graph.setNodeAttribute(node, k, attrs[k]);\n            }\n            if (typeof callback === \"function\")\n                callback();\n            return;\n        }\n        p = easing(p);\n        for (var node in targets) {\n            var attrs = targets[node];\n            var s = startPositions[node];\n            for (var k in attrs)\n                graph.setNodeAttribute(node, k, attrs[k] * p + s[k] * (1 - p));\n        }\n        frame = (0, index_1.requestFrame)(step);\n    };\n    step();\n    return function () {\n        if (frame)\n            (0, index_1.cancelFrame)(frame);\n    };\n}\nexports.animateNodes = animateNodes;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.HTML_COLORS = void 0;\nexports.HTML_COLORS = {\n    black: \"#000000\",\n    silver: \"#C0C0C0\",\n    gray: \"#808080\",\n    grey: \"#808080\",\n    white: \"#FFFFFF\",\n    maroon: \"#800000\",\n    red: \"#FF0000\",\n    purple: \"#800080\",\n    fuchsia: \"#FF00FF\",\n    green: \"#008000\",\n    lime: \"#00FF00\",\n    olive: \"#808000\",\n    yellow: \"#FFFF00\",\n    navy: \"#000080\",\n    blue: \"#0000FF\",\n    teal: \"#008080\",\n    aqua: \"#00FFFF\",\n    darkblue: \"#00008B\",\n    mediumblue: \"#0000CD\",\n    darkgreen: \"#006400\",\n    darkcyan: \"#008B8B\",\n    deepskyblue: \"#00BFFF\",\n    darkturquoise: \"#00CED1\",\n    mediumspringgreen: \"#00FA9A\",\n    springgreen: \"#00FF7F\",\n    cyan: \"#00FFFF\",\n    midnightblue: \"#191970\",\n    dodgerblue: \"#1E90FF\",\n    lightseagreen: \"#20B2AA\",\n    forestgreen: \"#228B22\",\n    seagreen: \"#2E8B57\",\n    darkslategray: \"#2F4F4F\",\n    darkslategrey: \"#2F4F4F\",\n    limegreen: \"#32CD32\",\n    mediumseagreen: \"#3CB371\",\n    turquoise: \"#40E0D0\",\n    royalblue: \"#4169E1\",\n    steelblue: \"#4682B4\",\n    darkslateblue: \"#483D8B\",\n    mediumturquoise: \"#48D1CC\",\n    indigo: \"#4B0082\",\n    darkolivegreen: \"#556B2F\",\n    cadetblue: \"#5F9EA0\",\n    cornflowerblue: \"#6495ED\",\n    rebeccapurple: \"#663399\",\n    mediumaquamarine: \"#66CDAA\",\n    dimgray: \"#696969\",\n    dimgrey: \"#696969\",\n    slateblue: \"#6A5ACD\",\n    olivedrab: \"#6B8E23\",\n    slategray: \"#708090\",\n    slategrey: \"#708090\",\n    lightslategray: \"#778899\",\n    lightslategrey: \"#778899\",\n    mediumslateblue: \"#7B68EE\",\n    lawngreen: \"#7CFC00\",\n    chartreuse: \"#7FFF00\",\n    aquamarine: \"#7FFFD4\",\n    skyblue: \"#87CEEB\",\n    lightskyblue: \"#87CEFA\",\n    blueviolet: \"#8A2BE2\",\n    darkred: \"#8B0000\",\n    darkmagenta: \"#8B008B\",\n    saddlebrown: \"#8B4513\",\n    darkseagreen: \"#8FBC8F\",\n    lightgreen: \"#90EE90\",\n    mediumpurple: \"#9370DB\",\n    darkviolet: \"#9400D3\",\n    palegreen: \"#98FB98\",\n    darkorchid: \"#9932CC\",\n    yellowgreen: \"#9ACD32\",\n    sienna: \"#A0522D\",\n    brown: \"#A52A2A\",\n    darkgray: \"#A9A9A9\",\n    darkgrey: \"#A9A9A9\",\n    lightblue: \"#ADD8E6\",\n    greenyellow: \"#ADFF2F\",\n    paleturquoise: \"#AFEEEE\",\n    lightsteelblue: \"#B0C4DE\",\n    powderblue: \"#B0E0E6\",\n    firebrick: \"#B22222\",\n    darkgoldenrod: \"#B8860B\",\n    mediumorchid: \"#BA55D3\",\n    rosybrown: \"#BC8F8F\",\n    darkkhaki: \"#BDB76B\",\n    mediumvioletred: \"#C71585\",\n    indianred: \"#CD5C5C\",\n    peru: \"#CD853F\",\n    chocolate: \"#D2691E\",\n    tan: \"#D2B48C\",\n    lightgray: \"#D3D3D3\",\n    lightgrey: \"#D3D3D3\",\n    thistle: \"#D8BFD8\",\n    orchid: \"#DA70D6\",\n    goldenrod: \"#DAA520\",\n    palevioletred: \"#DB7093\",\n    crimson: \"#DC143C\",\n    gainsboro: \"#DCDCDC\",\n    plum: \"#DDA0DD\",\n    burlywood: \"#DEB887\",\n    lightcyan: \"#E0FFFF\",\n    lavender: \"#E6E6FA\",\n    darksalmon: \"#E9967A\",\n    violet: \"#EE82EE\",\n    palegoldenrod: \"#EEE8AA\",\n    lightcoral: \"#F08080\",\n    khaki: \"#F0E68C\",\n    aliceblue: \"#F0F8FF\",\n    honeydew: \"#F0FFF0\",\n    azure: \"#F0FFFF\",\n    sandybrown: \"#F4A460\",\n    wheat: \"#F5DEB3\",\n    beige: \"#F5F5DC\",\n    whitesmoke: \"#F5F5F5\",\n    mintcream: \"#F5FFFA\",\n    ghostwhite: \"#F8F8FF\",\n    salmon: \"#FA8072\",\n    antiquewhite: \"#FAEBD7\",\n    linen: \"#FAF0E6\",\n    lightgoldenrodyellow: \"#FAFAD2\",\n    oldlace: \"#FDF5E6\",\n    magenta: \"#FF00FF\",\n    deeppink: \"#FF1493\",\n    orangered: \"#FF4500\",\n    tomato: \"#FF6347\",\n    hotpink: \"#FF69B4\",\n    coral: \"#FF7F50\",\n    darkorange: \"#FF8C00\",\n    lightsalmon: \"#FFA07A\",\n    orange: \"#FFA500\",\n    lightpink: \"#FFB6C1\",\n    pink: \"#FFC0CB\",\n    gold: \"#FFD700\",\n    peachpuff: \"#FFDAB9\",\n    navajowhite: \"#FFDEAD\",\n    moccasin: \"#FFE4B5\",\n    bisque: \"#FFE4C4\",\n    mistyrose: \"#FFE4E1\",\n    blanchedalmond: \"#FFEBCD\",\n    papayawhip: \"#FFEFD5\",\n    lavenderblush: \"#FFF0F5\",\n    seashell: \"#FFF5EE\",\n    cornsilk: \"#FFF8DC\",\n    lemonchiffon: \"#FFFACD\",\n    floralwhite: \"#FFFAF0\",\n    snow: \"#FFFAFA\",\n    lightyellow: \"#FFFFE0\",\n    ivory: \"#FFFFF0\",\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.cubicInOut = exports.cubicOut = exports.cubicIn = exports.quadraticInOut = exports.quadraticOut = exports.quadraticIn = exports.linear = void 0;\n/**\n * Sigma.js Easings\n * =================\n *\n * Handy collection of easing functions.\n * @module\n */\nvar linear = function (k) { return k; };\nexports.linear = linear;\nvar quadraticIn = function (k) { return k * k; };\nexports.quadraticIn = quadraticIn;\nvar quadraticOut = function (k) { return k * (2 - k); };\nexports.quadraticOut = quadraticOut;\nvar quadraticInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k;\n    return -0.5 * (--k * (k - 2) - 1);\n};\nexports.quadraticInOut = quadraticInOut;\nvar cubicIn = function (k) { return k * k * k; };\nexports.cubicIn = cubicIn;\nvar cubicOut = function (k) { return --k * k * k + 1; };\nexports.cubicOut = cubicOut;\nvar cubicInOut = function (k) {\n    if ((k *= 2) < 1)\n        return 0.5 * k * k * k;\n    return 0.5 * ((k -= 2) * k * k + 2);\n};\nexports.cubicInOut = cubicInOut;\nvar easings = {\n    linear: exports.linear,\n    quadraticIn: exports.quadraticIn,\n    quadraticOut: exports.quadraticOut,\n    quadraticInOut: exports.quadraticInOut,\n    cubicIn: exports.cubicIn,\n    cubicOut: exports.cubicOut,\n    cubicInOut: exports.cubicInOut,\n};\nexports.default = easings;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.doEdgeCollideWithPoint = exports.isPixelColored = void 0;\n/**\n * This helper returns true is the pixel at (x,y) in the given WebGL context is\n * colored, and false else.\n */\nfunction isPixelColored(gl, x, y) {\n    var pixels = new Uint8Array(4);\n    gl.readPixels(x, gl.drawingBufferHeight - y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixels);\n    return pixels[3] > 0;\n}\nexports.isPixelColored = isPixelColored;\n/**\n * This helper checks whether or not a point (x, y) collides with an\n * edge, connecting a source (xS, yS) to a target (xT, yT) with a thickness in\n * pixels.\n */\nfunction doEdgeCollideWithPoint(x, y, xS, yS, xT, yT, thickness) {\n    // Check first if point is out of the rectangle which opposite corners are the\n    // source and the target, rectangle we expand by `thickness` in every\n    // directions:\n    if (x < xS - thickness && x < xT - thickness)\n        return false;\n    if (y < yS - thickness && y < yT - thickness)\n        return false;\n    if (x > xS + thickness && x > xT + thickness)\n        return false;\n    if (y > yS + thickness && y > yT + thickness)\n        return false;\n    // Check actual collision now: Since we now the point is in this big rectangle\n    // we \"just\" need to check that the distance between the point and the line\n    // connecting the source and the target is less than `thickness`:\n    // https://en.wikipedia.org/wiki/Distance_from_a_point_to_a_line\n    var distance = Math.abs((xT - xS) * (yS - y) - (xS - x) * (yT - yS)) / Math.sqrt(Math.pow(xT - xS, 2) + Math.pow(yT - yS, 2));\n    return distance < thickness / 2;\n}\nexports.doEdgeCollideWithPoint = doEdgeCollideWithPoint;\n","\"use strict\";\nvar __read = (this && this.__read) || function (o, n) {\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n    if (!m) return o;\n    var i = m.call(o), r, ar = [], e;\n    try {\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n    }\n    catch (error) { e = { error: error }; }\n    finally {\n        try {\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\n        }\n        finally { if (e) throw e.error; }\n    }\n    return ar;\n};\nvar __importDefault = (this && this.__importDefault) || function (mod) {\n    return (mod && mod.__esModule) ? mod : { \"default\": mod };\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.validateGraph = exports.canUse32BitsIndices = exports.extractPixel = exports.getMatrixImpact = exports.matrixFromCamera = exports.getCorrectionRatio = exports.floatColor = exports.floatArrayColor = exports.parseColor = exports.zIndexOrdering = exports.createNormalizationFunction = exports.graphExtent = exports.getPixelRatio = exports.createElement = exports.cancelFrame = exports.requestFrame = exports.assignDeep = exports.assign = exports.isPlainObject = void 0;\nvar is_graph_1 = __importDefault(require(\"graphology-utils/is-graph\"));\nvar matrices_1 = require(\"./matrices\");\nvar data_1 = require(\"./data\");\n/**\n * Checks whether the given value is a plain object.\n *\n * @param  {mixed}   value - Target value.\n * @return {boolean}\n */\n// eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/explicit-module-boundary-types\nfunction isPlainObject(value) {\n    return typeof value === \"object\" && value !== null && value.constructor === Object;\n}\nexports.isPlainObject = isPlainObject;\n/**\n * Helper to use Object.assign with more than two objects.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assign(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        Object.assign(target, o);\n    }\n    return target;\n}\nexports.assign = assign;\n/**\n * Very simple recursive Object.assign-like function.\n *\n * @param  {object} target       - First object.\n * @param  {object} [...objects] - Objects to merge.\n * @return {object}\n */\nfunction assignDeep(target) {\n    var objects = [];\n    for (var _i = 1; _i < arguments.length; _i++) {\n        objects[_i - 1] = arguments[_i];\n    }\n    target = target || {};\n    for (var i = 0, l = objects.length; i < l; i++) {\n        var o = objects[i];\n        if (!o)\n            continue;\n        for (var k in o) {\n            if (isPlainObject(o[k])) {\n                target[k] = assignDeep(target[k], o[k]);\n            }\n            else {\n                target[k] = o[k];\n            }\n        }\n    }\n    return target;\n}\nexports.assignDeep = assignDeep;\n/**\n * Just some dirty trick to make requestAnimationFrame and cancelAnimationFrame \"work\" in Node.js, for unit tests:\n */\nexports.requestFrame = typeof requestAnimationFrame !== \"undefined\"\n    ? function (callback) { return requestAnimationFrame(callback); }\n    : function (callback) { return setTimeout(callback, 0); };\nexports.cancelFrame = typeof cancelAnimationFrame !== \"undefined\"\n    ? function (requestID) { return cancelAnimationFrame(requestID); }\n    : function (requestID) { return clearTimeout(requestID); };\n/**\n * Function used to create DOM elements easily.\n *\n * @param  {string} tag        - Tag name of the element to create.\n * @param  {object} style      - Styles map.\n * @param  {object} attributes - Attributes map.\n * @return {HTMLElement}\n */\nfunction createElement(tag, style, attributes) {\n    var element = document.createElement(tag);\n    if (style) {\n        for (var k in style) {\n            element.style[k] = style[k];\n        }\n    }\n    if (attributes) {\n        for (var k in attributes) {\n            element.setAttribute(k, attributes[k]);\n        }\n    }\n    return element;\n}\nexports.createElement = createElement;\n/**\n * Function returning the browser's pixel ratio.\n *\n * @return {number}\n */\nfunction getPixelRatio() {\n    if (typeof window.devicePixelRatio !== \"undefined\")\n        return window.devicePixelRatio;\n    return 1;\n}\nexports.getPixelRatio = getPixelRatio;\n/**\n * Function returning the graph's node extent in x & y.\n *\n * @param  {Graph}\n * @return {object}\n */\nfunction graphExtent(graph) {\n    if (!graph.order)\n        return { x: [0, 1], y: [0, 1] };\n    var xMin = Infinity;\n    var xMax = -Infinity;\n    var yMin = Infinity;\n    var yMax = -Infinity;\n    graph.forEachNode(function (_, attr) {\n        var x = attr.x, y = attr.y;\n        if (x < xMin)\n            xMin = x;\n        if (x > xMax)\n            xMax = x;\n        if (y < yMin)\n            yMin = y;\n        if (y > yMax)\n            yMax = y;\n    });\n    return { x: [xMin, xMax], y: [yMin, yMax] };\n}\nexports.graphExtent = graphExtent;\nfunction createNormalizationFunction(extent) {\n    var _a = __read(extent.x, 2), minX = _a[0], maxX = _a[1], _b = __read(extent.y, 2), minY = _b[0], maxY = _b[1];\n    var ratio = Math.max(maxX - minX, maxY - minY), dX = (maxX + minX) / 2, dY = (maxY + minY) / 2;\n    if (ratio === 0 || Math.abs(ratio) === Infinity || isNaN(ratio))\n        ratio = 1;\n    if (isNaN(dX))\n        dX = 0;\n    if (isNaN(dY))\n        dY = 0;\n    var fn = function (data) {\n        return {\n            x: 0.5 + (data.x - dX) / ratio,\n            y: 0.5 + (data.y - dY) / ratio,\n        };\n    };\n    // TODO: possibility to apply this in batch over array of indices\n    fn.applyTo = function (data) {\n        data.x = 0.5 + (data.x - dX) / ratio;\n        data.y = 0.5 + (data.y - dY) / ratio;\n    };\n    fn.inverse = function (data) {\n        return {\n            x: dX + ratio * (data.x - 0.5),\n            y: dY + ratio * (data.y - 0.5),\n        };\n    };\n    fn.ratio = ratio;\n    return fn;\n}\nexports.createNormalizationFunction = createNormalizationFunction;\n/**\n * Function ordering the given elements in reverse z-order so they drawn\n * the correct way.\n *\n * @param  {number}   extent   - [min, max] z values.\n * @param  {function} getter   - Z attribute getter function.\n * @param  {array}    elements - The array to sort.\n * @return {array} - The sorted array.\n */\nfunction zIndexOrdering(extent, getter, elements) {\n    // If k is > n, we'll use a standard sort\n    return elements.sort(function (a, b) {\n        var zA = getter(a) || 0, zB = getter(b) || 0;\n        if (zA < zB)\n            return -1;\n        if (zA > zB)\n            return 1;\n        return 0;\n    });\n    // TODO: counting sort optimization\n}\nexports.zIndexOrdering = zIndexOrdering;\n/**\n * WebGL utils\n * ===========\n */\n/**\n * Memoized function returning a float-encoded color from various string\n * formats describing colors.\n */\nvar INT8 = new Int8Array(4);\nvar INT32 = new Int32Array(INT8.buffer, 0, 1);\nvar FLOAT32 = new Float32Array(INT8.buffer, 0, 1);\nvar RGBA_TEST_REGEX = /^\\s*rgba?\\s*\\(/;\nvar RGBA_EXTRACT_REGEX = /^\\s*rgba?\\s*\\(\\s*([0-9]*)\\s*,\\s*([0-9]*)\\s*,\\s*([0-9]*)(?:\\s*,\\s*(.*)?)?\\)\\s*$/;\nfunction parseColor(val) {\n    var r = 0; // byte\n    var g = 0; // byte\n    var b = 0; // byte\n    var a = 1; // float\n    // Handling hexadecimal notation\n    if (val[0] === \"#\") {\n        if (val.length === 4) {\n            r = parseInt(val.charAt(1) + val.charAt(1), 16);\n            g = parseInt(val.charAt(2) + val.charAt(2), 16);\n            b = parseInt(val.charAt(3) + val.charAt(3), 16);\n        }\n        else {\n            r = parseInt(val.charAt(1) + val.charAt(2), 16);\n            g = parseInt(val.charAt(3) + val.charAt(4), 16);\n            b = parseInt(val.charAt(5) + val.charAt(6), 16);\n        }\n        // TODO: parse hex with alpha?\n    }\n    // Handling rgb notation\n    else if (RGBA_TEST_REGEX.test(val)) {\n        var match = val.match(RGBA_EXTRACT_REGEX);\n        if (match) {\n            r = +match[1];\n            g = +match[2];\n            b = +match[3];\n            if (match[4])\n                a = +match[4];\n        }\n    }\n    return { r: r, g: g, b: b, a: a };\n}\nexports.parseColor = parseColor;\nvar FLOAT_COLOR_CACHE = {};\nfor (var htmlColor in data_1.HTML_COLORS) {\n    FLOAT_COLOR_CACHE[htmlColor] = floatColor(data_1.HTML_COLORS[htmlColor]);\n    // Replicating cache for hex values for free\n    FLOAT_COLOR_CACHE[data_1.HTML_COLORS[htmlColor]] = FLOAT_COLOR_CACHE[htmlColor];\n}\nfunction floatArrayColor(val) {\n    val = data_1.HTML_COLORS[val] || val;\n    // NOTE: this variant is not cached because it is mostly used for uniforms\n    var _a = parseColor(val), r = _a.r, g = _a.g, b = _a.b, a = _a.a;\n    return new Float32Array([r / 255, g / 255, b / 255, a]);\n}\nexports.floatArrayColor = floatArrayColor;\nfunction floatColor(val) {\n    // If the color is already computed, we yield it\n    if (typeof FLOAT_COLOR_CACHE[val] !== \"undefined\")\n        return FLOAT_COLOR_CACHE[val];\n    var parsed = parseColor(val);\n    var r = parsed.r, g = parsed.g, b = parsed.b;\n    var a = parsed.a;\n    a = (a * 255) | 0;\n    INT32[0] = ((a << 24) | (b << 16) | (g << 8) | r) & 0xfeffffff;\n    var color = FLOAT32[0];\n    FLOAT_COLOR_CACHE[val] = color;\n    return color;\n}\nexports.floatColor = floatColor;\n/**\n * In sigma, the graph is normalized into a [0, 1], [0, 1] square, before being given to the various renderers. This\n * helps dealing with quadtree in particular.\n * But at some point, we need to rescale it so that it takes the best place in the screen, ie. we always want to see two\n * nodes \"touching\" opposite sides of the graph, with the camera being at its default state.\n *\n * This function determines this ratio.\n */\nfunction getCorrectionRatio(viewportDimensions, graphDimensions) {\n    var viewportRatio = viewportDimensions.height / viewportDimensions.width;\n    var graphRatio = graphDimensions.height / graphDimensions.width;\n    // If the stage and the graphs are in different directions (such as the graph being wider that tall while the stage\n    // is taller than wide), we can stop here to have indeed nodes touching opposite sides:\n    if ((viewportRatio < 1 && graphRatio > 1) || (viewportRatio > 1 && graphRatio < 1)) {\n        return 1;\n    }\n    // Else, we need to fit the graph inside the stage:\n    // 1. If the graph is \"squarer\" (ie. with a ratio closer to 1), we need to make the largest sides touch;\n    // 2. If the stage is \"squarer\", we need to make the smallest sides touch.\n    return Math.min(Math.max(graphRatio, 1 / graphRatio), Math.max(1 / viewportRatio, viewportRatio));\n}\nexports.getCorrectionRatio = getCorrectionRatio;\n/**\n * Function returning a matrix from the current state of the camera.\n */\n// TODO: it's possible to optimize this drastically!\nfunction matrixFromCamera(state, viewportDimensions, graphDimensions, padding, inverse) {\n    var angle = state.angle, ratio = state.ratio, x = state.x, y = state.y;\n    var width = viewportDimensions.width, height = viewportDimensions.height;\n    var matrix = (0, matrices_1.identity)();\n    var smallestDimension = Math.min(width, height) - 2 * padding;\n    var correctionRatio = getCorrectionRatio(viewportDimensions, graphDimensions);\n    if (!inverse) {\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 2 * (smallestDimension / width) * correctionRatio, 2 * (smallestDimension / height) * correctionRatio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), -angle));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), 1 / ratio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), -x, -y));\n    }\n    else {\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.translate)((0, matrices_1.identity)(), x, y));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), ratio));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.rotate)((0, matrices_1.identity)(), angle));\n        (0, matrices_1.multiply)(matrix, (0, matrices_1.scale)((0, matrices_1.identity)(), width / smallestDimension / 2 / correctionRatio, height / smallestDimension / 2 / correctionRatio));\n    }\n    return matrix;\n}\nexports.matrixFromCamera = matrixFromCamera;\n/**\n * All these transformations we apply on the matrix to get it rescale the graph\n * as we want make it very hard to get pixel-perfect distances in WebGL. This\n * function returns a factor that properly cancels the matrix effect on lengths.\n *\n * [jacomyal]\n * To be fully honest, I can't really explain happens here... I notice that the\n * following ratio works (ie. it correctly compensates the matrix impact on all\n * camera states I could try):\n * > `R = size(V) / size(M * V) / W`\n * as long as `M * V` is in the direction of W (ie. parallel to (Ox)). It works\n * as well with H and a vector that transforms into something parallel to (Oy).\n *\n * Also, note that we use `angle` and not `-angle` (that would seem logical,\n * since we want to anticipate the rotation), because of the fact that in WebGL,\n * the image is vertically swapped.\n */\nfunction getMatrixImpact(matrix, cameraState, viewportDimensions) {\n    var _a = (0, matrices_1.multiplyVec2)(matrix, { x: Math.cos(cameraState.angle), y: Math.sin(cameraState.angle) }, 0), x = _a.x, y = _a.y;\n    return 1 / Math.sqrt(Math.pow(x, 2) + Math.pow(y, 2)) / viewportDimensions.width;\n}\nexports.getMatrixImpact = getMatrixImpact;\n/**\n * Function extracting the color at the given pixel.\n */\nfunction extractPixel(gl, x, y, array) {\n    var data = array || new Uint8Array(4);\n    gl.readPixels(x, y, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, data);\n    return data;\n}\nexports.extractPixel = extractPixel;\n/**\n * Function used to know whether given webgl context can use 32 bits indices.\n */\nfunction canUse32BitsIndices(gl) {\n    var webgl2 = typeof WebGL2RenderingContext !== \"undefined\" && gl instanceof WebGL2RenderingContext;\n    return webgl2 || !!gl.getExtension(\"OES_element_index_uint\");\n}\nexports.canUse32BitsIndices = canUse32BitsIndices;\n/**\n * Check if the graph variable is a valid graph, and if sigma can render it.\n */\nfunction validateGraph(graph) {\n    // check if it's a valid graphology instance\n    if (!(0, is_graph_1.default)(graph))\n        throw new Error(\"Sigma: invalid graph instance.\");\n    // check if nodes have x/y attributes\n    graph.forEachNode(function (key, attributes) {\n        if (!Number.isFinite(attributes.x) || !Number.isFinite(attributes.y)) {\n            throw new Error(\"Sigma: Coordinates of node \".concat(key, \" are invalid. A node must have a numeric 'x' and 'y' attribute.\"));\n        }\n    });\n}\nexports.validateGraph = validateGraph;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.multiplyVec2 = exports.multiply = exports.translate = exports.rotate = exports.scale = exports.identity = void 0;\nfunction identity() {\n    return Float32Array.of(1, 0, 0, 0, 1, 0, 0, 0, 1);\n}\nexports.identity = identity;\n// TODO: optimize\nfunction scale(m, x, y) {\n    m[0] = x;\n    m[4] = typeof y === \"number\" ? y : x;\n    return m;\n}\nexports.scale = scale;\nfunction rotate(m, r) {\n    var s = Math.sin(r), c = Math.cos(r);\n    m[0] = c;\n    m[1] = s;\n    m[3] = -s;\n    m[4] = c;\n    return m;\n}\nexports.rotate = rotate;\nfunction translate(m, x, y) {\n    m[6] = x;\n    m[7] = y;\n    return m;\n}\nexports.translate = translate;\nfunction multiply(a, b) {\n    var a00 = a[0], a01 = a[1], a02 = a[2];\n    var a10 = a[3], a11 = a[4], a12 = a[5];\n    var a20 = a[6], a21 = a[7], a22 = a[8];\n    var b00 = b[0], b01 = b[1], b02 = b[2];\n    var b10 = b[3], b11 = b[4], b12 = b[5];\n    var b20 = b[6], b21 = b[7], b22 = b[8];\n    a[0] = b00 * a00 + b01 * a10 + b02 * a20;\n    a[1] = b00 * a01 + b01 * a11 + b02 * a21;\n    a[2] = b00 * a02 + b01 * a12 + b02 * a22;\n    a[3] = b10 * a00 + b11 * a10 + b12 * a20;\n    a[4] = b10 * a01 + b11 * a11 + b12 * a21;\n    a[5] = b10 * a02 + b11 * a12 + b12 * a22;\n    a[6] = b20 * a00 + b21 * a10 + b22 * a20;\n    a[7] = b20 * a01 + b21 * a11 + b22 * a21;\n    a[8] = b20 * a02 + b21 * a12 + b22 * a22;\n    return a;\n}\nexports.multiply = multiply;\nfunction multiplyVec2(a, b, z) {\n    if (z === void 0) { z = 1; }\n    var a00 = a[0];\n    var a01 = a[1];\n    var a10 = a[3];\n    var a11 = a[4];\n    var a20 = a[6];\n    var a21 = a[7];\n    var b0 = b.x;\n    var b1 = b.y;\n    return { x: b0 * a00 + b1 * a10 + a20 * z, y: b0 * a01 + b1 * a11 + a21 * z };\n}\nexports.multiplyVec2 = multiplyVec2;\n"],"names":["isCallable","$String","String","$TypeError","TypeError","module","exports","argument","ArrayBuffer","DataView","NAME","Constructor","Prototype","NATIVE_ARRAY_BUFFER","DESCRIPTORS","global","isObject","hasOwn","classof","tryToString","createNonEnumerableProperty","defineBuiltIn","defineProperty","isPrototypeOf","getPrototypeOf","setPrototypeOf","wellKnownSymbol","uid","InternalStateModule","enforceInternalState","enforce","getInternalState","get","Int8Array","Int8ArrayPrototype","prototype","Uint8ClampedArray","Uint8ClampedArrayPrototype","TypedArray","TypedArrayPrototype","ObjectPrototype","Object","TO_STRING_TAG","TYPED_ARRAY_TAG","TYPED_ARRAY_CONSTRUCTOR","NATIVE_ARRAY_BUFFER_VIEWS","opera","TYPED_ARRAY_TAG_REQUIRED","TypedArrayConstructorsList","Uint8Array","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array","BigIntArrayConstructorsList","BigInt64Array","BigUint64Array","isView","it","klass","getTypedArrayConstructor","proto","state","isTypedArray","aTypedArray","aTypedArrayConstructor","C","exportTypedArrayMethod","KEY","property","forced","options","ARRAY","TypedArrayConstructor","error","error2","exportTypedArrayStaticMethod","Function","this","undefined","bind","IndexedObject","toObject","lengthOfArrayLike","createMethod","TYPE","IS_FIND_LAST_INDEX","$this","callbackfn","that","value","result","O","self","boundFunction","index","findLast","findLastIndex","TO_STRING_TAG_SUPPORT","classofRaw","$Object","CORRECT_ARGUMENTS","arguments","tryGet","key","tag","callee","fails","F","constructor","uncurryThis","aCallable","NATIVE_BIND","fn","apply","sharedKey","CORRECT_PROTOTYPE_GETTER","IE_PROTO","object","anObject","aPossiblePrototype","setter","CORRECT_SETTER","test","getOwnPropertyDescriptor","set","Array","__proto__","ArrayBufferViewCore","$findLastIndex","predicate","length","$findLast","array","values","l2","l1","i","ReflectOwnKeys","R","Reflect","ReflectApply","target","receiver","args","call","ProcessEmitWarning","warning","console","warn","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","concat","NumberIsNaN","Number","isNaN","EventEmitter","init","once","_events","_eventsCount","_maxListeners","defaultMaxListeners","checkListener","listener","_getMaxListeners","_addListener","type","prepend","m","events","existing","create","newListener","emit","unshift","push","warned","w","Error","name","emitter","count","onceWrapper","fired","removeListener","wrapFn","_onceWrap","wrapped","_listeners","unwrap","evlistener","unwrapListeners","arrayClone","listenerCount","arr","n","copy","spliceOne","list","pop","ret","Promise","resolve","reject","errorListener","err","resolver","slice","eventTargetAgnosticAddListener","addErrorHandlerIfEventEmitter","handler","flags","on","addEventListener","wrapListener","arg","removeEventListener","enumerable","RangeError","setMaxListeners","getMaxListeners","doError","er","message","context","len","listeners","addListener","prependListener","prependOnceListener","position","originalListener","shift","off","removeAllListeners","keys","rawListeners","eventNames","nodeXAttribute","nodeYAttribute","isNodeFixed","shouldSkipNode","shouldSkipEdge","settings","attraction","repulsion","gravity","inertia","maxMove","assignLayoutChanges","graph","nodeStates","params","x","y","updateEachNodeAttributes","attr","fixed","attributes","collectLayoutChanges","mapping","createNodeValueGetter","createEdgeValueGetter","require","xKey","yKey","nodes","filterNodes","fromEntry","adjustedOrder","getNodeAttributes","nodeState","dx","dy","n1","n1State","j","n2","n2State","distance","Math","sqrt","repulsionX","repulsionY","forEachEdge","edge","source","sourceAttr","targetAttr","undirected","attractionX","attractionY","converged","fromGraph","isGraph","resolveDefaults","iterate","helpers","DEFAULTS","ForceSupervisor","callbacks","onConverged","frameID","running","killed","isRunning","runFrame","stop","window","requestAnimationFrame","cancelAnimationFrame","start","kill","isLeaf","o","isArray","Set","Map","RegExp","Date","defaults","output","k","def","coerceWeight","nameOrFunction","defaultValue","getter","coerceToDefault","v","returnDefault","fromAttributes","node","getEdgeAttributes","fromPartialEntry","fromMinimalEntry","extremities","isUndirected","e","a","s","t","sa","ta","u","createEdgeWeightGetter","addUndirectedEdgeWithKey","dropNode","multi","assign","l","getMatchingEdge","sourceData","_nodes","out","isPlainObject","_typeof","isEmpty","privateProperty","configurable","writable","readOnlyProperty","descriptor","validateHints","hints","eventsModule","Iterator","next","Symbol","iterator","Iterator$2","of","done","empty","fromSequence","sequence","is","support","require$$0","require$$1","ARRAY_BUFFER_SUPPORT","SYMBOL_SUPPORT","iter","take","iterable","step","Infinity","GraphError","_this","InvalidArgumentsGraphError","_this2","captureStackTrace","NotFoundGraphError","_this3","UsageGraphError","_this4","MixedNodeData","clear","DirectedNodeData","UndirectedNodeData","EdgeData","findRelevantNodeData","method","mode","nodeOrEdge","nameOrEdge","add1","add2","nodeData","edgeData","arg1","arg2","_edges","inDegree","outDegree","undirectedDegree","in","attach","outKey","inKey","attachMulti","adj","head","previous","detach","detachMulti","NODE_ATTRIBUTES_METHODS","element","attacher","Class","data","_findRelevantNodeData","_findRelevantNodeData3","hasOwnProperty","_findRelevantNodeData4","_findRelevantNodeData5","updater","_findRelevantNodeData6","_findRelevantNodeData7","_findRelevantNodeData8","_findRelevantNodeData9","EDGE_ATTRIBUTES_METHODS","chain","iterables","current","EDGES_ITERATION","direction","forEachSimple","breakable","callback","avoid","shouldBreak","forEachMulti","createIterator","sourceAttributes","targetAttributes","forEachForKeySimple","targetData","forEachForKeyMulti","createIteratorForKey","createEdgeArray","size","from","undirectedSize","directedSize","mask","shouldFilter","createEdgeIterator","forEachEdgeForNode","found","createEdgeArrayForNode","edges","createEdgeIteratorForNode","forEachEdgeForPath","createEdgeArrayForPath","createEdgeIteratorForPath","NEIGHBORS_ITERATION","CompositeSetWrapper","A","B","forEachInObjectOnce","visited","neighborData","has","forEachNeighbor","wrap","createDedupedObjectIterator","neighbor","attachNeighborArrayCreator","description","neighbors","attachNeighborIteratorCreator","iteratorName","forEachAdjacency","assymetric","disconnectedNodes","hasEdges","validateSerializedNode","validateSerializedEdge","INSTANCE_ID","floor","random","TYPES","EMITTER_PROPS","allowSelfLoops","unsafeAddNode","NodeDataClass","addEdge","mustGenerateKey","eventData","_edgeKeyGenerator","isSelfLoop","_undirectedSelfLoopCount","_directedSelfLoopCount","_undirectedSize","_directedSize","mergeEdge","asUpdater","alreadyExistingEdgeData","info","oldAttributes","sourceWasAdded","targetWasAdded","dropEdgeFromData","delete","Graph","_assertThisInitialized","instancePrefix","edgeId","availableEdgeKey","forEach","prop","_options","_resetInstanceCounters","hasNode","hasDirectedEdge","hasUndirectedEdge","hasEdge","directedEdge","undirectedEdge","areDirectedNeighbors","areOutNeighbors","areInNeighbors","areUndirectedNeighbors","areNeighbors","areInboundNeighbors","areOutboundNeighbors","directedDegree","inboundDegree","degree","outboundDegree","inDegreeWithoutSelfLoops","loops","outDegreeWithoutSelfLoops","directedDegreeWithoutSelfLoops","undirectedDegreeWithoutSelfLoops","inboundDegreeWithoutSelfLoops","outboundDegreeWithoutSelfLoops","degreeWithoutSelfLoops","opposite","hasExtremity","isDirected","addNode","mergeNode","updateNode","dropEdge","dropDirectedEdge","dropUndirectedEdge","clearEdges","getAttribute","_attributes","getAttributes","hasAttribute","setAttribute","updateAttribute","removeAttribute","replaceAttributes","mergeAttributes","updateAttributes","updateEachEdgeAttributes","forEachAdjacencyEntry","forEachAdjacencyEntryWithOrphans","forEachAssymetricAdjacencyEntry","forEachAssymetricAdjacencyEntryWithOrphans","forEachNode","findNode","mapNodes","order","someNode","everyNode","reduceNodes","initialValue","accumulator","nodeEntries","serialized","_proto","merge","_sa","_ta","mergeUndirectedEdgeWithKey","mergeDirectedEdgeWithKey","addDirectedEdgeWithKey","undirectedByDefault","_edge$undirected","mergeUndirectedEdge","mergeDirectedEdge","addUndirectedEdge","addDirectedEdge","nullCopy","emptyCopy","toJSON","export","toString","inspect","multiIndex","tmp","label","desc","startsWith","dummy","for","verb","generateKey","_ref","forEachName","toUpperCase","mapName","ea","filterName","reduceName","findEdgeName","someName","everyName","originalName","capitalizedSingular","findName","DirectedGraph","finalOptions","UndirectedGraph","MultiGraph","MultiDirectedGraph","MultiUndirectedGraph","attachStaticFromMethod","instance","__extends","extendStatics","d","b","p","__","__importDefault","mod","__esModule","animate_1","easings_1","utils_1","types_1","DEFAULT_ZOOMING_RATIO","Camera","_super","angle","ratio","minRatio","maxRatio","nextFrame","previousState","enabled","getState","camera","setState","enable","disable","hasState","getPreviousState","getBoundedRatio","r","max","min","validateState","validatedState","isAnimated","validState","animate","opts","ANIMATE_DEFAULTS","easing","default","now","initialState","duration","animationCallback","coefficient","newState","requestFrame","cancelFrame","animatedZoom","factorOrOptions","factor","animatedUnzoom","animatedReset","TypedEventEmitter","__assign","getWheelDelta","getTouchCoords","getTouchesArray","getWheelCoords","getMouseCoords","getPosition","dom","bbox","getBoundingClientRect","clientX","left","clientY","top","res","sigmaDefaultPrevented","preventSigmaDefault","original","delta","MAX_TOUCHES","touches","map","touch","deltaY","detail","Captor","container","renderer","__createBinding","k2","__setModuleDefault","__importStar","captor_1","DRAG_TIMEOUT","DRAGGED_EVENTS_TOLERANCE","MOUSE_INERTIA_DURATION","MOUSE_INERTIA_RATIO","MOUSE_ZOOM_DURATION","ZOOMING_RATIO","DOUBLE_CLICK_TIMEOUT","DOUBLE_CLICK_ZOOMING_RATIO","DOUBLE_CLICK_ZOOMING_DURATION","MouseCaptor","draggedEvents","downStartTime","lastMouseX","lastMouseY","isMouseDown","isMoving","movingTimeout","startCameraState","clicks","doubleClickTimeout","currentWheelDirection","handleClick","handleRightClick","handleDown","handleUp","handleMove","handleWheel","handleOut","document","clearTimeout","handleDoubleClick","setTimeout","preventDefault","stopPropagation","mouseCoords","getCamera","newRatio","getViewportZoomedState","_a","cameraState","previousCameraState","refresh","eX","eY","lastMouse","viewportToFramedGraph","mouse","offsetX","offsetY","wheelCoords","ratioDiff","wheelDirection","lastWheelTriggerTime","__read","ar","TOUCH_INERTIA_RATIO","TOUCH_INERTIA_DURATION","TouchCaptor","touchMode","handleStart","handleLeave","getDimensions","width","offsetWidth","height","offsetHeight","dispatchRelatedMouseEvent","mousePosition","mouseEvent","MouseEvent","altKey","ctrlKey","isFakeSigmaMouseEvent","dispatchEvent","startTouchesPositions","lastTouchesPositions","_b","x0","y0","_c","x1","y1","startTouchesAngle","atan2","startTouchesDistance","pow","touchesPositions","xStart","yStart","newCameraState","_d","_e","angleDiff","hypot","dimensions","touchGraphPosition","smallestDimension","cos","sin","edgeLabelsToDisplayFromNodes","LabelGrid","LabelCandidate","compare","first","second","cellSize","columns","rows","cells","resizeAndClear","ceil","getIndex","pos","xIndex","yIndex","add","candidate","cell","organize","sort","getLabelsToDisplay","density","cellArea","scaledCellArea","scaledDensity","labelsToDisplayPerCell","labels","hoveredNode","highlightedNodes","displayedNodeLabels","worthyEdges","_","__spreadArray","to","pack","rectangleCollidesWithQuad","squareCollidesWithQuad","getCircumscribedAlignedRectangle","isRectangleAligned","extend_1","BLOCKS","MAX_LEVEL","OUTSIDE_BLOCK","X_OFFSET","Y_OFFSET","WIDTH_OFFSET","HEIGHT_OFFSET","TOP_LEFT","TOP_RIGHT","BOTTOM_LEFT","BOTTOM_RIGHT","hasWarnedTooMuchOutside","rect","x2","y2","heightVector","tl","tr","bl","br","xL","xR","yT","yB","qx","qy","qw","qh","h","pointIsInQuad","xmp","ymp","buildQuadrants","maxLevel","stack","level","block","topLeftBlock","topRightBlock","bottomLeftBlock","bottomRightBlock","hw","hh","insertNode","containers","collidingWithTopLeft","collidingWithTopRight","collidingWithBottomLeft","collidingWithBottomRight","collisions","reduce","acc","getNodesInAxisAlignedRectangleArea","collectedNodes","QuadTree","cache","lastRectangle","L","boundaries","resize","point","quad","rectangle","lr","abs","Sigma","sigma_1","camera_1","quadtree_1","mouse_1","drawEdgeLabel","edgeLabelSize","font","edgeLabelFont","weight","edgeLabelWeight","color","edgeLabelColor","attribute","fillStyle","sSize","tSize","sx","sy","tx","ty","cx","cy","textLength","measureText","ellipsis","acos","asin","PI","save","translate","rotate","fillText","restore","label_1","drawHover","labelSize","labelFont","labelWeight","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","PADDING","textWidth","boxWidth","round","boxHeight","radius","angleRadian","xDeltaCoord","beginPath","moveTo","lineTo","arc","closePath","fill","drawLabel","labelColor","createEdgeCompoundProgram","AbstractEdgeProgram","program_1","gl","vertexShaderSource","fragmentShaderSource","points","AbstractProgram","programClasses","EdgeCompoundProgram","programs","ProgramClass","bufferData","program","allocate","capacity","computeIndices","render","process","hidden","offset","createNodeCompoundProgram","AbstractNodeProgram","positionLocation","getAttribLocation","sizeLocation","colorLocation","matrixLocation","getUniformLocation","ratioLocation","scaleLocation","enableVertexAttribArray","vertexAttribPointer","FLOAT","BYTES_PER_ELEMENT","UNSIGNED_BYTE","NodeCompoundProgram","buffer","createBuffer","bindBuffer","ARRAY_BUFFER","vertexShader","loadVertexShader","fragmentShader","loadFragmentShader","loadProgram","DYNAMIC_DRAW","hasNothingToRender","edge_1","edge_arrowHead_1","edge_clamped_1","EdgeArrowProgram","edge_arrowHead_vert_glsl_1","edge_arrowHead_frag_glsl_1","POINTS","ATTRIBUTES","STRIDE","EdgeArrowHeadProgram","normalLocation","radiusLocation","barycentricLocation","sqrtZoomRatioLocation","correctionRatioLocation","i_1","thickness","floatColor","useProgram","uniformMatrix3fv","matrix","uniform1f","correctionRatio","drawArrays","TRIANGLES","edge_clamped_vert_glsl_1","edge_frag_glsl_1","EdgeClampedProgram","indicesBuffer","canUse32BitsIndices","IndicesArray","indicesArray","indicesType","UNSIGNED_INT","UNSIGNED_SHORT","ELEMENT_ARRAY_BUFFER","indices","c","STATIC_DRAW","drawElements","edge_vert_glsl_1","EdgeProgram","node_fast_vert_glsl_1","node_fast_frag_glsl_1","node_1","NodeFastProgram","scalingRatio","toStringTag","loadShader","glType","VERTEX_SHADER","FRAGMENT_SHADER","shader","createShader","shaderSource","compileShader","successfullyCompiled","getShaderParameter","COMPILE_STATUS","infoLog","getShaderInfoLog","deleteShader","shaders","createProgram","attachShader","linkProgram","successfullyLinked","getProgramParameter","LINK_STATUS","deleteProgram","DEFAULT_SETTINGS","validateSettings","hover_1","edge_label_1","node_fast_1","edge_arrow_1","labelDensity","minCameraRatio","maxCameraRatio","hideEdgesOnMove","hideLabelsOnMove","renderLabels","renderEdgeLabels","enableEdgeClickEvents","enableEdgeWheelEvents","enableEdgeHoverEvents","defaultNodeColor","defaultNodeType","defaultEdgeColor","defaultEdgeType","stagePadding","labelGridCellSize","labelRenderedSizeThreshold","nodeReducer","edgeReducer","zIndex","labelRenderer","hoverRenderer","edgeLabelRenderer","allowInvalidContainer","nodeProgramClasses","circle","edgeProgramClasses","arrow","line","__values","labels_1","settings_1","touch_1","matrices_1","edge_collisions_1","applyNodeDefaults","highlighted","forceLabel","applyEdgeDefaults","elements","canvasContexts","webGLContexts","activeListeners","quadtree","labelGrid","nodeDataCache","edgeDataCache","nodesWithForcedLabels","edgesWithForcedLabels","nodeExtent","identity","invMatrix","customBBox","normalizationFunction","createNormalizationFunction","cameraSizeRatio","pixelRatio","getPixelRatio","displayedLabels","hoveredEdge","renderFrame","renderHighlightedNodesFrame","needToProcess","needToSoftProcess","checkEdgesEventsFrame","nodePrograms","hoverNodePrograms","edgePrograms","validateGraph","HTMLElement","createWebGLContext","preserveDrawingBuffer","createCanvasContext","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","BLEND","NodeProgramClass","hoverNodes","EdgeProgramClass","bindCameraHandlers","mouseCaptor","touchCaptor","bindEventHandlers","bindGraphHandlers","handleSettingsUpdate","createCanvas","id","canvas","createElement","class","appendChild","contextOptions","antialias","getContext","_scheduleRefresh","mouseIsOnNode","nodeX","nodeY","getQuadNodes","mouseGraphPosition","getNodeAtPosition","quadNodes","minDistance","nodeAtPosition","nodePosition","framedGraphToViewport","scaleSize","handleResize","baseEvent","event","nodeToHover","scheduleHighlightedNodesRender","checkEdgeHoverEvents","createMouseListener","eventType","getEdgeAtPoint","graphUpdate","softGraphUpdate","dropNodeGraphUpdate","dropEdgeGraphUpdate","clearEdgesGraphUpdate","clearGraphUpdate","payload","edgeToHover","e_1","isPixelColored","viewportToGraph","graphX","graphY","transformationRatio","someEdge","sourceId","targetId","xs","ys","xt","yt","graphLength","graphToViewport","vp_xs","vp_ys","vp_xt","vp_yt","viewportLength","filterEdges","edgeAttributes","sourcePosition","targetPosition","doEdgeCollideWithPoint","selectedEdge","highestZIndex","edges_1","edges_1_1","getEdgeAttribute","e_1_1","return","keepArrays","nodeZExtent","edgeZExtent","graphExtent","nullCamera","nullCameraMatrix","matrixFromCamera","getGraphDimensions","getSetting","nodesPerPrograms","applyTo","zIndexOrdering","edgesPerPrograms","_refresh","visibleNodes","viewRectangle","labelsToDisplay","edgeLabels","clearRect","edgeLabelsToDisplay","renderHighlightedNodes","hovers","nodesToRender","COLOR_BUFFER_BIT","handleEscape","updateCachedValues","moving","viewportDimensions","graphDimensions","padding","getMatrixImpact","getContainer","getGraph","getMouseCaptor","getTouchCaptor","extent","getNodeDisplayData","getEdgeDisplayData","getSettings","setSetting","updateSetting","previousWidth","previousHeight","style","scale","viewport","scheduleRefresh","viewportTarget","center","graphMousePosition","graphCenterPosition","marginX","marginY","p1","p2","coordinates","override","recomputeMatrix","viewportPos","multiplyVec2","viewportPoint","inverse","graphPoint","getBBox","getCustomBBox","setCustomBBox","firstChild","removeChild","getCanvases","events_1","rawEmitter","animateNodes","index_1","targets","startPositions","attrs","getNodeAttribute","frame","setNodeAttribute","HTML_COLORS","black","silver","gray","grey","white","maroon","red","purple","fuchsia","green","lime","olive","yellow","navy","blue","teal","aqua","darkblue","mediumblue","darkgreen","darkcyan","deepskyblue","darkturquoise","mediumspringgreen","springgreen","cyan","midnightblue","dodgerblue","lightseagreen","forestgreen","seagreen","darkslategray","darkslategrey","limegreen","mediumseagreen","turquoise","royalblue","steelblue","darkslateblue","mediumturquoise","indigo","darkolivegreen","cadetblue","cornflowerblue","rebeccapurple","mediumaquamarine","dimgray","dimgrey","slateblue","olivedrab","slategray","slategrey","lightslategray","lightslategrey","mediumslateblue","lawngreen","chartreuse","aquamarine","skyblue","lightskyblue","blueviolet","darkred","darkmagenta","saddlebrown","darkseagreen","lightgreen","mediumpurple","darkviolet","palegreen","darkorchid","yellowgreen","sienna","brown","darkgray","darkgrey","lightblue","greenyellow","paleturquoise","lightsteelblue","powderblue","firebrick","darkgoldenrod","mediumorchid","rosybrown","darkkhaki","mediumvioletred","indianred","peru","chocolate","tan","lightgray","lightgrey","thistle","orchid","goldenrod","palevioletred","crimson","gainsboro","plum","burlywood","lightcyan","lavender","darksalmon","violet","palegoldenrod","lightcoral","khaki","aliceblue","honeydew","azure","sandybrown","wheat","beige","whitesmoke","mintcream","ghostwhite","salmon","antiquewhite","linen","lightgoldenrodyellow","oldlace","magenta","deeppink","orangered","tomato","hotpink","coral","darkorange","lightsalmon","orange","lightpink","pink","gold","peachpuff","navajowhite","moccasin","bisque","mistyrose","blanchedalmond","papayawhip","lavenderblush","seashell","cornsilk","lemonchiffon","floralwhite","snow","lightyellow","ivory","cubicInOut","cubicOut","cubicIn","quadraticInOut","quadraticOut","quadraticIn","linear","easings","pixels","readPixels","drawingBufferHeight","RGBA","xS","yS","xT","extractPixel","getCorrectionRatio","floatArrayColor","parseColor","assignDeep","is_graph_1","data_1","objects","_i","devicePixelRatio","xMin","xMax","yMin","yMax","minX","maxX","minY","maxY","dX","dY","zA","zB","requestID","INT8","INT32","FLOAT32","RGBA_TEST_REGEX","RGBA_EXTRACT_REGEX","val","g","parseInt","charAt","match","FLOAT_COLOR_CACHE","htmlColor","parsed","viewportRatio","graphRatio","multiply","webgl2","WebGL2RenderingContext","getExtension","isFinite","a00","a01","a02","a10","a11","a12","a20","a21","a22","b00","b01","b02","b10","b11","b12","b20","b21","b22","z","b0","b1"],"sourceRoot":""}